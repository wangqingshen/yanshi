{"version":3,"sources":["aui/aui-sharebox.js"],"names":["window","undefined","auiSharebox","prototype","init","params","callback","this","frameBounces","col","buttons","cancelTitle","maskDiv","shareBoxDiv","self","open","buttonsHtml","document","createElement","className","body","appendChild","length","i","image","text","innerHTML","offsetHeight","classList","add","style","webkitTransform","transform","opacity","addEventListener","event","preventDefault","api","setFrameAttr","bounces","shareboxButtons","querySelectorAll","setTimeout","onclick","close","ii","e","value","_value","buttonIndex","buttonValue","querySelector","actionsheetHeight","parentNode","removeChild"],"mappings":"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","file":"aui-sharebox.js","sourcesContent":["/**\r\n * aui-sharebox.js\r\n * @author 流浪男\r\n * Licensed under the MIT license.\r\n * http://www.opensource.org/licenses/mit-license.php\r\n */\r\n(function( window, undefined ) {\r\n    \"use strict\";\r\n    var auiSharebox = function() {\r\n    };\r\n    var isShow = false;\r\n    auiSharebox.prototype = {\r\n        init: function(params,callback){\r\n            this.frameBounces = params.frameBounces;\r\n            this.col = params.col;\r\n            this.buttons = params.buttons;\r\n            this.cancelTitle = params.cancelTitle;\r\n            this.maskDiv;\r\n            this.shareBoxDiv;\r\n            var self = this;\r\n            self.open(params,callback);\r\n        },\r\n        open: function(params,callback) {\r\n            var shareboxHtml='',buttonsHtml = '';\r\n        \tvar self = this;\r\n            if(self.shareBoxDiv || !self.buttons)return;\r\n            if(!self.maskDiv){\r\n                self.maskDiv = document.createElement(\"div\");\r\n                self.maskDiv.className = \"aui-mask\";\r\n                document.body.appendChild(self.maskDiv);\r\n            }\r\n            if(!self.col)self.col = 5;\r\n            self.shareBoxDiv = document.createElement(\"div\");\r\n            self.shareBoxDiv.className = \"aui-sharebox aui-grid\";\r\n            document.body.appendChild(self.shareBoxDiv);\r\n            if(self.buttons && self.buttons.length){\r\n                buttonsHtml = '<div class=\"aui-row aui-row-padded\">';\r\n                for(var i = 0; i < self.buttons.length;i++){\r\n                    if(self.col == 5){\r\n                        buttonsHtml += '<div class=\"aui-col-5 aui-sharebox-btn\">';\r\n                    }else{\r\n                        buttonsHtml += '<div class=\"aui-col-xs-'+(12/self.col)+' aui-sharebox-btn\">';\r\n                    }\r\n                    if(self.buttons[i].image)buttonsHtml += '<img src=\"'+self.buttons[i].image+'\">';\r\n                    if(self.buttons[i].text)buttonsHtml += '<div class=\"aui-grid-label\">'+self.buttons[i].text+'</div>';\r\n                    buttonsHtml += '</div>';\r\n                }\r\n                buttonsHtml += '</div>';\r\n            }\r\n            if(self.cancelTitle){\r\n                buttonsHtml += '<div class=\"aui-sharebox-close-btn aui-border-t\">'+this.cancelTitle+'</div>';\r\n            }\r\n            self.shareBoxDiv.innerHTML = buttonsHtml;\r\n            var actionsheetHeight = self.shareBoxDiv.offsetHeight;\r\n            self.maskDiv.classList.add(\"aui-mask-in\");\r\n            self.shareBoxDiv.style.webkitTransform = self.shareBoxDiv.style.transform = \"translate3d(0,0,0)\";\r\n            self.shareBoxDiv.style.opacity = 1;\r\n            self.shareBoxDiv.addEventListener(\"touchmove\", function(event){\r\n                event.preventDefault();\r\n            })\r\n            self.maskDiv.addEventListener(\"touchmove\", function(event){\r\n                event.preventDefault();\r\n            })\r\n            if(typeof(api) != 'undefined' && typeof(api) == 'object' && self.frameBounces){\r\n                api.setFrameAttr({\r\n                    bounces:false\r\n                });\r\n            }\r\n            var shareboxButtons = document.querySelectorAll(\".aui-sharebox-btn\");\r\n            if(shareboxButtons && shareboxButtons.length > 0){\r\n                setTimeout(function(){\r\n                    self.maskDiv.onclick = function(){self.close();return;};\r\n                    for(var ii = 0; ii < shareboxButtons.length; ii++){\r\n                        (function(e){\r\n                            shareboxButtons[e].onclick = function(){\r\n                                if(self.buttons[e].value){\r\n                                    var _value = self.buttons[e].value;\r\n                                }else{\r\n                                    var _value = null;\r\n                                }\r\n                                if(callback){\r\n                                    callback({\r\n                                        buttonIndex: e+1,\r\n                                        buttonValue:_value\r\n                                    });\r\n                                };\r\n                                self.close();\r\n                                return;\r\n                            }\r\n                        })(ii)\r\n                    }\r\n                }, 350)\r\n\r\n            }\r\n            document.querySelector(\".aui-sharebox-close-btn\").onclick = function(){self.close();return;};\r\n        },\r\n        close: function(){\r\n            var self = this;\r\n            if(typeof(api) != 'undefined' && typeof(api) == 'object' && self.frameBounces){\r\n                api.setFrameAttr({\r\n                    bounces:true\r\n                });\r\n            }\r\n            if(self.shareBoxDiv){\r\n                var actionsheetHeight = self.shareBoxDiv.offsetHeight;\r\n                self.shareBoxDiv.style.webkitTransform = self.shareBoxDiv.style.transform = \"translate3d(0,\"+actionsheetHeight+\"px,0)\";\r\n                self.maskDiv.style.opacity = 0;\r\n                setTimeout(function(){\r\n                    if(self.maskDiv){\r\n                        self.maskDiv.parentNode.removeChild(self.maskDiv);\r\n                    }\r\n                    self.shareBoxDiv.parentNode.removeChild(self.shareBoxDiv);\r\n                    self.maskDiv = self.shareBoxDiv = false;\r\n                }, 300)\r\n            }\r\n        }\r\n    };\r\n\twindow.auiSharebox = auiSharebox;\r\n})(window);"]}