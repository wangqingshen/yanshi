{"version":3,"sources":["aui/aui-dialog.js"],"names":["window","undefined","auiDialog","prototype","params","title","msg","buttons","input","create","callback","self","this","dialogHtml","buttonsHtml","headerHtml","text","msgHtml","length","i","footerHtml","document","body","insertAdjacentHTML","dialogButtons","querySelectorAll","ii","onclick","buttonIndex","parseInt","getAttribute","querySelector","value","close","open","style","marginTop","Math","round","offsetHeight","maskHtml","setTimeout","classList","add","addEventListener","e","preventDefault","remove","parentNode","removeChild","alert","prompt"],"mappings":"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","file":"aui-dialog.js","sourcesContent":["/**\r\n * aui-dialog.js\r\n * @author 流浪男\r\n * @todo more things to abstract, e.g. Loading css etc.\r\n * Licensed under the MIT license.\r\n * http://www.opensource.org/licenses/mit-license.php\r\n */\r\n(function( window, undefined ) {\r\n    \"use strict\";\r\n    var auiDialog = function() {\r\n    };\r\n    var isShow = false;\r\n    auiDialog.prototype = {\r\n        params: {\r\n            title:'',\r\n            msg:'',\r\n            buttons: ['取消','确定'],\r\n            input:false\r\n        },\r\n        create: function(params,callback) {\r\n        \tvar self = this;\r\n            var dialogHtml = '';\r\n            var buttonsHtml = '';\r\n            var headerHtml = params.title ? '<div class=\"aui-dialog-header\">' + params.title + '</div>' : '<div class=\"aui-dialog-header\">' + self.params.title + '</div>';\r\n            if(params.input){\r\n                params.text = params.text ? params.text: '';\r\n                var msgHtml = '<div class=\"aui-dialog-body\"><input type=\"text\" placeholder=\"'+params.text+'\"></div>';\r\n            }else{\r\n                var msgHtml = params.msg ? '<div class=\"aui-dialog-body\">' + params.msg + '</div>' : '<div class=\"aui-dialog-body\">' + self.params.msg + '</div>';\r\n            }\r\n            var buttons = params.buttons ? params.buttons : self.params.buttons;\r\n            if (buttons && buttons.length > 0) {\r\n                for (var i = 0; i < buttons.length; i++) {\r\n                    buttonsHtml += '<div class=\"aui-dialog-btn\" tapmode button-index=\"'+i+'\">'+buttons[i]+'</div>';\r\n                }\r\n            }\r\n            var footerHtml = '<div class=\"aui-dialog-footer\">'+buttonsHtml+'</div>';\r\n            dialogHtml = '<div class=\"aui-dialog\">'+headerHtml+msgHtml+footerHtml+'</div>';\r\n            document.body.insertAdjacentHTML('beforeend', dialogHtml);\r\n            // listen buttons click\r\n            var dialogButtons = document.querySelectorAll(\".aui-dialog-btn\");\r\n            if(dialogButtons && dialogButtons.length > 0){\r\n                for(var ii = 0; ii < dialogButtons.length; ii++){\r\n                    dialogButtons[ii].onclick = function(){\r\n                        if(callback){\r\n                            if(params.input){\r\n                                callback({\r\n                                    buttonIndex: parseInt(this.getAttribute(\"button-index\"))+1,\r\n                                    text: document.querySelector(\"input\").value\r\n                                });\r\n                            }else{\r\n                                callback({\r\n                                    buttonIndex: parseInt(this.getAttribute(\"button-index\"))+1\r\n                                });\r\n                            }\r\n                        };\r\n                        self.close();\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n            self.open();\r\n        },\r\n        open: function(){\r\n            if(!document.querySelector(\".aui-dialog\"))return;\r\n            var self = this;\r\n            document.querySelector(\".aui-dialog\").style.marginTop =  \"-\"+Math.round(document.querySelector(\".aui-dialog\").offsetHeight/2)+\"px\";\r\n            if(!document.querySelector(\".aui-mask\")){\r\n                var maskHtml = '<div class=\"aui-mask\"></div>';\r\n                document.body.insertAdjacentHTML('beforeend', maskHtml);\r\n            }\r\n            // document.querySelector(\".aui-dialog\").style.display = \"block\";\r\n            setTimeout(function(){\r\n                document.querySelector(\".aui-dialog\").classList.add(\"aui-dialog-in\");\r\n                document.querySelector(\".aui-mask\").classList.add(\"aui-mask-in\");\r\n                document.querySelector(\".aui-dialog\").classList.add(\"aui-dialog-in\");\r\n            }, 10)\r\n            document.querySelector(\".aui-mask\").addEventListener(\"touchmove\", function(e){\r\n                e.preventDefault();\r\n            })\r\n            document.querySelector(\".aui-dialog\").addEventListener(\"touchmove\", function(e){\r\n                e.preventDefault();\r\n            })\r\n            return;\r\n        },\r\n        close: function(){\r\n            var self = this;\r\n            document.querySelector(\".aui-mask\").classList.remove(\"aui-mask-in\");\r\n            document.querySelector(\".aui-dialog\").classList.remove(\"aui-dialog-in\");\r\n            document.querySelector(\".aui-dialog\").classList.add(\"aui-dialog-out\");\r\n            if (document.querySelector(\".aui-dialog:not(.aui-dialog-out)\")) {\r\n                setTimeout(function(){\r\n                    if(document.querySelector(\".aui-dialog\"))document.querySelector(\".aui-dialog\").parentNode.removeChild(document.querySelector(\".aui-dialog\"));\r\n                    self.open();\r\n                    return true;\r\n                },200)\r\n            }else{\r\n                document.querySelector(\".aui-mask\").classList.add(\"aui-mask-out\");\r\n                document.querySelector(\".aui-dialog\").addEventListener(\"webkitTransitionEnd\", function(){\r\n                    self.remove();\r\n                })\r\n                document.querySelector(\".aui-dialog\").addEventListener(\"transitionend\", function(){\r\n                    self.remove();\r\n                })\r\n            }\r\n        },\r\n        remove: function(){\r\n            if(document.querySelector(\".aui-dialog\"))document.querySelector(\".aui-dialog\").parentNode.removeChild(document.querySelector(\".aui-dialog\"));\r\n            if(document.querySelector(\".aui-mask\")){\r\n                document.querySelector(\".aui-mask\").classList.remove(\"aui-mask-out\");\r\n            }\r\n            return true;\r\n        },\r\n        alert: function(params,callback){\r\n        \tvar self = this;\r\n            return self.create(params,callback);\r\n        },\r\n        prompt:function(params,callback){\r\n            var self = this;\r\n            params.input = true;\r\n            return self.create(params,callback);\r\n        }\r\n    };\r\n\twindow.auiDialog = auiDialog;\r\n})(window);"]}