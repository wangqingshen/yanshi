{"version":3,"sources":["aui/api.js"],"names":["window","parseArguments","url","data","fnSuc","dataType","undefined","u","isAndroid","test","navigator","appVersion","uzStorage","ls","localStorage","os","trim","str","String","prototype","call","replace","trimAll","isElement","obj","nodeType","isArray","Array","isEmptyObject","JSON","stringify","addEvt","el","name","fn","useCapture","addEventListener","console","warn","rmEvt","removeEventListener","one","that","this","cb","dom","selector","arguments","length","document","querySelector","domAll","querySelectorAll","byId","id","getElementById","first","children","last","eq","index","not","prev","node","previousSibling","next","nextSibling","closest","doms","targetDom","isSame","i","len","isEqualNode","traversal","parentNode","DOCUMENT_NODE","contains","parent","mark","body","documentElement","remove","removeChild","attr","value","getAttribute","setAttribute","removeAttr","removeAttribute","hasCls","cls","className","indexOf","addCls","classList","add","preCls","newCls","removeCls","toggleCls","toggle","val","tagName","options","selectedIndex","prepend","html","insertAdjacentHTML","append","before","after","innerHTML","text","txt","textContent","offset","sl","Math","max","scrollLeft","st","scrollTop","rect","getBoundingClientRect","l","left","t","top","w","offsetWidth","h","offsetHeight","css","style","cssText","cssVal","prop","computedStyle","getComputedStyle","getPropertyValue","jsonToStr","json","strToJson","parse","setStorage","key","v","setItem","getStorage","getItem","slice","rmStorage","removeItem","clearStorage","clear","fixIos7Bar","strDM","api","systemType","strSV","systemVersion","numSV","parseInt","fullScreen","iOS7StatusBarAppearance","paddingTop","fixStatusBar","sysType","ver","parseFloat","toast","title","time","opts","show","showProgress","setTimeout","hideProgress","tmp","post","argsToJson","apply","type","toLowerCase","method","ajax","ret","err","get","$api"],"mappings":"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","file":"api.js","sourcesContent":["/*\r\n * APICloud JavaScript Library\r\n * Copyright (c) 2014 apicloud.com\r\n */\r\n(function(window){\r\n    var u = {};\r\n    var isAndroid = (/android/gi).test(navigator.appVersion);\r\n    var uzStorage = function(){\r\n        var ls = window.localStorage;\r\n        if(isAndroid){\r\n           ls = os.localStorage();\r\n        }\r\n        return ls;\r\n    };\r\n    function parseArguments(url, data, fnSuc, dataType) {\r\n        if (typeof(data) == 'function') {\r\n            dataType = fnSuc;\r\n            fnSuc = data;\r\n            data = undefined;\r\n        }\r\n        if (typeof(fnSuc) != 'function') {\r\n            dataType = fnSuc;\r\n            fnSuc = undefined;\r\n        }\r\n        return {\r\n            url: url,\r\n            data: data,\r\n            fnSuc: fnSuc,\r\n            dataType: dataType\r\n        };\r\n    }\r\n    u.trim = function(str){\r\n        if(String.prototype.trim){\r\n            return str == null ? \"\" : String.prototype.trim.call(str);\r\n        }else{\r\n            return str.replace(/(^\\s*)|(\\s*$)/g, \"\");\r\n        }\r\n    };\r\n    u.trimAll = function(str){\r\n        return str.replace(/\\s*/g,'');\r\n    };\r\n    u.isElement = function(obj){\r\n        return !!(obj && obj.nodeType == 1);\r\n    };\r\n    u.isArray = function(obj){\r\n        if(Array.isArray){\r\n            return Array.isArray(obj);\r\n        }else{\r\n            return obj instanceof Array;\r\n        }\r\n    };\r\n    u.isEmptyObject = function(obj){\r\n        if(JSON.stringify(obj) === '{}'){\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    u.addEvt = function(el, name, fn, useCapture){\r\n        if(!u.isElement(el)){\r\n            console.warn('$api.addEvt Function need el param, el param must be DOM Element');\r\n            return;\r\n        }\r\n        useCapture = useCapture || false;\r\n        if(el.addEventListener) {\r\n            el.addEventListener(name, fn, useCapture);\r\n        }\r\n    };\r\n    u.rmEvt = function(el, name, fn, useCapture){\r\n        if(!u.isElement(el)){\r\n            console.warn('$api.rmEvt Function need el param, el param must be DOM Element');\r\n            return;\r\n        }\r\n        useCapture = useCapture || false;\r\n        if (el.removeEventListener) {\r\n            el.removeEventListener(name, fn, useCapture);\r\n        }\r\n    };\r\n    u.one = function(el, name, fn, useCapture){\r\n        if(!u.isElement(el)){\r\n            console.warn('$api.one Function need el param, el param must be DOM Element');\r\n            return;\r\n        }\r\n        useCapture = useCapture || false;\r\n        var that = this;\r\n        var cb = function(){\r\n            fn && fn();\r\n            that.rmEvt(el, name, cb, useCapture);\r\n        };\r\n        that.addEvt(el, name, cb, useCapture);\r\n    };\r\n    u.dom = function(el, selector){\r\n        if(arguments.length === 1 && typeof arguments[0] == 'string'){\r\n            if(document.querySelector){\r\n                return document.querySelector(arguments[0]);\r\n            }\r\n        }else if(arguments.length === 2){\r\n            if(el.querySelector){\r\n                return el.querySelector(selector);\r\n            }\r\n        }\r\n    };\r\n    u.domAll = function(el, selector){\r\n        if(arguments.length === 1 && typeof arguments[0] == 'string'){\r\n            if(document.querySelectorAll){\r\n                return document.querySelectorAll(arguments[0]);\r\n            }\r\n        }else if(arguments.length === 2){\r\n            if(el.querySelectorAll){\r\n                return el.querySelectorAll(selector);\r\n            }\r\n        }\r\n    };\r\n    u.byId = function(id){\r\n        return document.getElementById(id);\r\n    };\r\n    u.first = function(el, selector){\r\n        if(arguments.length === 1){\r\n            if(!u.isElement(el)){\r\n                console.warn('$api.first Function need el param, el param must be DOM Element');\r\n                return;\r\n            }\r\n            return el.children[0];\r\n        }\r\n        if(arguments.length === 2){\r\n            return this.dom(el, selector+':first-child');\r\n        }\r\n    };\r\n    u.last = function(el, selector){\r\n        if(arguments.length === 1){\r\n            if(!u.isElement(el)){\r\n                console.warn('$api.last Function need el param, el param must be DOM Element');\r\n                return;\r\n            }\r\n            var children = el.children;\r\n            return children[children.length - 1];\r\n        }\r\n        if(arguments.length === 2){\r\n            return this.dom(el, selector+':last-child');\r\n        }\r\n    };\r\n    u.eq = function(el, index){\r\n        return this.dom(el, ':nth-child('+ index +')');\r\n    };\r\n    u.not = function(el, selector){\r\n        return this.domAll(el, ':not('+ selector +')');\r\n    };\r\n    u.prev = function(el){\r\n        if(!u.isElement(el)){\r\n            console.warn('$api.prev Function need el param, el param must be DOM Element');\r\n            return;\r\n        }\r\n        var node = el.previousSibling;\r\n        if(node.nodeType && node.nodeType === 3){\r\n            node = node.previousSibling;\r\n            return node;\r\n        }\r\n    };\r\n    u.next = function(el){\r\n        if(!u.isElement(el)){\r\n            console.warn('$api.next Function need el param, el param must be DOM Element');\r\n            return;\r\n        }\r\n        var node = el.nextSibling;\r\n        if(node.nodeType && node.nodeType === 3){\r\n            node = node.nextSibling;\r\n            return node;\r\n        }\r\n    };\r\n    u.closest = function(el, selector){\r\n        if(!u.isElement(el)){\r\n            console.warn('$api.closest Function need el param, el param must be DOM Element');\r\n            return;\r\n        }\r\n        var doms, targetDom;\r\n        var isSame = function(doms, el){\r\n            var i = 0, len = doms.length;\r\n            for(i; i<len; i++){\r\n                if(doms[i].isEqualNode(el)){\r\n                    return doms[i];\r\n                }\r\n            }\r\n            return false;\r\n        };\r\n        var traversal = function(el, selector){\r\n            doms = u.domAll(el.parentNode, selector);\r\n            targetDom = isSame(doms, el);\r\n            while(!targetDom){\r\n                el = el.parentNode;\r\n                if(el != null && el.nodeType == el.DOCUMENT_NODE){\r\n                    return false;\r\n                }\r\n                traversal(el, selector);\r\n            }\r\n\r\n            return targetDom;\r\n        };\r\n\r\n        return traversal(el, selector);\r\n    };\r\n    u.contains = function(parent,el){\r\n        var mark = false;\r\n        if(el === parent){\r\n            mark = true;\r\n            return mark;\r\n        }else{\r\n            do{\r\n                el = el.parentNode;\r\n                if(el === parent){\r\n                    mark = true;\r\n                    return mark;\r\n                }\r\n            }while(el === document.body || el === document.documentElement);\r\n\r\n            return mark;\r\n        }\r\n\r\n    };\r\n    u.remove = function(el){\r\n        if(el && el.parentNode){\r\n            el.parentNode.removeChild(el);\r\n        }\r\n    };\r\n    u.attr = function(el, name, value){\r\n        if(!u.isElement(el)){\r\n            console.warn('$api.attr Function need el param, el param must be DOM Element');\r\n            return;\r\n        }\r\n        if(arguments.length == 2){\r\n            return el.getAttribute(name);\r\n        }else if(arguments.length == 3){\r\n            el.setAttribute(name, value);\r\n            return el;\r\n        }\r\n    };\r\n    u.removeAttr = function(el, name){\r\n        if(!u.isElement(el)){\r\n            console.warn('$api.removeAttr Function need el param, el param must be DOM Element');\r\n            return;\r\n        }\r\n        if(arguments.length === 2){\r\n            el.removeAttribute(name);\r\n        }\r\n    };\r\n    u.hasCls = function(el, cls){\r\n        if(!u.isElement(el)){\r\n            console.warn('$api.hasCls Function need el param, el param must be DOM Element');\r\n            return;\r\n        }\r\n        if(el.className.indexOf(cls) > -1){\r\n            return true;\r\n        }else{\r\n            return false;\r\n        }\r\n    };\r\n    u.addCls = function(el, cls){\r\n        if(!u.isElement(el)){\r\n            console.warn('$api.addCls Function need el param, el param must be DOM Element');\r\n            return;\r\n        }\r\n        if('classList' in el){\r\n            el.classList.add(cls);\r\n        }else{\r\n            var preCls = el.className;\r\n            var newCls = preCls +' '+ cls;\r\n            el.className = newCls;\r\n        }\r\n        return el;\r\n    };\r\n    u.removeCls = function(el, cls){\r\n        if(!u.isElement(el)){\r\n            console.warn('$api.removeCls Function need el param, el param must be DOM Element');\r\n            return;\r\n        }\r\n        if('classList' in el){\r\n            el.classList.remove(cls);\r\n        }else{\r\n            var preCls = el.className;\r\n            var newCls = preCls.replace(cls, '');\r\n            el.className = newCls;\r\n        }\r\n        return el;\r\n    };\r\n    u.toggleCls = function(el, cls){\r\n        if(!u.isElement(el)){\r\n            console.warn('$api.toggleCls Function need el param, el param must be DOM Element');\r\n            return;\r\n        }\r\n       if('classList' in el){\r\n            el.classList.toggle(cls);\r\n        }else{\r\n            if(u.hasCls(el, cls)){\r\n                u.removeCls(el, cls);\r\n            }else{\r\n                u.addCls(el, cls);\r\n            }\r\n        }\r\n        return el;\r\n    };\r\n    u.val = function(el, val){\r\n        if(!u.isElement(el)){\r\n            console.warn('$api.val Function need el param, el param must be DOM Element');\r\n            return;\r\n        }\r\n        if(arguments.length === 1){\r\n            switch(el.tagName){\r\n                case 'SELECT':\r\n                    var value = el.options[el.selectedIndex].value;\r\n                    return value;\r\n                    break;\r\n                case 'INPUT':\r\n                    return el.value;\r\n                    break;\r\n                case 'TEXTAREA':\r\n                    return el.value;\r\n                    break;\r\n            }\r\n        }\r\n        if(arguments.length === 2){\r\n            switch(el.tagName){\r\n                case 'SELECT':\r\n                    el.options[el.selectedIndex].value = val;\r\n                    return el;\r\n                    break;\r\n                case 'INPUT':\r\n                    el.value = val;\r\n                    return el;\r\n                    break;\r\n                case 'TEXTAREA':\r\n                    el.value = val;\r\n                    return el;\r\n                    break;\r\n            }\r\n        }\r\n\r\n    };\r\n    u.prepend = function(el, html){\r\n        if(!u.isElement(el)){\r\n            console.warn('$api.prepend Function need el param, el param must be DOM Element');\r\n            return;\r\n        }\r\n        el.insertAdjacentHTML('afterbegin', html);\r\n        return el;\r\n    };\r\n    u.append = function(el, html){\r\n        if(!u.isElement(el)){\r\n            console.warn('$api.append Function need el param, el param must be DOM Element');\r\n            return;\r\n        }\r\n        el.insertAdjacentHTML('beforeend', html);\r\n        return el;\r\n    };\r\n    u.before = function(el, html){\r\n        if(!u.isElement(el)){\r\n            console.warn('$api.before Function need el param, el param must be DOM Element');\r\n            return;\r\n        }\r\n        el.insertAdjacentHTML('beforebegin', html);\r\n        return el;\r\n    };\r\n    u.after = function(el, html){\r\n        if(!u.isElement(el)){\r\n            console.warn('$api.after Function need el param, el param must be DOM Element');\r\n            return;\r\n        }\r\n        el.insertAdjacentHTML('afterend', html);\r\n        return el;\r\n    };\r\n    u.html = function(el, html){\r\n        if(!u.isElement(el)){\r\n            console.warn('$api.html Function need el param, el param must be DOM Element');\r\n            return;\r\n        }\r\n        if(arguments.length === 1){\r\n            return el.innerHTML;\r\n        }else if(arguments.length === 2){\r\n            el.innerHTML = html;\r\n            return el;\r\n        }\r\n    };\r\n    u.text = function(el, txt){\r\n        if(!u.isElement(el)){\r\n            console.warn('$api.text Function need el param, el param must be DOM Element');\r\n            return;\r\n        }\r\n        if(arguments.length === 1){\r\n            return el.textContent;\r\n        }else if(arguments.length === 2){\r\n            el.textContent = txt;\r\n            return el;\r\n        }\r\n    };\r\n    u.offset = function(el){\r\n        if(!u.isElement(el)){\r\n            console.warn('$api.offset Function need el param, el param must be DOM Element');\r\n            return;\r\n        }\r\n        var sl = Math.max(document.documentElement.scrollLeft, document.body.scrollLeft);\r\n        var st = Math.max(document.documentElement.scrollTop, document.body.scrollTop);\r\n\r\n        var rect = el.getBoundingClientRect();\r\n        return {\r\n            l: rect.left + sl,\r\n            t: rect.top + st,\r\n            w: el.offsetWidth,\r\n            h: el.offsetHeight\r\n        };\r\n    };\r\n    u.css = function(el, css){\r\n        if(!u.isElement(el)){\r\n            console.warn('$api.css Function need el param, el param must be DOM Element');\r\n            return;\r\n        }\r\n        if(typeof css == 'string' && css.indexOf(':') > 0){\r\n            el.style && (el.style.cssText += ';' + css);\r\n        }\r\n    };\r\n    u.cssVal = function(el, prop){\r\n        if(!u.isElement(el)){\r\n            console.warn('$api.cssVal Function need el param, el param must be DOM Element');\r\n            return;\r\n        }\r\n        if(arguments.length === 2){\r\n            var computedStyle = window.getComputedStyle(el, null);\r\n            return computedStyle.getPropertyValue(prop);\r\n        }\r\n    };\r\n    u.jsonToStr = function(json){\r\n        if(typeof json === 'object'){\r\n            return JSON && JSON.stringify(json);\r\n        }\r\n    };\r\n    u.strToJson = function(str){\r\n        if(typeof str === 'string'){\r\n            return JSON && JSON.parse(str);\r\n        }\r\n    };\r\n    u.setStorage = function(key, value){\r\n        if(arguments.length === 2){\r\n            var v = value;\r\n            if(typeof v == 'object'){\r\n                v = JSON.stringify(v);\r\n                v = 'obj-'+ v;\r\n            }else{\r\n                v = 'str-'+ v;\r\n            }\r\n            var ls = uzStorage();\r\n            if(ls){\r\n                ls.setItem(key, v);\r\n            }\r\n        }\r\n    };\r\n    u.getStorage = function(key){\r\n        var ls = uzStorage();\r\n        if(ls){\r\n            var v = ls.getItem(key);\r\n            if(!v){return;}\r\n            if(v.indexOf('obj-') === 0){\r\n                v = v.slice(4);\r\n                return JSON.parse(v);\r\n            }else if(v.indexOf('str-') === 0){\r\n                return v.slice(4);\r\n            }\r\n        }\r\n    };\r\n    u.rmStorage = function(key){\r\n        var ls = uzStorage();\r\n        if(ls && key){\r\n            ls.removeItem(key);\r\n        }\r\n    };\r\n    u.clearStorage = function(){\r\n        var ls = uzStorage();\r\n        if(ls){\r\n            ls.clear();\r\n        }\r\n    };\r\n\r\n\r\n    /*by king*/\r\n    u.fixIos7Bar = function(el){\r\n        if(!u.isElement(el)){\r\n            console.warn('$api.fixIos7Bar Function need el param, el param must be DOM Element');\r\n            return;\r\n        }\r\n        var strDM = api.systemType;\r\n        if (strDM == 'ios') {\r\n            var strSV = api.systemVersion;\r\n            var numSV = parseInt(strSV,10);\r\n            var fullScreen = api.fullScreen;\r\n            var iOS7StatusBarAppearance = api.iOS7StatusBarAppearance;\r\n            if (numSV >= 7 && !fullScreen && iOS7StatusBarAppearance) {\r\n                el.style.paddingTop = '20px';\r\n            }\r\n        }\r\n    };\r\n    u.fixStatusBar = function(el){\r\n        if(!u.isElement(el)){\r\n            console.warn('$api.fixStatusBar Function need el param, el param must be DOM Element');\r\n            return;\r\n        }\r\n        var sysType = api.systemType;\r\n        if(sysType == 'ios'){\r\n            u.fixIos7Bar(el);\r\n        }else if(sysType == 'android'){\r\n            var ver = api.systemVersion;\r\n            ver = parseFloat(ver);\r\n            if(ver >= 4.4){\r\n                el.style.paddingTop = '25px';\r\n            }\r\n        }\r\n    };\r\n    u.toast = function(title, text, time){\r\n        var opts = {};\r\n        var show = function(opts, time){\r\n            api.showProgress(opts);\r\n            setTimeout(function(){\r\n                api.hideProgress();\r\n            },time);\r\n        };\r\n        if(arguments.length === 1){\r\n            var time = time || 500;\r\n            if(typeof title === 'number'){\r\n                time = title;\r\n            }else{\r\n                opts.title = title+'';\r\n            }\r\n            show(opts, time);\r\n        }else if(arguments.length === 2){\r\n            var time = time || 500;\r\n            var text = text;\r\n            if(typeof text === \"number\"){\r\n                var tmp = text;\r\n                time = tmp;\r\n                text = null;\r\n            }\r\n            if(title){\r\n                opts.title = title;\r\n            }\r\n            if(text){\r\n                opts.text = text;\r\n            }\r\n            show(opts, time);\r\n        }\r\n        if(title){\r\n            opts.title = title;\r\n        }\r\n        if(text){\r\n            opts.text = text;\r\n        }\r\n        time = time || 500;\r\n        show(opts, time);\r\n    };\r\n    u.post = function(/*url,data,fnSuc,dataType*/){\r\n        var argsToJson = parseArguments.apply(null, arguments);\r\n        var json = {};\r\n        var fnSuc = argsToJson.fnSuc;\r\n        argsToJson.url && (json.url = argsToJson.url);\r\n        argsToJson.data && (json.data = argsToJson.data);\r\n        if(argsToJson.dataType){\r\n            var type = argsToJson.dataType.toLowerCase();\r\n            if (type == 'text'||type == 'json') {\r\n                json.dataType = type;\r\n            }\r\n        }else{\r\n            json.dataType = 'json';\r\n        }\r\n        json.method = 'post';\r\n        api.ajax(json,\r\n            function(ret,err){\r\n                if (ret) {\r\n                    fnSuc && fnSuc(ret);\r\n                }\r\n            }\r\n        );\r\n    };\r\n    u.get = function(/*url,fnSuc,dataType*/){\r\n        var argsToJson = parseArguments.apply(null, arguments);\r\n        var json = {};\r\n        var fnSuc = argsToJson.fnSuc;\r\n        argsToJson.url && (json.url = argsToJson.url);\r\n        //argsToJson.data && (json.data = argsToJson.data);\r\n        if(argsToJson.dataType){\r\n            var type = argsToJson.dataType.toLowerCase();\r\n            if (type == 'text'||type == 'json') {\r\n                json.dataType = type;\r\n            }\r\n        }else{\r\n            json.dataType = 'text';\r\n        }\r\n        json.method = 'get';\r\n        api.ajax(json,\r\n            function(ret,err){\r\n                if (ret) {\r\n                    fnSuc && fnSuc(ret);\r\n                }\r\n            }\r\n        );\r\n    };\r\n\r\n/*end*/\r\n\r\n\r\n    window.$api = u;\r\n\r\n})(window);\r\n\r\n\r\n"]}