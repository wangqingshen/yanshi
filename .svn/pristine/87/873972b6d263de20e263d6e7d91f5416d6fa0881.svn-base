{"version":3,"sources":["dialog.js"],"names":["root","factory","define","amd","exports","module","Dialog","window","Zepto","jQuery","$","this","fn","settings","list","each","dialog","options","extend","trigger","init","push","type","alert","html","content","action","className","button","timer","alertOptions","target","animate","show","mask","afterHide","c","dispose","callback","setTimeout","touch","hide","buttons","yes","no","btnstr","i","l","length","item","close","position","fixed","beforeShow","call","defaults","zIndex","width","height","confirm","rnd","Math","random","toString","replace","id","closeTpl","titleTpl","showed","prototype","append","dialogContainer","css","addClass","title","bindEvent","obj","click","e","move","on","preventDefault","returnvalue","stopPropagation","_this","document","keydown","keyCode","remove","clearInterval","beforeHide","removeClass","test","dailogContent","blur","setPosition","setInterval","isNaN","outerHeight","outerWidth","clientHeight","clientWidth","ml","mt","left","top","floor","max","console","log","bottom"],"mappings":"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","file":"dialog.js","sourcesContent":["/*\n * Created with Sublime Text 2.\n * license: http://www.lovewebgames.com/jsmodule/index.html\n * User: 田想兵\n * Date: 2015-03-16\n * Time: 20:27:54\n * Contact: 55342775@qq.com\n */\n;\n(function(root, factory) {\n\t//amd\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(['$'], factory);\n\t} else if (typeof exports === 'object') { //umd\n\t\tmodule.exports = factory();\n\t} else {\n\t\troot.Dialog = factory(window.Zepto || window.jQuery || $);\n\t}\n})(this, function($) {\n\t$.fn.Dialog = function(settings) {\n\t\tvar list = [];\n\t\t$(this).each(function() {\n\t\t\tvar dialog = new Dialog();\n\t\t\tvar options = $.extend({\n\t\t\t\ttrigger: $(this)\n\t\t\t}, settings);\n\t\t\tdialog.init(options);\n\t\t\tlist.push(dialog);\n\t\t});\n\t\treturn list;\n\t};\n\t$.Dialog = function(settings) {\n\t\tif (settings.type === \"alert\") {\n\t\t\tvar alert = new Dialog();\n\t\t\tvar html = '<div class=\"ui-alert-title\">' + settings.content + '</div>';\n\t\t\tvar action = '';\n\t\t\tvar className = 'ui-alert';\n\t\t\tif (settings.button) {\n\t\t\t\tif (typeof settings.button == 'boolean') {\n\t\t\t\t\tsettings.button = '确定';\n\t\t\t\t};\n\t\t\t\taction = '<p class=\"ui-dialog-action\"><button class=\"ui-alert-submit  js-dialog-close\">' + settings.button + '</button></p>';\n\t\t\t} else if (!settings.timer) {\n\t\t\t\t// settings.timer = 3000;\n\t\t\t\tclassName += ' ui-alert-tip';\n\t\t\t}\n\t\t\thtml += action;\n\t\t\tvar alertOptions = $.extend({\n\t\t\t\ttarget: html,\n\t\t\t\tanimate: true,\n\t\t\t\tshow: true,\n\t\t\t\tmask: true,\n\t\t\t\tclassName: className,\n\t\t\t\tafterHide: function(c) {\n\t\t\t\t\tthis.dispose();\n\t\t\t\t\tsettings.callback && settings.callback();\n\t\t\t\t}\n\t\t\t}, settings);\n\t\t\talert.init(alertOptions);\n\t\t\tif (settings.timer) {\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\talert.dispose();\n\t\t\t\t\tsettings.callback && settings.callback();\n\t\t\t\t}, settings.timer);\n\t\t\t}\n\t\t\talert.touch(alert.mask, function() {\n\t\t\t\talert.hide();\n\t\t\t\tsettings.callback && settings.callback();\n\t\t\t});\n\t\t}\n\t\tif (settings.type === \"confirm\") {\n\t\t\tvar dialog = new Dialog();\n\t\t\tvar html = '<div class=\"ui-confirm-title\">' + settings.content + '</div>';\n\t\t\tvar action = '';\n\t\t\tif (!settings.buttons) {\n\t\t\t\tsettings.buttons = [{\n\t\t\t\t\t'yes': '确定'\n\t\t\t\t}, {\n\t\t\t\t\t'no': '取消'\n\t\t\t\t}];\n\t\t\t};\n\t\t\tvar btnstr = '';\n\t\t\tfor (var i = 0, l = settings.buttons.length; i < l; i++) {\n\t\t\t\tvar item = settings.buttons[i];\n\t\t\t\tif (item.yes) {\n\t\t\t\t\tbtnstr += '<td><button class=\"ui-confirm-submit \" data-type=\"yes\">' + item.yes + '</button></td>';\n\t\t\t\t}\n\t\t\t\tif (item.no) {\n\t\t\t\t\tbtnstr += '<td><button class=\"ui-confirm-no\" data-type=\"no\">' + item.no + '</button></td>';\n\t\t\t\t}\n\t\t\t\tif (item.close) {\n\t\t\t\t\tbtnstr += '<td><button class=\"ui-confirm-close js-dialog-close\" data-type=\"close\">' + item.close + '</button></td>';\n\t\t\t\t}\n\t\t\t}\n\t\t\taction = '<table class=\"ui-dialog-action\"><tr>' + btnstr + '</tr></table>';\n\t\t\tif(settings.position==\"bottom\"){\n\t\t\t\thtml=action+html;\n\t\t\t}else{\n\t\t\t\thtml += action;\n\t\t\t}\n\t\t\tvar options = $.extend({\n\t\t\t\ttarget: html,\n\t\t\t\tanimate: true,\n\t\t\t\tshow: true,\n\t\t\t\tfixed: true,\n\t\t\t\tmask: true,\n\t\t\t\tclassName: \"ui-alert\",\n\t\t\t\tafterHide: function(c) {\n\t\t\t\t\tthis.dispose();\n\t\t\t\t},\n\t\t\t\tbeforeShow: function(c) {\n\t\t\t\t\tdialog.touch($('.ui-confirm-submit', c), function() {\n\t\t\t\t\t\tsettings.callback && settings.callback.call(dialog, 'yes', c);\n\t\t\t\t\t});\n\t\t\t\t\tdialog.touch($('.ui-confirm-no', c), function() {\n\t\t\t\t\t\tsettings.callback && settings.callback.call(dialog, 'no', c);\n\t\t\t\t\t});\n\t\t\t\t\tdialog.touch($('.ui-confirm-close', c), function() {\n\t\t\t\t\t\tsettings.callback && settings.callback.call(dialog, 'close', c);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}, settings);\n\t\t\tdialog.init(options);\n\t\t}\n\t};\n\t/*alert*/\n\t$.alert = function(content, button, callback, timer, settings) {\n\t\t\tvar options = {};\n\t\t\tvar defaults = {\n\t\t\t\tzIndex: 100,\n\t\t\t\ttype: 'alert'\n\t\t\t};\n\t\t\tif (typeof content == 'object') {\n\t\t\t\toptions = $.extend(defaults, content);\n\t\t\t} else {\n\t\t\t\toptions = $.extend(defaults, {\n\t\t\t\t\tcontent: content,\n\t\t\t\t\tbutton: button,\n\t\t\t\t\ttimer: timer,\n\t\t\t\t\tcallback: callback,\n\t\t\t\t\twidth: 283,\n\t\t\t\t\theight: 'auto'\n\t\t\t\t});\n\t\t\t}\n\t\t\t$.Dialog($.extend(options, settings));\n\t\t}\n\t\t/*\n\t\tbuttons :[{yes:\"确定\"},{no:'取消'},{close:'关闭'}]\n\t\t*/\n\t$.confirm = function(content, buttons, callback, settings) {\n\t\tvar options = {};\n\t\tvar defaults = {\n\t\t\tzIndex: 100,\n\t\t\ttype: 'confirm'\n\t\t};\n\t\tif (typeof content == 'object') {\n\t\t\toptions = $.extend(defaults, content);\n\t\t} else {\n\t\t\toptions = $.extend(defaults, {\n\t\t\t\tcontent: content,\n\t\t\t\tbuttons: buttons,\n\t\t\t\twidth: 283,\n\t\t\t\tcallback: callback\n\t\t\t});\n\t\t}\n\t\t$.Dialog($.extend(options, settings));\n\t}\n\tvar Dialog = function() {\n\t\tvar rnd = Math.random().toString().replace('.', '');\n\t\tthis.id = 'dialog_' + rnd;\n\t\tthis.settings = {};\n\t\tthis.settings.closeTpl = $('<span class=\"ui-dialog-close js-dialog-close\">x</span>');\n\t\tthis.settings.titleTpl = $('<div class=\"ui-dialog-title\"></div>');\n\t\tthis.timer = null;\n\t\tthis.showed = false;\n\t\tthis.mask = $();\n\t}\n\tDialog.prototype = {\n\t\tinit: function(settings) {\n\t\t\tvar _this = this;\n\t\t\tthis.settings = $.extend({\n\t\t\t\tfixed: false //是否固定位置，\n\t\t\t}, this.settings, settings);\n\t\t\tif (this.settings.mask) {\n\t\t\t\tthis.mask = $('<div class=\"ui-dialog-mask\"/>');\n\t\t\t\t$('body').append(this.mask);\n\t\t\t}\n\t\t\t$('body').append('<div class=\"ui-dialog\" id=\"' + this.id + '\"></div>');\n\t\t\tthis.dialogContainer = $('#' + this.id);\n\t\t\tvar zIndex = this.settings.zIndex || 10;\n\t\t\tthis.dialogContainer.css({\n\t\t\t\t'zIndex': zIndex\n\t\t\t});\n\t\t\tif (this.settings.className) {\n\t\t\t\tthis.dialogContainer.addClass(this.settings.className);\n\t\t\t};\n\t\t\tthis.mask.css({\n\t\t\t\t'zIndex': zIndex - 1\n\t\t\t});\n\t\t\tif (this.settings.closeTpl) {\n\t\t\t\tthis.dialogContainer.append(this.settings.closeTpl);\n\t\t\t}\n\t\t\tif (this.settings.title) {\n\t\t\t\tthis.dialogContainer.append(this.settings.titleTpl);\n\t\t\t\tthis.settings.titleTpl.html(this.settings.title);\n\t\t\t}\n\t\t\tthis.bindEvent();\n\t\t\tif (this.settings.show) {\n\t\t\t\tthis.show();\n\t\t\t}\n\t\t},\n\t\ttouch: function(obj, fn) {\n\t\t\tvar move;\n\t\t\t$(obj).on('click', click);\n\n\t\t\tfunction click(e) {\n\t\t\t\treturn fn.call(this, e);\n\t\t\t}\n\t\t\t$(obj).on('touchmove', function(e) {\n\t\t\t\tmove = true;\n\t\t\t}).on('touchend', function(e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tif (!move) {\n\t\t\t\t\tvar returnvalue = fn.call(this, e, 'touch');\n\t\t\t\t\tif (!returnvalue) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tmove = false;\n\t\t\t});\n\t\t},\n\t\tbindEvent: function() {\n\t\t\tvar _this = this;\n\t\t\tif (this.settings.trigger) {\n\t\t\t\t$(this.settings.trigger).click(function() {\n\t\t\t\t\t_this.show()\n\t\t\t\t});\n\t\t\t\t_this.touch($(this.settings.trigger), function() {\n\t\t\t\t\t_this.show()\n\t\t\t\t});\n\t\t\t};\n\t\t\t$(this.dialogContainer).on('click', '.js-dialog-close', function() {\n\t\t\t\t\t_this.hide();\n\t\t\t\t\treturn false;\n\t\t\t\t})\n\t\t\t\t// $(window).resize(function() {\n\t\t\t\t// \t_this.setPosition();\n\t\t\t\t// });\n\t\t\t\t// $(window).scroll(function() {\n\t\t\t\t// \t_this.setPosition();\n\t\t\t\t// })\n\t\t\t$(document).keydown(function(e) {\n\t\t\t\tif (e.keyCode === 27 && _this.showed) {\n\t\t\t\t\t_this.hide();\n\t\t\t\t}\n\t\t\t});\n\t\t\t$(this.dialogContainer).on('hide', function() {\n\t\t\t\t_this.hide();\n\t\t\t})\n\t\t},\n\t\tdispose: function() {\n\t\t\tthis.dialogContainer.remove();\n\t\t\tthis.mask.remove();\n\t\t\tthis.timer && clearInterval(this.timer);\n\t\t},\n\t\thide: function() {\n\t\t\tvar _this = this;\n\t\t\tif (_this.settings.beforeHide) {\n\t\t\t\t_this.settings.beforeHide.call(_this, _this.dialogContainer);\n\t\t\t}\n\t\t\tthis.showed = false;\n\t\t\tthis.mask.hide();\n\t\t\tthis.timer && clearInterval(this.timer);\n\t\t\tif (this.settings.animate) {\n\t\t\t\tthis.dialogContainer.removeClass('zoomIn').addClass(\"zoomOut\");\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t_this.dialogContainer.hide();\n\t\t\t\t\tif (typeof _this.settings.target === \"object\") {\n\t\t\t\t\t\t$('body').append(_this.dialogContainer.hide());\n\t\t\t\t\t}\n\t\t\t\t\tif (_this.settings.afterHide) {\n\t\t\t\t\t\t_this.settings.afterHide.call(_this, _this.dialogContainer);\n\t\t\t\t\t}\n\t\t\t\t}, 500);\n\t\t\t} else {\n\t\t\t\tthis.dialogContainer.hide();\n\t\t\t\tif (typeof this.settings.target === \"object\") {\n\t\t\t\t\t$('body').append(this.dialogContainer)\n\t\t\t\t}\n\t\t\t\tif (this.settings.afterHide) {\n\t\t\t\t\tthis.settings.afterHide.call(this, this.dialogContainer);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tshow: function() {\n\t\t\tif (typeof this.settings.target === \"string\") {\n\t\t\t\tif (/^(\\.|\\#\\w+)/gi.test(this.settings.target)) {\n\t\t\t\t\tthis.dailogContent = $(this.settings.target);\n\t\t\t\t} else {\n\t\t\t\t\tthis.dailogContent = $('<div>' + this.settings.target + '</div>')\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.dailogContent = this.settings.target;\n\t\t\t}\n\t\t\tthis.mask.show();\n\t\t\tthis.dailogContent.show();\n\t\t\tthis.height = this.settings.height || 'auto' //this.dialogContainer.height();\n\t\t\tthis.width = this.settings.width || 'auto' //this.dialogContainer.width();\n\t\t\tthis.dialogContainer.append(this.dailogContent).show().css({\n\t\t\t\theight: this.height,\n\t\t\t\twidth: this.width\n\t\t\t});\n\t\t\tif (this.settings.beforeShow) {\n\t\t\t\tthis.settings.beforeShow.call(this, this.dialogContainer);\n\t\t\t}\n\t\t\tthis.showed = true;\n\t\t\t$(this.settings.trigger).blur();\n\n\t\t\tthis.setPosition();\n\t\t\tvar _this = this;\n\t\t\t// $.alert(this.settings.clientWidth)\n\t\t\tthis.timer && clearInterval(this.timer);\n\t\t\tif (this.settings.fixed) {\n\t\t\t\tthis.timer = setInterval(function() {\n\t\t\t\t\t_this.setPosition();\n\t\t\t\t}, 1000);\n\t\t\t}\n\t\t\tif (this.settings.animate) {\n\t\t\t\tthis.dialogContainer.addClass('zoomIn').removeClass('zoomOut').addClass('animated');\n\t\t\t}\n\t\t},\n\t\tsetPosition: function() {\n\t\t\tif (this.showed) {\n\t\t\t\tvar _this = this;\n\t\t\t\tthis.dialogContainer.show();\n\t\t\t\tthis.height = this.settings.height;\n\t\t\t\tthis.width = this.settings.width;\n\t\t\t\tif (isNaN(this.height)) {\n\t\t\t\t\tthis.height = (this.dialogContainer.outerHeight && this.dialogContainer.outerHeight()) || this.dialogContainer.height();\n\t\t\t\t}\n\t\t\t\tif (isNaN(this.width)) {\n\t\t\t\t\tthis.width = (this.dialogContainer.outerWidth && this.dialogContainer.outerWidth()) || this.dialogContainer.width();\n\t\t\t\t}\n\t\t\t\tvar clientHeight = $(window).height();\n\t\t\t\tvar clientWidth = $(window).width();\n\t\t\t\tvar ml = this.width / 2;\n\t\t\t\tvar mt = this.height / 2;\n\t\t\t\tvar left = clientWidth / 2 - ml;\n\t\t\t\tvar top = clientHeight / 2 - mt;\n\t\t\t\tleft = Math.floor(Math.max(0, left));\n\t\t\t\ttop = Math.floor(Math.max(0, top));\n\t\t\t\tconsole.log(\"ch:\"+clientHeight,\"cw:\"+clientWidth,\"left:\"+left,\"top:\"+top,\"w:\"+this.width,\"h:\"+this.height);\n\t\t\t\tvar position = 'absolute';\n\t\t\t\tif (_this.settings.fixed) {\n\t\t\t\t\tposition = 'fixed';\n\t\t\t\t}\n\t\t\t\tvar bottom = \"auto\";\n\t\t\t\tif(_this.settings.position==\"bottom\"){\n\t\t\t\t\ttop=\"auto\";\n\t\t\t\t\tbottom=0;\n\t\t\t\t}\n\t\t\t\t_this.dialogContainer.css({\n\t\t\t\t\tposition: position,\n\t\t\t\t\ttop: top,\n\t\t\t\t\tleft: left,\n\t\t\t\t\tbottom:bottom\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\treturn Dialog;\n});"]}