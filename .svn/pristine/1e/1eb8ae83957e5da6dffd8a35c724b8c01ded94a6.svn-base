{"version":3,"sources":["aui/aui-lazyload.js"],"names":["window","undefined","_loadImgNodes","auiLazyload","params","this","errorImage","_init","prototype","self","document","querySelectorAll","_judgeImages","addEventListener","length","i","getBoundingClientRect","top","innerHeight","_loadImage","el","img","Image","src","getAttribute","removeAttribute","onerror"],"mappings":"CAMA,SAAWA,EAAQC,GACf,YACA,IAAIC,GACAC,EAAc,SAASC,GACvBC,KAAKC,WAAaF,EAAOE,aAAY,EACrCD,KAAKE,MAAMH,GAEfD,GAAYK,WACRD,MAAO,SAASH,GACZ,GAAIK,GAAOJ,IACXH,GAAgBQ,SAASC,iBAAiB,cAC1CF,EAAKG,eACLZ,EAAOa,iBAAiB,SAAU,WAC9BX,EAAgBQ,SAASC,iBAAiB,cAC1CF,EAAKG,iBACN,IAEPA,aAAa,WACT,GAAIH,GAAOJ,IACX,IAAGH,EAAcY,OACb,IAAI,GAAIC,GAAI,EAAIA,EAAIb,EAAcY,OAAQC,IAClCb,EAAca,GAAGC,wBAAwBC,IAAMjB,EAAOkB,aACtDT,EAAKU,WAAWjB,EAAca,KAK9CI,WAAW,SAASC,GAChB,GAAIX,GAAOJ,KACPgB,EAAM,GAAIC,MACdD,GAAIE,IAAMH,EAAGI,aAAa,YAC1BJ,EAAGG,IAAMH,EAAGI,aAAa,YACzBJ,EAAGK,gBAAgB,YAEnBJ,EAAIK,QAAU,WACVN,EAAGG,IAAMd,EAAKH,YAAcc,EAAGI,aAAa,OAC5CJ,EAAGK,gBAAgB,eAI/BzB,EAAOG,YAAcA,GACtBH","file":"aui-lazyload.js","sourcesContent":["/**\r\n * aui-lazyload.js\r\n * @author 流浪男\r\n * Licensed under the MIT license.\r\n * http://www.opensource.org/licenses/mit-license.php\r\n */\r\n(function( window, undefined ) {\r\n    \"use strict\";\r\n    var _loadImgNodes;\r\n    var auiLazyload = function(params) {\r\n        this.errorImage = params.errorImage||false;\r\n        this._init(params);\r\n    };\r\n    auiLazyload.prototype = {\r\n        _init: function(params) {\r\n            var self = this;\r\n            _loadImgNodes = document.querySelectorAll('[data-src]');\r\n            self._judgeImages();\r\n            window.addEventListener('scroll', function(){\r\n                _loadImgNodes = document.querySelectorAll('[data-src]');\r\n                self._judgeImages();\r\n            }, false);\r\n        },\r\n        _judgeImages:function() {\r\n            var self = this;\r\n            if(_loadImgNodes.length){\r\n                for(var i = 0;  i < _loadImgNodes.length; i++){\r\n                    if (_loadImgNodes[i].getBoundingClientRect().top < window.innerHeight) {\r\n                        self._loadImage(_loadImgNodes[i]);\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        _loadImage:function(el){\r\n            var self = this;\r\n            var img = new Image();\r\n            img.src = el.getAttribute('data-src');\r\n            el.src = el.getAttribute('data-src');\r\n            el.removeAttribute(\"data-src\");\r\n            // // 图片加载失败\r\n            img.onerror = function() {\r\n                el.src = self.errorImage || el.getAttribute('src');\r\n                el.removeAttribute(\"data-src\");\r\n            };\r\n        }\r\n    }\r\n    window.auiLazyload = auiLazyload;\r\n})(window);\r\n"]}