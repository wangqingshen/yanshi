{"version":3,"sources":["common.js"],"names":["ajaxFun","info","beforeFun","successFun","completeFun","errorFun","$","ajax","type","url","apiUrl","data","JSON","stringify","dataType","contentType","beforeSend","beforeFune","success","complete","error","accAdd","arg1","arg2","r1","r2","m","c","n","toString","split","length","e","Math","abs","pow","max","cm","Number","replace","toFixed","accSub","createLoadDom","id","d","addClass","l","attr","localStorage","localStorage_url","s","text","append","createDialog","checkMobileNo","str","re","test","clearEvt","bind","val","checkIsNumber","reg","RegExp","reg1","getCurTime","date","Date","y","getFullYear","substr","getMonth","getDate","h","getHours","i","getMinutes","getSeconds","getCurDate","getParams","name","r","window","location","search","match","unescape","getRandStr","floor","random","gotoLocation","href","mergeInfo","apiName","appId","wechat","randStr","signature","hex_sha1","header","timestamp","nonce","cmd","Index","detail_url","module","1","2","3","4","5","init","member_id","setItem","getGoodsInfo","pullRefresh","auiPullToRefresh","container","document","querySelector","triggerDistance","ret","status","setTimeout","_c","eq","children","remove","find","cancelLoading","setCopyInfo","src","goods_img","data-id","spu_id","goods_name","parseInt","goods_price","count","recommend_price_area","undefined","changePriceArea","p","arr","arr1","push","join","jumpEvt","click","this","class_type","load","code","errcode","list","_copy","_y","recommend","clone","_d","html","_empty","_text","alert","errmsg","jQuery","GoodsDetail","order_type","dialog","auiDialog","sku","addToCartUrl","reserveUrl","getGoodsDetail","goToCar","addToCart","openSpellDialog","reserveEvt","sku_id","getSkuId","sku_spec","mark","skuId","hasClass","specSelectEvt","parent","removeClass","next","closeSpellDialog","checkPtInfo","_index","num","member_mob","each","index","getSkuIds","sku_2_price","sku_4_price","title","msg","getElementById","innerHTML","buttons","buttonIndex","tabSelectEvt","delivery_explain","_slider","goods_slide","sliderHtml","_imgs","auiSlide","height","speed","autoPlay","pageShow","pageStyle","loop","dotPosition","currentPage","imgHtml","j","portionList","spec","portion","cycleList","cycle","portionHtml","cycleHtml","x","payState","sku_ids","member_mobiles","createGoodsOrder","Reserve","address_info","pin_state","6","changeAddress","setAddressInfo","wxPay","getDefaultAddress","getAddressInfo","address_id","address","content","r_name","r_mobile","getTimeArea","state","time_area","noonDate","noon","nightDate","night","_opt","changeRadioEvt","_v","addToList","_that","price","amount","splice","inArray","parse","orderData","totalPay","delivery_time","goods_info","order_sn","recommend_goods","pin_info","voucher_info","goods_spec","delivery_num","data-spu","data-sku","optItem","optBtn","data-state","data-price","after","pin_amount","nick_name","mobile","pin_price","_s","_b","q","_a","v_b_id","voucher_name","voucher_price","MobileSelect","trigger","wheels","delivery_state","delivery_count","isEmptyObject","t","css","urlApi","order_info","time_area_state","selectV","selectT","selectV1","selectT1","v_id","v_price","openid","order_amount","Order","scrollState","page","pagesize","default_state","getOrderList","scrollEvt","gotoGoodsDetail","page_size","margin-top","margin-bottom","font-size","time_text","order_goods","time_num","delivery_surplus","delivery_surplus_num","order_id","_p","orderUrl","auiScroll","listen","distance","isToBottom","OrderDetail","order_state","7","8","address_list","delivery_time_list","order_sn_list","getOrderDetail","changeOrderAddress","applyDelayed","delay_time","continuePay","delivery_date","member_mobile","show","delay","Account","getUserInfo","userLogo","userName","userSex","sex","avatar","Address","getAddressList","addAddressEvt","clickItemEvt","event","stopPropagation","urlState","addressState","changeDefaultAddress","that","editEvt","delEvt","is_default","AddAddress","toast","auiToast","addEvt","checkMobile","mob","fail","duration","focus","d_id","d_name","_area","t_id","t_name","removeAttr","addUrl","addressUrl","console","log","_x","take_list","first_id","EditAddress","editClickEvt","getSchoolList","d_index","t_index","position","User","defaultSelected","selectSexEvt","saveUser","_this","username","Register","getVerCode","checkRegisterInfo","checkCode","mobState","codeState","seccode","nickName","setSeconds","time","end_time","getTime","sys_second","timer","setInterval","day","hour","minute","second","clearInterval","Question","changeRedioEvt","registerEvt","_radios","change","user_info","q1","q2","q3","q4","question","Shoppingcar","getCarList","gotoReserveEvt","gotoDelCar","delcarEvt","len","time_state","state_arr","url_state","jumpUrl","checkAll","checked","totalValue","prop","reload","itemSelectEvt","totalNum","goods_state","sku_price","time-state","invalidMask","invalidText","Coupon","couponStatus","getCouponList","auiTab","element","rangeText","voucher_type","start_time","coupon_state","Refund","jumpToApply","urlArr","OrderSuccess","WXpay","changeOrderState","Footer"],"mappings":"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","file":"common.js","sourcesContent":["/**\r\n * yanshi common.js\r\n * @author wxy\r\n * @date 2017.07.13\r\n */\r\n\r\n// var apiUrl = 'http://local.yanshi.com/api.php';\r\n// var apiUrl = 'http://www.manyouku.com/api.php';\r\nvar apiUrl = '../../../api.php';\r\n\r\nvar wechat = 100;\r\n\r\n/**\r\n * ajax公共方法\r\n * @author wxy\r\n * @private\r\n */\r\nfunction ajaxFun(info, beforeFun, successFun, completeFun, errorFun) {\r\n\t$.ajax({\r\n\t\ttype: 'POST',\r\n\t\turl: apiUrl,\r\n\t\tdata: JSON.stringify(info),\r\n\t\tdataType: 'json',\r\n\t\tcontentType: \"application/json; charset=utf-8\",\r\n\t \tbeforeSend: beforeFune,\r\n    \tsuccess: successFun,\r\n    \tcomplete: completeFun,\r\n    \terror: errorFun\r\n    })\r\n}\r\n\r\n// 浮点数加法\r\nfunction accAdd(arg1, arg2) {\r\n    var r1, r2, m, c, n;\r\n    try { r1 = arg1.toString().split(\".\")[1].length } catch (e) { r1 = 0 }\r\n    try { r2 = arg2.toString().split(\".\")[1].length } catch (e) { r2 = 0 }\r\n    c = Math.abs(r1 - r2);\r\n    m = Math.pow(10, Math.max(r1, r2))\r\n    if (c > 0) {\r\n        var cm = Math.pow(10, c);\r\n        if (r1 > r2) {\r\n            arg1 = Number(arg1.toString().replace(\".\", \"\"));\r\n            arg2 = Number(arg2.toString().replace(\".\", \"\")) * cm;\r\n        } else {\r\n            arg1 = Number(arg1.toString().replace(\".\", \"\")) * cm;\r\n            arg2 = Number(arg2.toString().replace(\".\", \"\"));\r\n        }\r\n    } else {\r\n        arg1 = Number(arg1.toString().replace(\".\", \"\"));\r\n        arg2 = Number(arg2.toString().replace(\".\", \"\"));\r\n    }\t\r\n    \tn=(r1>=r2)?r1:r2;\r\n        return ((arg1 + arg2) / m).toFixed(n);\r\n}\r\n\r\n// 浮点数减法\r\nfunction accSub(arg1,arg2){\r\n　　 var r1,r2,m,n;\r\n　　 try{r1=arg1.toString().split(\".\")[1].length}catch(e){r1=0}\r\n　　 try{r2=arg2.toString().split(\".\")[1].length}catch(e){r2=0}\r\n　　 m=Math.pow(10,Math.max(r1,r2));\r\n　　 //last modify by deeka\r\n　　 //动态控制精度长度\r\n　　 n=(r1>=r2)?r1:r2;\r\n　　 return ((arg1*m-arg2*m)/m).toFixed(n);\r\n}\r\n\r\n// 动态创建loading dom\r\nfunction createLoadDom(id) {\r\n\tvar d = $('<div />').addClass('load-wrapper loading-'+id),\r\n\t\tl = $('<img />').attr('src', localStorage.localStorage_url+'loading.gif'),\r\n\t\ts = $('<span />').text('加载中');\r\n\td.append(l,s);\r\n\treturn d;\r\n}\r\n\r\n// 动态创建遮罩层\r\nfunction createDialog() {\r\n\tvar d = $('<div />').addClass('zhezhao'),\r\n\t\tl = $('<img />').attr('src', localStorage.localStorage_url+'loading.gif');\r\n\td.append(l);\r\n\treturn d;\r\n}\r\n\r\n/**\r\n * 正则匹配手机号码\r\n * @author wxy\r\n * @private\r\n */\r\nfunction checkMobileNo(str) {\r\n\tvar re =/^1[3|7|5|8]\\d{9}$/;\r\n\tif(re.test(str)) return true;\r\n\telse return false;\r\n}\r\n\r\n// 清除内容\r\nfunction clearEvt(m, n) {\r\n\tm.bind('click', function(){\r\n\t\tif(n.val()) {\r\n\t\t\tn.val('');\r\n\t\t}\r\n\t});\r\n}\r\n\r\n/**\r\n * 检测输入的数值是否为数字\r\n * @param {mixed} [n] 被检测的对象\r\n * @return {Boolean} ture|false\r\n * @author wxy\r\n */\r\nfunction checkIsNumber(n){\r\n\tvar reg = new RegExp(\"^[0-9]*[1-9][0-9]*$\"),//正则正整数\r\n\t\treg1 = new RegExp(\"^(([0-9]+\\\\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\\\\.[0-9]+)|([0-9]*[1-9][0-9]*))$\");//正则正浮点数\r\n\tif (reg.test(n)||reg1.test(n)) {\r\n\t\treturn true;\r\n\t} else {\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\n// 点击全选（或反选）\r\n// function checkAll(d, s) {\r\n// \td.click(function(){   \r\n// \t    if(this.checked){   \r\n// \t        s.prop(\"checked\", true);  \r\n// \t    }else{   \r\n// \t\t\ts.prop(\"checked\", false);\r\n// \t    }   \r\n// \t});\r\n// }\r\n\r\n/**\r\n * 获取当前时间格式为ymdhis的时间字符串\r\n * @return {String} ymdhis\r\n * @author wxy\r\n */\r\n\r\nfunction getCurTime() {\r\n\tvar date = new Date(),\r\n\t\ty = date.getFullYear().toString().substr(2),\r\n\t\tm = (date.getMonth() + 1) < 10 ? '0' + (date.getMonth() + 1) : (date.getMonth() + 1).toString(),\r\n\t\td = date.getDate() < 10 ? '0' + date.getDate() : date.getDate().toString(),\r\n\t\th = date.getHours() % 12 < 10 ? '0' + date.getHours() % 12 : (date.getHours() % 12).toString(),\r\n\t\ti = date.getMinutes() < 10 ? '0' + date.getMinutes() : date.getMinutes().toString(),\r\n\t\ts = date.getSeconds() < 10 ? '0' + date.getSeconds() : date.getSeconds().toString();\r\n\treturn (y + m + d + h + i + s);\r\n}\r\n\r\nfunction getCurDate() {\r\n\tvar date = new Date(),\r\n\t\ty = date.getFullYear().toString().substr(2),\r\n\t\tm = (date.getMonth() + 1) < 10 ? '0' + (date.getMonth() + 1) : (date.getMonth() + 1).toString(),\r\n\t\td = date.getDate() < 10 ? '0' + date.getDate() : date.getDate().toString();\r\n\treturn (y+m+d);\r\n}\r\n\r\n// 获取url后面的参数\r\nfunction getParams(name) {\r\n\tvar reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\");\r\n   \tvar r = window.location.search.substr(1).match(reg);\r\n   \tif (r != null) return unescape(r[2]); return null;\r\n}\r\n\r\n/**\r\n * 随机生成一个n位的随机数\r\n * @param [Int] [n] 一个正整数\r\n * @return {String} [str] 生成的随机数\r\n * @author wxy\r\n * @private\r\n */\r\n\r\nfunction getRandStr(n) {\r\n\tvar str = '';\r\n\tfor (var i = 0; i < n; i++) {\r\n\t\tstr += Math.floor(Math.random() * 10).toString();\r\n\t}\r\n\treturn str;\r\n}\r\n\r\n// 跳转页面\r\nfunction gotoLocation(url, str) {\r\n\twindow.location.href = url + str;\r\n}\r\n\r\n/**\r\n * 自动组合api接口所需的信息\r\n * @param {String} [apiName] api接口的方法名\r\n * @param {Object} [data] 传给api的data对象\r\n * @return {Object} [info] 组合以后的info对象\r\n * @author wxy\r\n * @private\r\n */\r\n\r\nfunction mergeInfo(apiName, data) {\r\n\tvar appId = wechat,\r\n\t\trandStr = getRandStr(5),\r\n\t\tdate = getCurTime(),\r\n\t\t// timestamp = new Date().getTime(),\r\n\t\tsignature = hex_sha1(hex_sha1(date + randStr) + appId),\r\n\t\tinfo = {\r\n\t\t\t\"header\": {\r\n\t\t\t\t\"timestamp\": date,\r\n\t\t\t\t\"nonce\": randStr,\r\n\t\t\t\t\"signature\": signature\r\n\t\t\t},\r\n\t\t\t\"cmd\": {\r\n\t\t\t\t\"name\": apiName\r\n\t\t\t},\r\n\t\t\t\"data\": data\r\n\t\t};\r\n\treturn info;\r\n}\r\n\r\n\r\n// Home Page\r\nvar Index = (function($) {\r\n\tvar detail_url = $('input[type=\"hidden\"].detail-url').val();\r\n\tvar module = {\r\n\t\ttype:  {\r\n\t\t\t'1': '健身餐',\r\n\t\t\t'2': '健康餐',\r\n\t\t\t'3': '沙拉',\r\n\t\t\t'4': '饮品',\r\n\t\t\t'5': '零食'\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * YS HOME PAGE INIT \r\n\t\t * @author wxy\r\n\t\t * @public\r\n\t\t */\r\n\t\tinit: function() {\r\n\t\t\tvar member_id = $('input[name=\"member_id\"]').val();\r\n\t\t\tif(member_id) {\r\n\t\t\t\twindow.localStorage.setItem('member_id', member_id);\r\n\t\t\t}\r\n\t\t\twindow.localStorage.setItem('localStorage_url', $('.localStorage-url').val());\r\n\t\t\tfor(var i in module.type) {\r\n\t\t\t\tmodule.getGoodsInfo(i);\r\n\t\t\t}\r\n\t\t\tmodule.pullRefresh();\r\n\t\t},\r\n\r\n\t\t// 下拉刷新列表\r\n\t\tpullRefresh: function(){\r\n\t\t\tvar pullRefresh = new auiPullToRefresh({\r\n\t            container: document.querySelector('.aui-refresh-content'),\r\n\t            triggerDistance: 100\r\n\t        },function(ret){\r\n\t            if(ret.status==\"success\"){\r\n\t                setTimeout(function(){\r\n\t                    for(var i in module.type) {\r\n\t\t            \t\tvar _c = $('.ys-home-index .ys-goods-list>.aui-content').eq(i-1).children('.aui-card-list')\r\n\t\t\t\t\t\t\t_c.children('.ys-list-content').children().remove();\r\n\t\t\t\t\t\t\t_c.find('.ys-list-content-padded>.aui-row').children().remove();\r\n\t\t\t\t\t\t\tmodule.getGoodsInfo(i);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tpullRefresh.cancelLoading(); //刷新成功后调用此方法隐藏\r\n\t                },1500)\r\n\t            }\r\n\t        })\r\n\t\t},\r\n\r\n\t\t// 为copy生成的dom赋值\r\n\t\tsetCopyInfo: function(d, c) {\r\n\t\t\td.find('.ys-copy-img').attr({'src':c.goods_img, 'data-id': c.spu_id});\r\n\t\t\td.find('.ys-copy-title').attr('data-id', c.spu_id).text(c.goods_name);\r\n\t\t\td.find('.ys-copy-price').text(parseInt(c.goods_price));\r\n\t\t\tc.count > 0 ? d.find('.ys-copy-count').text(c.count) : d.find('.ys-copy-count').text('0');\r\n\t\t\tif(c.recommend_price_area == '' || c.recommend_price_area == 0 || c.recommend_price_area == undefined) {\r\n\t\t\t\td.find('.ys-list-item-right').remove();\r\n\t\t\t} else {\r\n\t\t\t\tvar str = module.changePriceArea(c.recommend_price_area);\r\n\t\t\t\td.find('.ys-copy-price-area').text(str);\r\n\t\t\t}\r\n\t\t\treturn d;\r\n\t\t},\r\n\r\n\t\t// 截取团购价区间中的整数部分\r\n\t\tchangePriceArea: function(p) {\r\n\t\t\tvar arr = p.split('-');\r\n\t\t\tvar arr1 = [];\r\n\t\t\tfor(var i in arr) {\r\n\t\t\t\tarr1.push(parseInt(arr[i]));\r\n\t\t\t}\r\n\t\t\treturn arr1.join('-');\r\n\t\t},\r\n\r\n\t\t// 跳转点击事件\r\n\t\tjumpEvt: function(c) {\r\n\t\t\tc.find('.ys-copy-img, .ys-copy-title').click(function(){\r\n\t\t\t\tvar spu_id = $(this).attr('data-id');\r\n\t\t\t\tgotoLocation(detail_url, '&id='+spu_id);\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Home page get goods list\r\n\t\t * @author wxy\r\n\t\t * @public\r\n\t\t */\r\n\t\tgetGoodsInfo: function(id) {\r\n\t\t\tvar data = {'class_type': id},\r\n\t\t\t\tinfo = mergeInfo('goods_class_info', data);\r\n\t\t\tvar _c = $('.ys-home-index .ys-goods-list>.aui-content').eq(id-1).children('.aui-card-list');\r\n\t\t\t$.ajax({\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\turl: apiUrl,\r\n\t\t\t\tdata: JSON.stringify(info),\r\n\t\t\t\tdataType: 'json',\r\n\t\t\t\tcontentType: \"application/json; charset=utf-8\",\r\n\t\t\t \tbeforeSend: function() {\r\n\t\t\t\t\tvar load = createLoadDom(id);\r\n\t\t\t\t\t_c.children('.ys-list-content').append(load);\r\n\t\t\t \t},\r\n\t\t    \tsuccess: function(data) {\r\n\t\t    \t\t$('.loading-'+id).remove();\r\n\t\t    \t\tvar code = data.errcode;\r\n\t\t    \t\tif(code == 1) {\r\n\t\t    \t\t\tvar list = data.data.list;\r\n\t\t    \t\t\tif(list.length) {\r\n\t\t    \t\t\t\tfor(var i in list) {\r\n\t\t    \t\t\t\t\tvar _copy, _y;\r\n\t\t    \t\t\t\t\tif(list[i].recommend == 2) {\r\n\t\t    \t\t\t\t\t\t_copy = $('.copy-recommend').clone(true);\r\n\t\t    \t\t\t\t\t\t_y = _c.children('.ys-list-content');\r\n\r\n\t\t    \t\t\t\t\t}else if(list[i].recommend == 1) {\r\n\t\t    \t\t\t\t\t\t_copy = $('.copy-item').clone(true);\r\n\t\t    \t\t\t\t\t\t_y = _c.find('.ys-list-content-padded>.aui-row');\r\n\t\t    \t\t\t\t\t}\r\n\t\t    \t\t\t\t\tvar _d = module.setCopyInfo(_copy, list[i]);\r\n\t\t    \t\t\t\t\t_y.append(_d.html());\r\n\t\t    \t\t\t\t}\r\n\t\t    \t\t\t\tmodule.jumpEvt(_c);\r\n\t\t    \t\t\t} else {\r\n\t\t    \t\t\t\tvar _empty = $('<img src=\"'+localStorage.localStorage_url+'img_empty.png\" />').addClass('empty-img');\r\n\t\t    \t\t\t\tvar _text = $('<div />').addClass('empty-text').text('暂无商品');\r\n\t\t    \t\t\t\t_c.children('.ys-list-content').append(_empty, _text);\r\n\t\t    \t\t\t}\r\n\t\t    \t\t} else {\r\n\t\t    \t\t\talert(data.errmsg);\r\n\t\t    \t\t}\r\n\t\t    \t},\r\n\t\t    \tcomplete: function() {\r\n\t\t    \t\t// console.log('complete');\r\n\t\t    \t},\r\n\t\t    \terror: function (data) {\r\n\t\t    \t\t$('.loading-'+id).remove();\r\n\t\t    \t\t// console.log('error:' + data);\r\n\t\t    \t\talert('获取商品列表失败，请刷新重试');\r\n\t\t    \t}\r\n\t\t    })\r\n\t\t}\r\n\t};\r\n\r\n\treturn {\r\n\t\tinit: module.init\r\n\t};\r\n\r\n}(jQuery));\r\n\r\n// detail page\r\nvar GoodsDetail = (function($){\r\n\tvar dialog = new auiDialog();\r\n\tvar sku = [];\r\n\tvar order_type; //拼团标识\r\n\tvar addToCartUrl = $('input[name=\"addToCartUrl\"]').val(); //跳转到购车列表地址\r\n\tvar reserveUrl = $('input[name=\"reserveUrl\"]').val(); //跳转到预订页面地址\r\n\tvar module ={\r\n\t\tinit: function() {\r\n\t\t\tmodule.getGoodsDetail();\r\n\t\t\tmodule.goToCar();\r\n\t\t\tmodule.addToCart();\r\n\t\t\tmodule.openSpellDialog();\r\n\t\t\tmodule.reserveEvt();\r\n\t\t},\r\n\r\n\t\t// 跳转至购物车事件\r\n\t\tgoToCar: function() {\r\n\t\t\t$('.goto-car').click(function(){\r\n\t\t\t\tgotoLocation(addToCartUrl, '');\t\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\t// 添加到购物车\r\n\t\taddToCart: function() {\r\n\t\t\t$('.addToCart').bind('click', function(){\r\n\t\t\t\tvar spu_id = getParams('id');\r\n\t\t\t\tvar sku_id = module.getSkuId('|');\r\n\t\t\t\tif(!sku_id) {\r\n\t\t\t\t\talert('你还未给商品选择规格哟');\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tvar data = {'spu_id': spu_id, 'member_id': localStorage.member_id, 'sku_spec': sku_id},\r\n\t\t\t\t\tinfo = mergeInfo('add_cart', data);\r\n\t\t\t\t$.ajax({\r\n\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\turl: apiUrl,\r\n\t\t\t\t\tdata: JSON.stringify(info),\r\n\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\tcontentType: \"application/json; charset=utf-8\",\r\n\t\t\t\t\tbeforeSend: function() {\r\n\t\t\t\t\t\tvar mark = createDialog();\r\n\t\t\t\t\t\t$('.ys-product-detail').append(mark);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: function(data) {\r\n\t\t\t\t\t\t$('.zhezhao').remove();\r\n\t\t\t\t\t\tif(data.errcode == 1) {\r\n\t\t\t\t\t\t\tgotoLocation(addToCartUrl, '');\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\talert(data.errmsg);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\terror: function(data) {\r\n\t\t\t\t\t\t$('.zhezhao').remove();\r\n\t\t\t\t\t\talert('网络错误，请刷新重试');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 获取sku组成，以|分隔\r\n\t\tgetSkuId: function(s) {\r\n\t\t\tvar skuId = '';\r\n\t\t\tif($('.portion-type>div').hasClass('ys-type-selected') && $('.cycle-type>div').hasClass('ys-type-selected')) {\r\n\t\t\t\tskuId += $('.portion-type .ys-type-selected .ys-type-select').text();\r\n\t\t\t\tskuId += s;\r\n\t\t\t\tskuId += $('.cycle-type .ys-type-selected .ys-type-select').text();\r\n\t\t\t}\r\n\t\t\treturn skuId;\r\n\t\t},\r\n\r\n\t\t// 分量周期选择事件\r\n\t\tspecSelectEvt: function(d) {\r\n\t\t\td.click(function(){\r\n\t\t\t\tif($(this).parent().hasClass('ys-type-selected')) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}else{\r\n\t\t\t\t\td.parent().removeClass('ys-type-selected');\r\n\t\t\t\t\t$(this).parent().addClass('ys-type-selected');\r\n\t\t\t\t\tvar skuId = module.getSkuId('|');\r\n\t\t\t\t\tif(skuId) {\r\n\t\t\t\t\t\t$('.ys-goods-price').text(sku[skuId].goods_price);\r\n\t\t\t\t\t\t$('.ys-goods-price').next('em').remove();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 关闭dialog\r\n\t\tcloseSpellDialog: function() {\r\n\t\t\t$('.dialog-exit').click(function(){\r\n\t\t\t\t$('.aui-mask').removeClass('aui-mask-in');\r\n\t\t\t\t$('.aui-dialog').remove();\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 拼团电话检查\r\n\t\tcheckPtInfo: function() {\r\n\t\t\tvar num = $('.aui-dialog-body .dialog-tab>.aui-active').attr('data-num');\r\n\t\t\tvar _index;\r\n\t\t\tif(num == 2) {\r\n\t\t\t\t_index = 0;\r\n\t\t\t\torder_type = 2;\r\n\t\t\t}else if (num == 4) {\r\n\t\t\t\t_index = 1;\r\n\t\t\t\torder_type = 3;\r\n\t\t\t}\r\n\t\t\tvar member_mob = {};\r\n\t\t\t$('.aui-dialog-body .aui-tab-content>.aui-list').eq(_index).find('li.aui-list-item').each(function(){\r\n\t\t\t\tif($(this).find('input').val() == '' || !checkMobileNo($(this).find('input').val())) {\r\n\t\t\t\t\talert('输入的好友手机号不正确');\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmember_mob[$(this).index()] = $(this).find('input').val();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tmodule.getSkuIds(member_mob);\r\n\t\t},\r\n\r\n\t\t// 一起拼dialog事件\r\n\t\topenSpellDialog: function() {\r\n\t\t\t$('.spellDialogBtn').click(function(){\r\n\t\t\t\tvar s = module.getSkuId('，');\r\n\t\t\t\tif(s) {\r\n\t\t\t\t\tvar skuId = module.getSkuId('|');\r\n\t\t\t\t\tvar num = $('#dialog-inner-content .dialog-tab>.aui-active').attr('data-num');\r\n\t\t\t\t\tif(num == 2) {\r\n\t\t\t\t\t\t// 2人组团价\r\n\t\t\t\t\t\t$('.dialog-min-price').text(sku[skuId].sku_2_price);\r\n\t\t\t\t\t}else if(num == 4) {\r\n\t\t\t\t\t\t// 4人组团价\r\n\t\t\t\t\t\t$('.dialog-min-price').text(sku[skuId].sku_4_price);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$('.dialog-sku-spec').text(s);\r\n\t\t\t\t\tdialog.alert({\r\n\t                \ttitle:\"\",\r\n\t                \tmsg:document.getElementById('dialog-inner-content').innerHTML,\r\n\t                \tbuttons:['预订']\r\n\t            \t},function(ret){\r\n\t                \tif(ret.buttonIndex == 1){\r\n\t                    \tmodule.checkPtInfo();\r\n\t                \t}\r\n\t            \t});\r\n\t            \tmodule.closeSpellDialog();\r\n\t            \tmodule.tabSelectEvt(skuId);\r\n\t\t\t\t}else{\r\n\t\t\t\t\talert('您还未选择商品规格哟');\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\t// 获取商品的详细信息\r\n\t\tgetGoodsDetail: function() {\r\n\t\t\tvar spu_id = getParams('id');\r\n\t\t\tvar data = {'spu_id': spu_id},\r\n\t\t\t\tinfo = mergeInfo('get_goods_info', data);\r\n\t\t\t$.ajax({\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\turl: apiUrl,\r\n\t\t\t\tdata: JSON.stringify(info),\r\n\t\t\t\tdataType: 'json',\r\n\t\t\t\tcontentType: \"application/json; charset=utf-8\",\r\n\t\t\t\tbeforeSend: function() {\r\n\t\t\t\t\tvar mark = createDialog();\r\n\t\t\t\t\t$('.ys-product-detail').append(mark);\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function(data) {\r\n\t\t\t\t\t$('.zhezhao').remove();\r\n\t\t\t\t\tif(data.errcode == 1) {\r\n\t\t\t\t\t\tvar d = data.data;\r\n\t\t\t\t\t\t$('.ys-goods-name').text(d.goods_name);\r\n\t\t\t\t\t\t$('.ys-goods-price').text(d.goods_price);\r\n\t\t\t\t\t\t$('.notice-desc').text(d.delivery_explain);\r\n\t\t\t\t\t\td.count == '' ? $('.ys-goods-count').text(0):$('.ys-goods-count').text(d.count);\r\n\t\t\t\t\t\t$('.ys-goods-price-area').text(d.recommend_price_area);\r\n\t\t\t\t\t\tsku = d.sku;\r\n\t\t\t\t\t\tvar _slider = d.goods_slide;\r\n\t\t\t\t\t\tvar sliderHtml = '';\r\n\t\t\t\t\t\tfor(var i in _slider) {\r\n\t\t\t\t\t\t\tsliderHtml += '<div class=\"aui-slide-node bg-dark\"><img src=\"'+_slider[i]+'\" /></div>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t$('#aui-slide>.aui-slide-wrap').append(sliderHtml);\r\n\t\t\t\t\t\tvar slide = new auiSlide({\r\n\t\t\t\t\t        container:document.getElementById(\"aui-slide\"),\r\n\t\t\t\t\t        // \"width\":300,\r\n\t\t\t\t\t        \"height\":260,\r\n\t\t\t\t\t        \"speed\":300,\r\n\t\t\t\t\t        \"autoPlay\": 2000,\r\n\t\t\t\t\t        \"pageShow\":true,\r\n\t\t\t\t\t        \"pageStyle\":'dot',\r\n\t\t\t\t\t        \"loop\":true,\r\n\t\t\t\t\t        'dotPosition':'center',\r\n\t\t\t\t\t        currentPage: function() {}\r\n\t    \t\t\t\t});\r\n\t    \t\t\t\tvar _imgs = d.goods_img;\r\n\t    \t\t\t\tvar imgHtml = '';\r\n\t    \t\t\t\tfor(var j in _imgs) {\r\n\t    \t\t\t\t\timgHtml += '<div class=\"aui-card-list-content\"><img src=\"'+_imgs[j]+'\" /></div>';\r\n\t    \t\t\t\t}\r\n\t    \t\t\t\t$('.ys-goods-imgs').append(imgHtml);\r\n\t    \t\t\t\tvar portionList = d.spec.portion,\r\n\t    \t\t\t\t\tcycleList = d.spec.cycle,\r\n\t    \t\t\t\t\tportionHtml = '',\r\n\t    \t\t\t\t\tcycleHtml = '';\r\n\t    \t\t\t\tfor(var x in portionList) {\r\n\t    \t\t\t\t\tportionHtml += '<div class=\"ys-col-xs-7\"><span class=\"ys-type-select\">'+portionList[x]+'</span></div>';\r\n\t    \t\t\t\t}\r\n\t    \t\t\t\t$('.portion-type').append(portionHtml);\r\n\t    \t\t\t\tfor(var y in cycleList) {\r\n\t    \t\t\t\t\tcycleHtml += '<div class=\"ys-col-xs-7\"><span class=\"ys-type-select\">'+cycleList[y]+'</span></div>';\r\n\t    \t\t\t\t}\r\n\t    \t\t\t\t$('.cycle-type').append(cycleHtml);\r\n\t   \t\t\t\t\t$('.dialog-goods-img').attr('src', _slider[0]);\r\n\t    \t\t\t\tmodule.specSelectEvt($('.portion-type .ys-type-select'));\r\n\t    \t\t\t\tmodule.specSelectEvt($('.cycle-type .ys-type-select'));\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t alert(data.errmsg);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terror: function(data) {\r\n\t\t\t\t\talert('获取商品信息失败，请刷新重试');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 根据规格值获取skuid\r\n\t\tgetSkuIds: function(member_mob) {\r\n\t\t\tvar sku_id = module.getSkuId('|');\r\n\t\t\tif(!sku_id) {\r\n\t\t\t\talert('您还未选择商品规格哟');\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tvar data = {'spec': sku_id, 'spu_id': getParams('id')},\r\n\t\t\t\tinfo = mergeInfo('get_goods_sku_by_spec', data);\r\n\t\t\t$.ajax({\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\turl: apiUrl,\r\n\t\t\t\tdata: JSON.stringify(info),\r\n\t\t\t\tdataType: 'json',\r\n\t\t\t\tcontentType: \"application/json; charset=utf-8\",\r\n\t\t\t\tbeforeSend: function() {\r\n\t\t\t\t\t\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function(data) {\r\n\t\t\t\t\tif(data.errcode == 1) {\r\n\t\t\t\t\t\tvar d = {};\r\n\t\t\t\t\t\tvar apiName;\r\n\t\t\t\t\t\tvar payState;\r\n\t\t\t\t\t\td.member_id = localStorage.member_id;\r\n\t\t\t\t\t\tif(member_mob == '') {\r\n\t\t\t\t\t\t\tvar sku_ids = {};\r\n\t\t\t\t\t\t\tsku_ids[0] = data.data.sku_id;\r\n\t\t\t\t\t\t\td.sku_ids = sku_ids;\r\n\t\t\t\t\t\t\tapiName = 'create_goods_order';\r\n\t\t\t\t\t\t\tpayState = 2;\r\n\t\t\t\t\t\t}else{\t\r\n\t\t\t\t\t\t\td.sku_id = data.data.sku_id;\r\n\t\t\t\t\t\t\td.member_mobiles = member_mob;\r\n\t\t\t\t\t\t\td.order_type = order_type;\r\n\t\t\t\t\t\t\tapiName = 'create_pin_goods_order';\r\n\t\t\t\t\t\t\tpayState = 1;\r\n\t\t\t\t\t\t}\t\r\n\t\t\t\t\t\tmodule.createGoodsOrder(apiName, d, payState);\r\n\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\talert(data.errmsg);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terror: function(data) {\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\t// 创建订单\r\n\t\tcreateGoodsOrder: function(apiName, d, payState) {\r\n\t\t\tvar info = mergeInfo(apiName, d);\r\n\t\t\t$.ajax({\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\turl: apiUrl,\r\n\t\t\t\tdata: JSON.stringify(info),\r\n\t\t\t\tdataType: 'json',\r\n\t\t\t\tcontentType: \"application/json; charset=utf-8\",\r\n\t\t\t\tbeforeSend: function() {\r\n\t\t\t\t\tvar mark = createDialog();\r\n\t\t\t\t\t$('.ys-product-detail').append(mark);\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function(data) {\r\n\t\t\t\t\t$('.zhezhao').remove();\r\n\t\t\t\t\tif(data.errcode == 1) {\r\n\t\t\t\t\t\twindow.localStorage.setItem('orderData', JSON.stringify(data.data));\r\n\t\t\t\t\t\tgotoLocation(reserveUrl, '&payState='+payState);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\talert(data.errmsg);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terror: function(data) {\r\n\t\t\t\t\t$('.zhezhao').remove();\r\n\t\t\t\t\talert('网络错误，请刷新重试');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\r\n\t\t// 我要预订事件\r\n\t\treserveEvt: function() {\r\n\t\t\t$('.reserve-btn').bind('click', function(){\r\n\t\t\t\tvar that = $(this);\r\n\t\t\t\tmodule.getSkuIds('');\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\t// aui-tab 选择事件\r\n\t\ttabSelectEvt: function(skuId) {\r\n\t\t\t$('.dialog-tab>.aui-tab-item').click(function(){\r\n\t\t\t\tif($(this).hasClass('aui-active')) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tvar _index = $(this).index();\r\n\t\t\t\t\tvar num = $(this).attr('data-num');\r\n\t\t\t\t\tif(num == 2) {\r\n\t\t\t\t\t\t// 2人组团价\r\n\t\t\t\t\t\t$('.dialog-min-price').text(sku[skuId].sku_2_price);\r\n\t\t\t\t\t}else if(num == 4) {\r\n\t\t\t\t\t\t// 4人组团价\r\n\t\t\t\t\t\t$('.dialog-min-price').text(sku[skuId].sku_4_price);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$('.dialog-tab>.aui-tab-item').removeClass('aui-active');\r\n\t\t\t\t\t$('#dialog-inner-content .dialog-tab>.aui-tab-item').eq(_index).addClass('aui-active');\r\n\t\t\t\t\t$('.aui-dialog-body .dialog-tab>.aui-tab-item').eq(_index).addClass('aui-active');\r\n\t\t\t\t\t$('.aui-tab-content>.aui-list').addClass('aui-hide');\r\n\t\t\t\t\t$('#dialog-inner-content .aui-tab-content>.aui-list').eq(_index).removeClass('aui-hide');\r\n\t\t\t\t\t$('.aui-dialog-body .aui-tab-content>.aui-list').eq(_index).removeClass('aui-hide');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\treturn {\r\n\t\tinit: module.init\r\n\t};\r\n}(jQuery));\r\n\r\n// Reserve page\r\nvar Reserve = (function($){\r\n\tvar address_info = {};\r\n\tvar sku_ids = [];\r\n\tvar payParams = {};\r\n\tvar pin_state = {\r\n\t\t'2': '已付款',\r\n\t\t'6': '未付款'\r\n\t};\r\n\tvar module = {\r\n\t\tinit: function() {\r\n\t\t\tmodule.createGoodsOrder();\r\n\t\t\tmodule.changeAddress();\r\n\t\t\tmodule.setAddressInfo();\r\n\t\t\tmodule.wxPay();\r\n\t\t},\r\n\r\n\t\t// 给地址内容赋值\r\n\t\tsetAddressInfo: function(info) {\r\n\t\t\tif(getParams('address_id') == undefined) {\r\n\t\t\t\tmodule.getDefaultAddress();\r\n\t\t\t}else{\r\n\t\t\t\tmodule.getAddressInfo();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t//获取指定id下的地址信息\r\n\t\tgetAddressInfo: function() {\r\n\t\t\tvar data = {'member_id': localStorage.member_id, 'address_id': getParams('address_id')},\r\n\t\t\t\tinfo = mergeInfo('get_address', data);\r\n\t\t\t$.ajax({\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\turl: apiUrl,\r\n\t\t\t\tdata: JSON.stringify(info),\r\n\t\t\t\tdataType: 'json',\r\n\t\t\t\tcontentType: \"application/json; charset=utf-8\",\r\n\t\t\t\tsuccess: function(data){\r\n\t\t\t\t\tif(data.errcode == 1) {\r\n\t\t\t\t\t\tvar d = data.data;\r\n\t\t\t\t\t\taddress_info = d;\r\n\t\t\t\t\t\taddress_info.address = d.content;\r\n\t\t\t\t\t\t$('.address-info .order-address').text(d.content);\r\n\t\t\t\t\t\t$('.address-info .order-username').text(d.r_name);\r\n\t\t\t\t\t\t$('.address-info .order-tel').text(d.r_mobile);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t// alert(data.errmsg);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terror: function(data) {alert('网络错误，请刷新重试');}\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\t// 获取送餐时间段\r\n\t\tgetTimeArea: function(state) {\r\n\t\t\tvar data = {},\r\n\t\t\t\tinfo = mergeInfo('get_time_area', data);\r\n\t\t\t$.ajax({\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\turl: apiUrl,\r\n\t\t\t\tdata: JSON.stringify(info),\r\n\t\t\t\tdataType: 'json',\r\n\t\t\t\tcontentType: \"application/json; charset=utf-8\",\r\n\t\t\t\tsuccess: function(data){\r\n\t\t\t\t\tif(data.errcode == 1) {\r\n\t\t\t\t\t\tvar d = data.data.time_area;\r\n\t\t\t\t\t\tvar noonDate = d.noon,\r\n\t\t\t\t\t\t\tnightDate = d.night;\r\n\t\t\t\t\t\tif(state == 1 || state == 2) {\r\n\t\t\t\t\t\t\tfor(var i in noonDate) {\r\n\t\t\t\t\t\t\t\tvar _opt = $('<option />').val(i).text(noonDate[i]);\r\n\t\t\t\t\t\t\t\t$('select[name=\"select-day-area\"]').append(_opt).removeClass('aui-hide');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(state == 1 || state == 3) {\r\n\t\t\t\t\t\t\tfor(var i in nightDate) {\r\n\t\t\t\t\t\t\t\tvar _opt = $('<option />').val(i).text(nightDate[i]);\r\n\t\t\t\t\t\t\t\t$('select[name=\"select-night-area\"]').append(_opt).removeClass('aui-hide');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t// alert(data.errmsg);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terror: function(data) {alert('网络错误，请刷新重试');}\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\t// 改变checkbox触发事件\r\n\t\tchangeRadioEvt: function(d) {\r\n\t\t\td.click(function(){\r\n\t\t\t\tvar _v = $(this).val();\r\n\t\t\t\tif($(this).attr('checked') != undefined) {\r\n\t\t\t\t\t_v == 1 ? $('.delivery-day-area').removeClass('aui-hide') : $('.delivery-night-area').removeClass('aui-hide');\r\n\t\t\t\t}else{\r\n\t\t\t\t\t_v == 1 ? $('.delivery-day-area').addClass('aui-hide') : $('.delivery-night-area').addClass('aui-hide');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 加入或取消订单\r\n\t\taddToList: function() {\r\n\t\t\t$('.recommend_list .aui-list-item .yp-select-btn').click(function(){\r\n\t\t\t\tvar _that = $(this),\r\n\t\t\t\t\tstate = _that.attr('data-state'),\r\n\t\t\t\t\tspu_id = _that.attr('data-spu'),\r\n\t\t\t\t\tsku_id = _that.attr('data-sku'),\r\n\t\t\t\t\tprice = _that.attr('data-price'),\r\n\t\t\t\t\tamount = $('.pay-total').text();\r\n\t\t\t\tif(state == 1) {\r\n\t\t\t\t\tvar _c = $('.recommend_list li.aui-list-item[data-spu='+spu_id+']').clone(true);\r\n\t\t\t\t\t_c.find('.yp-detele-wrapper').remove();\r\n\t\t\t\t\t$('.ys-goods-info .aui-list').append(_c);\r\n\t\t\t\t\t_that.text('取消').attr('data-state', 2);\r\n\t\t\t\t\tsku_ids.push(sku_id);\r\n\t\t\t\t\tamount = accAdd(amount, price);\r\n\t\t\t\t}else if(state == 2){\r\n\t\t\t\t\t$('.ys-goods-info li.aui-list-item[data-spu='+spu_id+']').remove();\r\n\t\t\t\t\tsku_ids.splice($.inArray(sku_id,sku_ids),1);\r\n\t\t\t\t\t_that.text('加入订单').attr('data-state', 1);\r\n\t\t\t\t\tamount = accSub(amount, price);;\r\n\t\t\t\t}\r\n\t\t\t\t$('.pay-total').text(amount);\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 跳转地址管理页面\r\n\t\tchangeAddress: function() {\r\n\t\t\t$('.address-info').click(function(){\r\n\t\t\t\tlocalStorage.setItem('urlState', 'reserve');\r\n\t\t\t\tgotoLocation($(this).attr('data-url'), '');\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 创建商品订单\r\n\t\tcreateGoodsOrder: function() {\r\n\t\t\tvar d = JSON.parse(localStorage.orderData),\r\n\t\t\t\ttotalPay = 0;\r\n\t\t\t\tdelivery_time = d.delivery_time,\r\n\t\t\t\tinfo = d.goods_info,\r\n\t\t\t\torder_sn = d.order_sn,\r\n\t\t\t\trecommend_goods = d.recommend_goods,\r\n\t\t\t\tpin_info = d.pin_info,\r\n\t\t\t\tvoucher_info = d.voucher_info;\r\n\t\t\t$('.order_sn').text(order_sn);\r\n\t\t\tfor(var i in info) {\r\n\t\t\t\tvar _copy = $('.copy-item').clone(true);\r\n\t\t\t\t_copy.find('.goods_img').attr('src', info[i].goods_img);\r\n\t\t\t\t_copy.find('.goods_name').text(info[i].goods_name);\r\n\t\t\t\t_copy.find('.goods_price').text(info[i].goods_price);\r\n\t\t\t\t_copy.find('.goods_spec').text(info[i].goods_spec.split('|').join(','));\r\n\t\t\t\t_copy.find('.delivery_num').text('送餐次数：'+info[i].delivery_num+'次');\r\n\t\t\t\tsku_ids.push(info[i].sku_id);\r\n\t\t\t\t$('.ys-goods-info>.aui-list').append(_copy.html());\r\n\t\t\t\ttotalPay = accAdd(totalPay, info[i].goods_price);\r\n\t\t\t}\r\n\t\t\tif(recommend_goods == undefined || recommend_goods.length == 0 || getParams('order_type')) {\r\n\t\t\t\t$('.recommend_list').remove();\r\n\t\t\t} else {\r\n\t\t\t\tfor(var j in recommend_goods) {\r\n\t\t\t\t\tvar _c = $('.copy-item').clone(true);\r\n\t\t\t\t\t_c.children('.aui-list-item').attr({\r\n\t\t\t\t\t\t'data-spu': recommend_goods[j].spu_id,\r\n\t\t\t\t\t\t'data-sku': recommend_goods[j].sku_id\r\n\t\t\t\t\t});\r\n\t\t\t\t\t_c.find('.goods_img').attr('src', recommend_goods[j].goods_img);\r\n\t\t\t\t\t_c.find('.goods_name').text(recommend_goods[j].goods_name);\r\n\t\t\t\t\t_c.find('.goods_price').text(recommend_goods[j].goods_price);\r\n\t\t\t\t\t_c.find('.goods_spec').text(recommend_goods[j].goods_spec.split('|').join(','));\r\n\t\t\t\t\t_c.find('.delivery_num').text('送餐次数：'+recommend_goods[j].delivery_num+'次');\r\n\t\t\t\t\tvar optItem = $('<div class=\"yp-detele-wrapper\"/>'),\r\n\t\t\t\t\t\toptBtn = $('<div class=\"yp-select-btn\" />').text('加入订单').attr({\r\n\t\t\t\t\t\t\t'data-spu': recommend_goods[j].spu_id,\r\n\t\t\t\t\t\t\t'data-sku': recommend_goods[j].sku_id,\r\n\t\t\t\t\t\t\t'data-state': 1, //1为加入，2为取消\r\n\t\t\t\t\t\t\t'data-price': recommend_goods[j].goods_price\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\toptItem.append(optBtn);\r\n\t\t\t\t\t_c.find('.aui-list-item-inner').after(optItem);\r\n\t\t\t\t\t$('.recommend_list .aui-list').append(_c.html());\r\n\t\t\t\t}\r\n\t\t\t\tmodule.addToList();\r\n\t\t\t}\r\n\t\t\tif(pin_info == undefined || pin_info.length == 0) {\r\n\t\t\t\t$('.pt-content').remove();\r\n\t\t\t}else{\r\n\t\t\t\tvar pin_amount = 0;\r\n\t\t\t\tfor(var p in pin_info) {\r\n\t\t\t\t\tvar _d = $('.copy-pt-item').clone(true);\r\n\t\t\t\t\t_d.find('.pt-name').text(pin_info[p].nick_name);\r\n\t\t\t\t\t_d.find('.pt-mob').text(pin_info[p].mobile);\r\n\t\t\t\t\t_d.find('.pt-price').text(pin_info[p].pin_price);\r\n\t\t\t\t\t_d.find('.pt-state').text(pin_state[pin_info[p].pin_state]);\r\n\t\t\t\t\tpin_amount = accAdd(pin_amount, pin_info[p].pin_price);\r\n\t\t\t\t\t$('.pt-list').append(_d.html());\r\n\t\t\t\t}\r\n\t\t\t\t$('.yh-money').text(pin_amount);\r\n\t\t\t\ttotalPay = accSub(totalPay, pin_amount);\r\n\t\t\t}\r\n\t\t\tif(voucher_info == undefined || voucher_info.length == 0) {\r\n\t\t\t\t$('.coupon-area').remove();\r\n\t\t\t}else {\r\n\t\t\t\t$('.coupon-list').text(voucher_info.length+'个可用');\r\n\t\t\t\tvar _s = [];\r\n\t\t\t\tvar _b = {};\r\n\t\t\t\t_b['d_id'] = -1;\r\n\t\t\t\t_b['d_name'] = '不使用优惠券';\r\n\t\t\t\t_b['d_price'] = 0;\r\n\t\t\t\t_s.push(_b);\r\n\t\t\t\tfor(var q in voucher_info) {\r\n\t\t\t\t\tvar _a = {};\r\n\t\t\t\t\t_a['d_id'] = voucher_info[q].v_b_id;\r\n\t\t\t\t\t_a['d_name'] = voucher_info[q].voucher_name;\r\n\t\t\t\t\t_a['d_price'] = voucher_info[q].voucher_price;\r\n\t\t\t\t\t_s.push(_a);\r\n\t\t\t\t}\r\n\t\t\t\tvar select = new MobileSelect({\r\n\t\t\t\t\ttrigger: '.coupon-list', \r\n\t\t\t\t\ttitle: '',  \r\n\t\t\t\t\twheels: [{data: _s}]\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tvar delivery_state = 1;\r\n\t\t\tif(delivery_time.length == 1) {\r\n\t\t\t\tvar delivery_count = delivery_time[0];\r\n\t\t\t\tif(delivery_count == 1) { //配送午餐\r\n\t\t\t\t\tdelivery_state = 2;\r\n\t\t\t\t\t$('li.delivery-night-item').remove();\r\n\t\t\t\t}else if(delivery_count == 2) { //配送晚餐\r\n\t\t\t\t\tdelivery_state = 3;\r\n\t\t\t\t\t$('li.delivery-day-item').remove();\r\n\t\t\t\t}\r\n\t\t\t} \r\n\t\t\tmodule.changeRadioEvt($('input[name=\"delivery-time\"]'));\r\n\t\t\tmodule.getTimeArea(delivery_state);\r\n\t\t\t$('.pay-total').text(totalPay);\r\n\t\t},\r\n\r\n\t\t// 判断对象是否为空\r\n\t\tisEmptyObject: function(e) {  \r\n\t\t    var t;  \r\n\t\t    for (t in e)  \r\n\t\t        return !1;  \r\n\t\t    return !0  \r\n\t\t},\r\n\r\n\t\t// 获取默认地址\r\n\t\tgetDefaultAddress: function() {\r\n\t\t\tvar data = {'member_id': localStorage.member_id},\r\n\t\t\t\tinfo = mergeInfo('get_default_address', data);\r\n\t\t\t$.ajax({\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\turl: apiUrl,\r\n\t\t\t\tdata: JSON.stringify(info),\r\n\t\t\t\tdataType: 'json',\r\n\t\t\t\tcontentType: \"application/json; charset=utf-8\",\r\n\t\t\t\tbeforeSend: function() {},\r\n\t\t\t\tsuccess: function(data) {\r\n\t\t\t\t\tif(data.errcode == 1) {\r\n\t\t\t\t\t\tvar d = data.data;\r\n\t\t\t\t\t\tvar state = module.isEmptyObject(d);\r\n\t\t\t\t\t\tif(!state) {\r\n\t\t\t\t\t\t\taddress_info = d;\r\n\t\t\t\t\t\t\t$('.address-info .order-address').text(d.address);\r\n\t\t\t\t\t\t\t$('.address-info .order-username').text(d.r_name);\r\n\t\t\t\t\t\t\t$('.address-info .order-tel').text(d.r_mobile);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t$('.address-info').html('暂无默认收货地址').css('font-size', '15px');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\talert(data.errmsg);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terror: function(data) {\r\n\t\t\t\t\talert('网络错误，请刷新重试');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 微信支付\r\n\t\twxPay: function() {\r\n\t\t\t$('.wx-pay').click(function(){\r\n\t\t\t\tvar data = {};\r\n\t\t\t\tvar order_type = 1;\r\n\t\t\t\tvar urlApi = '';\r\n\t\t\t\tif(getParams('payState') == 1) {\r\n\t\t\t\t\tdata.order_info = {\r\n\t\t\t\t\t\t'order_sn': $('.order_sn').text()\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif(!module.isEmptyObject(address_info)) {\r\n\t\t\t\t\t\tdata.address_info = address_info;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\talert('亲，你还没设置默认收货地址呢，快先去设置一下吧');\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif($('#reserveDayDate').val()) {\r\n\t\t\t\t\t\tdata.order_info['delivery_date'] = $('#reserveDayDate').val();\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\talert('亲，你还没选择送餐日期呢');\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif($('input[name=\"delivery-time\"]:checked').val()){\r\n\t\t\t\t\t\tvar delivery_time = [];\r\n\t\t\t\t\t\t$('input[name=\"delivery-time\"]:checked').each(function(){\r\n\t\t\t\t\t\t\tdelivery_time.push($(this).val());\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tdata.order_info['delivery_time'] = delivery_time;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\talert('亲，你还未选择送餐时间段呢');\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif($('.f-textarea>textarea').val()) {\r\n\t\t\t\t\t\tdata.order_info['order_content'] = $('.f-textarea>textarea').val();\r\n\t\t\t\t\t}\r\n\t\t\t\t\turlApi = 'create_pin_payment';\r\n\t\t\t\t\t// order_type = getParams('order_type');\r\n\t\t\t\t} else if(getParams('payState') == 2){\r\n\t\t\t\t\tdata.member_id = localStorage.member_id;\r\n\t\t\t\t\tif($('.pay-total').text() > 0 ) {\r\n\t\t\t\t\t\tdata.order_info = {\r\n\t\t\t\t\t\t\t'order_sn': $('.order_sn').text(),\r\n\t\t\t\t\t\t\t'order_type': order_type, //1、单人，2、双人预订，3、4人预订\r\n\t\t\t\t\t\t\t'amount': $('.pay-total').text()\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\talert('亲，付款金额必须大于等于0呢');\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(!module.isEmptyObject(address_info)) {\r\n\t\t\t\t\t\tdata.address_info = address_info;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\talert('亲，你还没设置默认收货地址呢，快先去设置一下吧');\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif($('#reserveDayDate').val()) {\r\n\t\t\t\t\t\tdata.order_info['delivery_date'] = $('#reserveDayDate').val();\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\talert('亲，你还没选择送餐日期呢');\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdata.goods_info = {};\r\n\t\t\t\t\tif($('input[name=\"delivery-time\"]:checked').val()){\r\n\t\t\t\t\t\tvar delivery_time = [];\r\n\t\t\t\t\t\tvar time_area = {};\r\n\t\t\t\t\t\tvar time_area_state = true;\r\n\t\t\t\t\t\t$('input[name=\"delivery-time\"]:checked').each(function(){\r\n\t\t\t\t\t\t\tdelivery_time.push($(this).val());\r\n\t\t\t\t\t\t\tif($(this).val() == 1) {\r\n\t\t\t\t\t\t\t\tvar selectV = $('select[name=\"select-day-area\"]').find(\"option:selected\").val(),\r\n\t\t\t\t\t\t\t\t\tselectT = $('select[name=\"select-day-area\"]').find(\"option:selected\").text();\r\n\t\t\t\t\t\t\t\tif(selectV == -1) {\r\n\t\t\t\t\t\t\t\t\talert('亲，还没选择午餐送餐时间段呢');\r\n\t\t\t\t\t\t\t\t\ttime_area_state = false;\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\ttime_area['0'] = selectT;\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}else if($(this).val() == 2) {\r\n\t\t\t\t\t\t\t\tvar selectV1 = $('select[name=\"select-night-area\"]').find(\"option:selected\").val(),\r\n\t\t\t\t\t\t\t\t\tselectT1 = $('select[name=\"select-night-area\"]').find(\"option:selected\").text();\r\n\t\t\t\t\t\t\t\tif(selectV1 == -1) {\r\n\t\t\t\t\t\t\t\t\talert('亲，还没选择晚餐送餐时间段呢');\r\n\t\t\t\t\t\t\t\t\ttime_area_state = false;\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\ttime_area['1'] = selectT1;\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif(time_area_state) {\r\n\t\t\t\t\t\t\tdata.goods_info['time_area'] = time_area;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdata.goods_info['delivery_time'] = delivery_time;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\talert('亲，你还未选择送餐时间段呢');\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif($('.f-textarea>textarea').val()) {\r\n\t\t\t\t\t\tdata.order_info['order_content'] = $('.f-textarea>textarea').val();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif($('.coupon-list').val() != undefined && $('.coupon-list').attr('data-id') != undefined || $('.coupon-list').attr('data-id') != '-1') {\r\n\t\t\t\t\t\tdata.voucher_info = {\r\n\t\t\t\t\t\t\t'v_id': $('.coupon-list').attr('data-id'),\r\n\t\t\t\t\t\t\t'v_price': $('.coupon-list').attr('data-price')\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdata.goods_info.sku_ids = sku_ids;\r\n\t\t\t\t\turlApi = 'create_payment';\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar\tinfo = mergeInfo(urlApi, data);\r\n\t\t\t\t$.ajax({\r\n\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\turl: apiUrl,\r\n\t\t\t\t\tdata: JSON.stringify(info),\r\n\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\tcontentType: \"application/json; charset=utf-8\",\r\n\t\t\t\t\tbeforeSend: function() {\r\n\t\t\t\t\t\tvar mark = createDialog();\r\n\t\t\t\t\t\t$('.ys-reserve').append(mark);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: function(data) {\r\n\t\t\t\t\t\t$('.zhezhao').remove();\r\n\t\t\t\t\t\tif(data.errcode == 1) {\r\n\t\t\t\t\t\t\tgotoLocation($('input[name=\"wx-url\"]').val(), '&openid='+data.data.openid+'&order_amount='+data.data.order_amount+'&order_sn='+data.data.order_sn);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\talert(data.errmsg);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\terror: function(data) {\r\n\t\t\t\t\t\t$('.zhezhao').remove();\r\n\t\t\t\t\t\talert('网络错误，请刷新重试');\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\treturn {\r\n\t\tinit: module.init\r\n\t};\r\n}(jQuery));\r\n\r\n// Order List page\r\nvar Order = (function($){\r\n\tvar order_state = {\r\n\t\t'1': '待付款',\r\n\t\t'2': '已付款',\r\n\t\t'3': '配送中',\r\n\t\t'4': '已完成'\r\n\t};\r\n\tvar scrollState = false;\r\n\tvar page = 1; //当前页码\r\n\tvar pagesize = 10;//显示条数\r\n\tvar default_state = $('#tab>.aui-tab-item.aui-active').attr('data-index');\r\n\tvar module = {\r\n\t\tinit: function() {\r\n\t\t\tmodule.tabSelectEvt();\r\n\t\t\tmodule.getOrderList(default_state);\r\n\t\t\tmodule.pullRefresh();\r\n\t\t\tmodule.scrollEvt();\r\n\t\t},\r\n\r\n\t\t// 判断对象是否为空\r\n\t\tisEmptyObject: function(e) {  \r\n\t\t    var t;  \r\n\t\t    for (t in e)  \r\n\t\t        return !1;  \r\n\t\t    return !0  \r\n\t\t},\r\n\r\n\t\t// 进入订单详细页\r\n\t\tgotoGoodsDetail: function() {\r\n\t\t\t$('.order-list-content>.aui-content').click(function(){\r\n\t\t\t\tvar id = $(this).find('.order_sn').attr('data-id');\r\n\t\t\t\tgotoLocation($('input[name=\"detail_url\"]').val(), '&id='+id);\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 获取订单列表\r\n\t\tgetOrderList: function(state) {\r\n\t\t\tvar data = {'member_id': localStorage.member_id, 'state': state, 'page': page, 'page_size': pagesize},\r\n\t\t\t\tinfo = mergeInfo('get_order_list', data);\r\n\t\t\t$.ajax({\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\turl: apiUrl,\r\n\t\t\t\tdata: JSON.stringify(info),\r\n\t\t\t\tdataType: 'json',\r\n\t\t\t\tcontentType: \"application/json; charset=utf-8\",\r\n\t\t\t\tbeforeSend: function() {\r\n\t\t\t\t\tvar load = createLoadDom('order');\r\n\t\t\t\t\t$('.ys-order-list .order-list-content').append(load);\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function(data) {\r\n\t\t\t\t\t$('.loading-order').remove();\r\n\t\t\t\t\tif(data.errcode == 1) {\r\n\t\t\t\t\t\tvar order_info = data.data.order_info;\r\n\t\t\t\t\t\tif(order_info == undefined || module.isEmptyObject(order_info)) {\r\n\t\t    \t\t\t\tvar _text = $('<div />').addClass('empty-text').text('无更多数据').css({'margin-top': '15px','margin-bottom': '30px', 'font-size': '12px'});\r\n\t\t    \t\t\t\t$('.ys-order-list .order-list-content').append(_text);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tscrollState = true;\r\n\t\t\t\t\t\t\tfor(var i in order_info) {\r\n\t\t\t\t\t\t\t\tvar _c = $('.copy-content').clone(true);\r\n\t\t\t\t\t\t\t\tvar delivery_num = order_info[i].delivery_num;\r\n\t\t\t\t\t\t\t\tvar delivery_time = order_info[i].delivery_time;\r\n\t\t\t\t\t\t\t\tvar time_text = '';\r\n\t\t\t\t\t\t\t\tvar order_goods = order_info[i].order_goods;\r\n\t\t\t\t\t\t\t\tif(delivery_time.length == 2) {\r\n\t\t\t\t\t\t\t\t\ttime_text = '含中、晚餐';\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\tvar time_num = delivery_time[0];\r\n\t\t\t\t\t\t\t\t\ttime_num == 1 ? time_text='含中餐' : time_text='含晚餐';\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif(state == 3 || state == 4) {\r\n\t\t\t\t\t\t\t\t\tvar delivery_surplus = order_info[i].delivery_surplus_num;\r\n\t\t\t\t\t\t\t\t}\r\n \t\t\t\t\t\t\t\t_c.find('.order_sn').text(order_info[i].order_sn).attr('data-id', order_info[i].order_id);\r\n \t\t\t\t\t\t\t\tfor(var j in order_goods) {\r\n \t\t\t\t\t\t\t\t\t_p = $('.copy-item').clone(true);\r\n \t\t\t\t\t\t\t\t\t_p.find('.goods-img').attr('src', order_goods[j].goods_img);\r\n \t\t\t\t\t\t\t\t\t_p.find('.goods-name').text(order_goods[j].goods_name);\r\n \t\t\t\t\t\t\t\t\t_p.find('.goods-price').text(order_goods[j].goods_price);\r\n \t\t\t\t\t\t\t\t\t_p.find('.goods_spec').text(order_goods[j].goods_spec.split('|').join(','));\r\n \t\t\t\t\t\t\t\t\t_p.find('.order-num').text('总送餐次数：'+delivery_num+'次');\r\n \t\t\t\t\t\t\t\t\t_p.find('.order-time').text(time_text);\r\n \t\t\t\t\t\t\t\t\tif(state == 3 || state == 4) {\r\n \t\t\t\t\t\t\t\t\t\t_p.find('.delivery_surplus').text('剩余次数：'+delivery_surplus+'次');\r\n \t\t\t\t\t\t\t\t\t}else{\r\n \t\t\t\t\t\t\t\t\t\t_p.find('.delivery_surplus').remove();\r\n \t\t\t\t\t\t\t\t\t}\r\n \t\t\t\t\t\t\t\t\t_c.find('.aui-list').append(_p.html());\r\n \t\t\t\t\t\t\t\t}\r\n \t\t\t\t\t\t\t\t$('.ys-order-list .order-list-content').append(_c.html());\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tmodule.gotoGoodsDetail();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\talert(data.errmsg);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terror: function(data) {\r\n\t\t\t\t\t$('.loading-order').remove();\r\n\t\t\t\t\t//alert('网络错误，请刷新重试');\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\t// 下拉刷新列表\r\n\t\tpullRefresh: function(){\r\n\t\t\tvar pullRefresh = new auiPullToRefresh({\r\n\t            container: document.querySelector('.aui-refresh-content'),\r\n\t            triggerDistance: 100\r\n\t        },function(ret){\r\n\t            if(ret.status==\"success\"){\r\n\t                setTimeout(function(){\r\n\t                \tpage = 1; // 初始化数据\r\n\t\t       \t\t\t$('.ys-order-list .order-list-content').children().remove();\r\n\t\t       \t\t\tmodule.getOrderList($('#tab>.aui-active').attr('data-index'));\r\n\t\t\t\t\t\tpullRefresh.cancelLoading(); //刷新成功后调用此方法隐藏\r\n\t                },1500)\r\n\t            }\r\n\t        })\r\n\t\t},\r\n\r\n\t\t// tab选择事件\r\n\t\ttabSelectEvt: function() {\r\n\t\t\t$('#tab>.aui-tab-item').click(function(){\r\n\t\t\t\tif($(this).hasClass('aui-active')) {\r\n            \t\treturn;\r\n            \t}else{\r\n            \t\tvar _index = $(this).index();\r\n            \t\tgotoLocation(orderUrl[_index], '');\r\n            \t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 滚动下拉获取更多\r\n\t\tscrollEvt: function() {\r\n\t\t    var scroll = new auiScroll({\r\n\t\t        listen:true,\r\n\t\t        distance:0 //判断到达底部的距离，isToBottom为true\r\n\t\t    },function(ret){\r\n\t\t        if(ret.isToBottom && scrollState){\r\n\t\t            scrollState = false;\r\n\t\t            page++;\r\n\t\t           \tmodule.getOrderList($('#tab>.aui-active').attr('data-index'));\r\n\t\t        }\r\n\t\t    });\r\n\t\t}\r\n\t};\r\n\treturn {\r\n\t\tinit: module.init\r\n\t};\r\n}(jQuery));\r\n\r\n// Order Detail page\r\nvar OrderDetail = (function($){\r\n\tvar order_state = {\r\n\t\t'1': '待付款',\r\n\t\t'2': '已付款',\r\n\t\t'3': '配送中',\r\n\t\t'4': '已送达',\r\n\t\t'5': '交易完成',\r\n\t\t'6': '拼团未付款',\r\n\t\t'7': '拼团个人已付款',\r\n\t\t'8': '拼团付款完成'\r\n\t};\r\n\tvar address_list = {};\r\n\tvar delivery_time_list = [];\r\n\tvar order_sn_list = '';\r\n\tvar pin_state = {\r\n\t\t'2': '已付款',\r\n\t\t'6': '未付款'\r\n\t};\r\n\tvar module = {\r\n\t\tinit: function() {\r\n\t\t\tmodule.getOrderDetail();\r\n\t\t\tmodule.changeAddress();\r\n\t\t},\r\n\r\n\t\t// 跳转地址管理页面\r\n\t\tchangeAddress: function() {\r\n\t\t\t$('.order-edit-address').click(function(){\r\n\t\t\t\tlocalStorage.setItem('urlState', 'orderDetail');\r\n\t\t\t\tgotoLocation($(this).attr('data-url'), '&id='+getParams('id'));\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 给地址内容赋值\r\n\t\tsetAddressInfo: function(info) {\r\n\t\t\tif(getParams('address_id') == undefined) {\r\n\t\t\t\tvar address_info = info['address_info'],\r\n\t\t\t\t \tr_name = info['r_name'], \r\n\t\t\t\t \tr_mobile = info['r_mobile'];\r\n\t\t\t\tif(address_info == null &&  r_name == null && r_mobile == null) {\r\n\t\t\t\t\taddress_info = '';\r\n\t\t\t\t\tr_name = '';\r\n\t\t\t\t\tr_mobile = '';\r\n\t\t\t\t} else {\r\n\t\t\t\t\taddress_list = info;\r\n\t\t\t\t}\r\n\t\t\t\t$('.order-address').text(address_info);\r\n\t\t\t\t$('.order-username').text(r_name);\r\n\t\t\t\t$('.order-tel').text(r_mobile);\r\n\t\t\t}else{\r\n\t\t\t\tmodule.getAddressInfo();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// 更改订单收货地址\r\n\t\tchangeOrderAddress: function(data) {\r\n\t\t\tdata.order_id = getParams('id');\r\n\t\t\tvar info = mergeInfo('change_order_address', data);\r\n\t\t\t$.ajax({\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\turl: apiUrl,\r\n\t\t\t\tdata: JSON.stringify(info),\r\n\t\t\t\tdataType: 'json',\r\n\t\t\t\tcontentType: \"application/json; charset=utf-8\",\r\n\t\t\t\tsuccess: function(data){},\r\n\t\t\t\terror: function(data){alert('网络错误，请刷新重试');},\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 配送延时\r\n\t\tapplyDelayed: function(delay_time) {\r\n\t\t\tvar data = {'member_id': localStorage.member_id, 'order_id': getParams('id'), 'delay_time': delay_time},\r\n\t\t\t\tinfo = mergeInfo('apply_delayed', data);\r\n\t\t\t$.ajax({\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\turl: apiUrl,\r\n\t\t\t\tdata: JSON.stringify(info),\r\n\t\t\t\tdataType: 'json',\r\n\t\t\t\tcontentType: \"application/json; charset=utf-8\",\r\n\t\t\t\tsuccess: function(data){\r\n\t\t\t\t\tif(data.errcode == 1) {\r\n\t\t\t\t\t\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t// alert(data.errmsg);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terror: function(data) {alert('网络错误，请刷新重试');}\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\t// 判断对象是否为空\r\n\t\tisEmptyObject: function(e) {  \r\n\t\t    var t;  \r\n\t\t    for (t in e)  \r\n\t\t        return !1;  \r\n\t\t    return !0  \r\n\t\t},\r\n\r\n\t\t//获取指定id下的地址信息\r\n\t\tgetAddressInfo: function() {\r\n\t\t\tvar data = {'member_id': localStorage.member_id, 'address_id': getParams('address_id')},\r\n\t\t\t\tinfo = mergeInfo('get_address', data);\r\n\t\t\t$.ajax({\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\turl: apiUrl,\r\n\t\t\t\tdata: JSON.stringify(info),\r\n\t\t\t\tdataType: 'json',\r\n\t\t\t\tcontentType: \"application/json; charset=utf-8\",\r\n\t\t\t\tsuccess: function(data){\r\n\t\t\t\t\tif(data.errcode == 1) {\r\n\t\t\t\t\t\tvar d = data.data;\r\n\t\t\t\t\t\td.address = d.content;\r\n\t\t\t\t\t\t$('.order-address').text(d['content']);\r\n\t\t\t\t\t\t$('.order-username').text(d['r_name']);\r\n\t\t\t\t\t\t$('.order-tel').text(d['r_mobile']);\r\n\t\t\t\t\t\taddress_list = d;\r\n\t\t\t\t\t\tmodule.changeOrderAddress(d);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t// alert(data.errmsg);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terror: function(data) {alert('网络错误，请刷新重试');}\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\t// 继续支付\r\n\t\tcontinuePay: function(order_info) {\r\n\t\t\t$('.order-sub-btn').click(function(){\r\n\t\t\t\tif(order_info['state'] == 1) { //普通待支付订单继续支付\r\n\t\t\t\t\tgotoLocation($('input[name=\"wx-url\"]').val(), '&openid='+order_info['openid']+'&order_amount='+order_info['order_amount']+'&order_sn='+order_info['order_sn']);\r\n\t\t\t\t}else if(order_info['state'] == 6) { //拼团待支付订单继续支付\r\n\t\t\t\t\tvar data = {\r\n\t\t\t\t\t\t'order_info': {\r\n\t\t\t\t\t\t\t'order_sn': order_sn_list,\r\n\t\t\t\t\t\t\t'delivery_time': delivery_time_list\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif($('#ps-time').val() == '') {\r\n\t\t\t\t\t\talert('配送时间不能为空哦');\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdata.order_info['delivery_date'] = $('#ps-time').val();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(!module.isEmptyObject(address_list)) {\r\n\t\t\t\t\t\tdata.address_info = address_list;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\talert('亲，还未设置送货地址呢');\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar info = mergeInfo('create_pin_payment', data);\r\n\t\t\t\t\t$.ajax({\r\n\t\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\t\turl: apiUrl,\r\n\t\t\t\t\t\tdata: JSON.stringify(info),\r\n\t\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\t\tcontentType: \"application/json; charset=utf-8\",\r\n\t\t\t\t\t\tbeforeSend: function() {\r\n\t\t\t\t\t\t\tvar mark = createDialog();\r\n\t\t\t\t\t\t\t$('.ys-order-detail').append(mark);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: function(data) {\r\n\t\t\t\t\t\t\t$('.zhezhao').remove();\r\n\t\t\t\t\t\t\tif(data.errcode == 1) {\r\n\t\t\t\t\t\t\t\tgotoLocation($('input[name=\"wx-url\"]').val(), '&openid='+data.data.openid+'&order_amount='+data.data.order_amount+'&order_sn='+data.data.order_sn);\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\talert(data.errmsg);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\terror: function(data) {\r\n\t\t\t\t\t\t\t$('.zhezhao').remove();\r\n\t\t\t\t\t\t\talert('网络错误，请刷新重试');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 获取订单列表\r\n\t\tgetOrderDetail: function() {\r\n\t\t\tvar id = getParams('id');\r\n\t\t\tvar data = {'order_id': id},\r\n\t\t\t\tinfo = mergeInfo('get_order_info', data);\r\n\t\t\t$.ajax({\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\turl: apiUrl,\r\n\t\t\t\tdata: JSON.stringify(info),\r\n\t\t\t\tdataType: 'json',\r\n\t\t\t\tcontentType: \"application/json; charset=utf-8\",\r\n\t\t\t\tbeforeSend: function() {\r\n\t\t\t\t\tvar mark = createDialog();\r\n\t\t\t\t\t$('.ys-order-detail').append(mark);\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function(data) {\r\n\t\t\t\t\t$('.zhezhao').remove();\r\n\t\t\t\t\tif(data.errcode == 1) {\r\n\t\t\t\t\t\tvar address_info = data.data.address,\r\n\t\t\t\t\t\t\torder_info = data.data.order_info,\r\n\t\t\t\t\t\t\torder_goods = data.data.order_goods;\r\n\t\t\t\t\t\t\tpin_info = data.data.pin_info;\r\n\t\t\t\t\t\tif(order_info['content'] == undefined || !order_info['content']) {\r\n\t\t\t\t\t\t\t$('.order-remark').text('暂无信息');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$('.order-remark').text(order_info['content']);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t$('.order_amount').text(order_info['order_amount']);\r\n\t\t\t\t\t\t$('.order_state').text(order_state[order_info['state']]);\r\n\t\t\t\t\t\t$('.order-time').text(order_info['create_time']);\r\n\t\t\t\t\t\t$('.order_sn').text(order_info['order_sn']);\r\n\t\t\t\t\t\tmodule.setAddressInfo(address_info);\r\n\t\t\t\t\t\tvar delivery_num = order_info['delivery_num'];\r\n\t\t\t\t\t\tvar delivery_surplus = order_info['delivery_surplus_num'];\r\n\t\t\t\t\t\tvar delivery_time = order_info['delivery_time'];\r\n\t\t\t\t\t\tvar time_text = '';\r\n\t\t\t\t\t\tvar delivery_date = order_info['delivery_date'];\r\n\t\t\t\t\t\tvar time_area = order_info['time_area'];\r\n\t\t\t\t\t\tif(order_info['state'] == 1 || order_info['state'] == 6) {\r\n\t\t\t\t\t\t\tmodule.continuePay(order_info);\r\n\t\t\t\t\t\t\t$('.order-sub-wrap').removeClass('aui-hide');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(delivery_time.length == 2) {\r\n\t\t\t\t\t\t\t\ttime_text = '含中、晚餐';\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tvar time_num = delivery_time[0];\r\n\t\t\t\t\t\t\ttime_num == 1 ? time_text='含中餐' : time_text='含晚餐';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdelivery_time_list = delivery_time;\r\n\t\t\t\t\t\torder_sn_list = order_info['order_sn'];\r\n\t\t\t\t\t\tif(time_area != undefined && time_area != null && time_area != false) {\r\n\t\t\t\t\t\t\tif(time_area.length == 2) {\r\n\t\t\t\t\t\t\t\t$('.time-area-day').text(time_area[0]);\r\n\t\t\t\t\t\t\t\t$('.time-area-night').text(time_area[1]);\r\n\t\t\t\t\t\t\t}else if(time_area.length == 1) {\r\n\t\t\t\t\t\t\t\tif(time_area[0] != undefined) {\r\n\t\t\t\t\t\t\t\t\t$('.time-area-night-info').addClass('aui-hide');\r\n\t\t\t\t\t\t\t\t\t$('.time-area-day').text(time_area[0]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif(time_area[1] != undefined) {\r\n\t\t\t\t\t\t\t\t\t$('.time-area-day-info').addClass('aui-hide');\r\n\t\t\t\t\t\t\t\t\t$('.time-area-night').text(time_area[1]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t$('.time-area-night-info, .time-area-day-info').addClass('aui-hide');\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(delivery_date != undefined || delivery_date != null) {\r\n\t\t\t\t\t\t\t$('#ps-time').val(delivery_date);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tfor(var j in order_goods) {\r\n \t\t\t\t\t\t\t_p = $('.copy-item').clone(true);\r\n \t\t\t\t\t\t\t_p.find('.goods-img').attr('src', order_goods[j].goods_img);\r\n \t\t\t\t\t\t\t_p.find('.goods-name').text(order_goods[j].goods_name);\r\n \t\t\t\t\t\t\t_p.find('.goods-price').text(order_goods[j].goods_price);\r\n \t\t\t\t\t\t\t_p.find('.goods_spec').text(order_goods[j].goods_spec.split('|').join(','));\r\n \t\t\t\t\t\t\t_p.find('.order-num').text('总送餐次数：'+delivery_num+'次');\r\n \t\t\t\t\t\t\t_p.find('.order-time').text(time_text);\r\n \t\t\t\t\t\t\tif(delivery_surplus == undefined) {\r\n \t\t\t\t\t\t\t\t_p.find('.delivery_surplus').remove();\r\n \t\t\t\t\t\t\t} else if (delivery_surplus == '' || delivery_surplus == 0) {\r\n \t\t\t\t\t\t\t\t_p.find('.delivery_surplus').text('剩余次数：0次');\r\n \t\t\t\t\t\t\t} else {\r\n \t\t\t\t\t\t\t\t_p.find('.delivery_surplus').text('剩余次数：'+delivery_surplus+'次');\r\n \t\t\t\t\t\t\t}\r\n \t\t\t\t\t\t\t$('.ys-order-list .aui-list').append(_p.html());\r\n \t\t\t\t\t\t}\r\n \t\t\t\t\t\tif(pin_info == undefined || pin_info.length == 0) {\r\n\t\t\t\t\t\t\t$('.pt-content').remove();\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tvar pin_amount = 0;\r\n\t\t\t\t\t\t\tfor(var p in pin_info) {\r\n\t\t\t\t\t\t\t\tvar _d = $('.copy-pt-item').clone(true);\r\n\t\t\t\t\t\t\t\t_d.find('.pt-name').text(pin_info[p].nick_name);\r\n\t\t\t\t\t\t\t\t_d.find('.pt-mob').text(pin_info[p].member_mobile);\r\n\t\t\t\t\t\t\t\t_d.find('.pt-price').text(pin_info[p].pin_price);\r\n\t\t\t\t\t\t\t\t_d.find('.pt-state').text(pin_state[pin_info[p].pin_state]);\r\n\t\t\t\t\t\t\t\tpin_amount = accAdd(pin_amount, pin_info[p].pin_price);\r\n\t\t\t\t\t\t\t\t$('.pt-list').append(_d.html());\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t$('.pt-price').text(pin_amount);\r\n\t\t\t\t\t\t\t$('.pt-content').show();\r\n\t\t\t\t\t\t\t// totalPay = accSub(totalPay, pin_amount);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\talert(data.errmsg);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terror: function(data) {\r\n\t\t\t\t\t$('.zhezhao').remove();\r\n\t\t\t\t\talert('网络错误，请刷新重试');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\treturn {\r\n\t\tdelay: module.applyDelayed,\r\n\t\tinit: module.init\r\n\t};\r\n}(jQuery));\r\n\r\n// Account page\r\nvar Account = (function($) {\r\n\tvar module = {\r\n\t\tinit: function() {\r\n\t\t\tmodule.getUserInfo();\r\n\t\t},\r\n\r\n\t\t// 获取用户基本信息\r\n\t\tgetUserInfo: function() {\r\n\t\t\tvar data = {'member_id': localStorage.member_id},\r\n\t\t\t\tinfo = mergeInfo('get_member', data);\r\n\t\t\t$.ajax({\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\turl: apiUrl,\r\n\t\t\t\tdata: JSON.stringify(info),\r\n\t\t\t\tdataType: 'json',\r\n\t\t\t\tcontentType: \"application/json; charset=utf-8\",\r\n\t\t\t\tbeforeSend: function() {\r\n\t\t\t\t\tvar mark = createDialog();\r\n\t\t\t\t\t$('.ys-myaccount').append(mark);\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function(data) {\r\n\t\t\t\t\t$('.zhezhao').remove();\r\n\t\t\t\t\tvar url = localStorage.localStorage_url;\r\n\t\t\t\t\tif(data.errcode == 1) {\r\n\t\t\t\t\t\tvar userLogo = $('.user-logo'),\r\n\t\t\t\t\t\t\tuserName = $('.user-no'),\r\n\t\t\t\t\t\t\tuserSex = $('.user-sex>img');\r\n\t\t\t\t\t\tdata.data.nick_name ? userName.text(data.data.nick_name) : userName.text('');\r\n\t\t\t\t\t\tdata.data.sex == 1 ? userSex.attr('src', url + 'ico_mr.png') :  userSex.attr('src', url + 'ico_lady.png');\r\n\t\t\t\t\t\tdata.data.avatar ? userLogo.attr('src', data.data.avatar) : userLogo.attr('src', url + 'my-logo.jpg');\r\n\t\t\t\t\t\twindow.localStorage.setItem('sex', data.data.sex);\r\n\t\t\t\t\t\twindow.localStorage.setItem('username', data.data.nick_name);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\talert(data.errmsg);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terror: function(data) {\r\n\t\t\t\t\t$('.zhezhao').remove();\r\n\t\t\t\t\talert('用户信息获取失败，请刷新重试');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\treturn {\r\n\t\tinit: module.init\r\n\t};\r\n}(jQuery));\r\n\r\n//address list page\r\nvar Address = (function($) {\r\n\tvar module = {\r\n\t\tinit: function() {\r\n\t\t\tmodule.getAddressList();\r\n\t\t\tmodule.addAddressEvt();\r\n\t\t}, \r\n\r\n\t\t// 跳转订单详情页\r\n\t\tclickItemEvt: function() {\r\n\t\t\t$('.aui-list .aui-list-item').click(function(event){\r\n\t\t\t\tevent.stopPropagation();\r\n\t\t\t\tif(localStorage.urlState == 'orderDetail') {\r\n\t\t\t\t\tvar url = $('input[name=\"order-url\"]').val();\r\n\t\t\t\t\tgotoLocation(url, '&address_id='+$(this).attr('id')+'&id='+getParams('id'));\r\n\t\t\t\t}else if(localStorage.urlState == 'reserve') {\r\n\t\t\t\t\tvar url = $('input[name=\"order-url1\"]').val();\r\n\t\t\t\t\tgotoLocation(url, '&address_id='+$(this).attr('id'));\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 添加新地址跳转\r\n\t\taddAddressEvt: function() {\r\n\t\t\t$('.add-address-btn').click(function(event){ \r\n\t\t\t\tevent.stopPropagation();\r\n\t\t\t\tvar url = $('input[name=\"add-url\"]').val();\r\n\t\t\t\tvar addressState = $('input[name=\"address-state\"]').val();\r\n\t\t\t\tvar str = '&state='+addressState;\r\n\t\t\t\tif(addressState == 2) {\r\n\t\t\t\t\tstr +=  '&orderId='+getParams('id');\r\n\t\t\t\t}\r\n\t\t\t\tgotoLocation(url, str);\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 改变默认地址\r\n\t\tchangeDefaultAddress: function() {\r\n\t\t\t$('.ys-address-list .aui-radio').click(function(event){\r\n\t\t\t\tevent.stopPropagation();\r\n\t\t\t\tvar that = $(this);\r\n\t\t\t\tvar address_id = that.parent('.radio-label').attr('address-id');\r\n\t\t\t\tvar data = {'member_id': localStorage.member_id, 'address_id': address_id},\r\n\t\t\t\t\tinfo = mergeInfo('change_address_default', data);\r\n\t\t\t\t$.ajax({\r\n\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\turl: apiUrl,\r\n\t\t\t\t\tdata: JSON.stringify(info),\r\n\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\tcontentType: \"application/json; charset=utf-8\",\r\n\t\t\t\t\tbeforeSend: function() {\r\n\t\t\t\t\t\tvar mark = createDialog();\r\n\t\t\t\t\t\t$('.ys-address-list').append(mark);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: function(data) {\r\n\t\t\t\t\t\t$('.zhezhao').remove();\r\n\t\t\t\t\t\tif(data.errcode == 1) {\r\n\t\t\t\t\t\t\t$('.ys-address-list .aui-radio').next('span').text('设为默认');\r\n\t\t\t\t\t\t\tthat.next('span').text('默认地址');\r\n\t\t\t\t\t\t\t$('.ys-address-list .aui-radio').parent('.radio-label').removeClass('default-label');\r\n\t\t\t\t\t\t\tthat.parent('.radio-label').addClass('default-label');\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\talert(data.errmsg);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\terror: function(data) {\r\n\t\t\t\t\t\t$('.zhezhao').remove();\r\n\t\t\t\t\t\talert('默认地址设置失败，请刷新重试');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 编辑地址\r\n\t\teditEvt: function() {\r\n\t\t\t$('.edit-img').click(function(event){\r\n\t\t\t\tevent.stopPropagation();\r\n\t\t\t\tvar url = $('input[name=\"edit-url\"]').val(),\r\n\t\t\t\t\tid = $(this).attr('data-id');\r\n\t\t\t\tvar addressState = $('input[name=\"address-state\"]').val();\r\n\t\t\t\tvar str = '&id='+id+'&state='+$('input[name=\"address-state\"]').val();\r\n\t\t\t\tif(addressState == 2) {\r\n\t\t\t\t\tstr +=  '&orderId='+getParams('id');\r\n\t\t\t\t}\r\n\t\t\t\tgotoLocation(url, str);\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\t// 删除地址\r\n\t\tdelEvt: function() {\r\n\t\t\t$('.del-img').click(function(event){\r\n\t\t\t\tevent.stopPropagation();\r\n\t\t\t\tvar that = $(this);\r\n\t\t\t\tvar dialog = new auiDialog();\r\n\t\t\t\tdialog.alert({\r\n                    title:\"温馨提示\",\r\n                    msg:'是否删除地址',\r\n                    buttons:['取消','确定']\r\n                },function(ret){\r\n                    if(ret.buttonIndex == 2) {\r\n                    \tvar data = {'member_id': localStorage.member_id, 'address_id': that.attr('data-id')},\r\n\t\t\t\t\t\t\tinfo = mergeInfo('del_address', data);\r\n\t\t\t\t\t\t$.ajax({\r\n\t\t\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\t\t\turl: apiUrl,\r\n\t\t\t\t\t\t\tdata: JSON.stringify(info),\r\n\t\t\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\t\t\tcontentType: \"application/json; charset=utf-8\",\r\n\t\t\t\t\t\t\tbeforeSend: function() {\r\n\t\t\t\t\t\t\t\tvar mark = createDialog();\r\n\t\t\t\t\t\t\t\t$('.ys-address-list').append(mark);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tsuccess: function(data) {\r\n\t\t\t\t\t\t\t\t$('.zhezhao').remove();\r\n\t\t\t\t\t\t\t\tif(data.errcode == 1) {\r\n\t\t\t\t\t\t\t\t\tvar id = that.attr('data-id');\r\n\t\t\t\t\t\t\t\t\t$('li.aui-list-item[id=\"'+id+'\"]').remove();\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\talert(data.errmsg);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\terror: function(data) {\r\n\t\t\t\t\t\t\t\t$('.zhezhao').remove();\r\n\t\t\t\t\t\t\t\talert('网络错误， 请刷新重试');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n                    }\r\n                })\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\t// 获取用户地址\r\n\t\tgetAddressList: function() {\r\n\t\t\tvar data = {'member_id': localStorage.member_id},\r\n\t\t\t\tinfo = mergeInfo('get_address_list', data);\r\n\t\t\t$.ajax({\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\turl: apiUrl,\r\n\t\t\t\tdata: JSON.stringify(info),\r\n\t\t\t\tdataType: 'json',\r\n\t\t\t\tcontentType: \"application/json; charset=utf-8\",\r\n\t\t\t\tbeforeSend: function() {\r\n\t\t\t\t\tvar load = createLoadDom('address');\r\n\t\t\t\t\t$('.ys-address-list .aui-list').append(load);\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function(data) {\r\n\t\t\t\t\t$('.loading-address').remove();\r\n\t\t\t\t\tvar code = data.errcode;\r\n\t\t\t\t\tif(code == 1) {\r\n\t\t\t\t\t\tvar l = data.data.list;\r\n\t\t\t\t\t\tif(l) {\r\n\t\t\t\t\t\t\tfor(var i in l) {\r\n\t\t\t\t\t\t\t\tvar _copy = $('.address-item-copy').clone(true);\r\n\t\t\t\t\t\t\t\t_copy.children('.aui-list-item').attr('id', l[i].address_id);\r\n\t\t\t\t\t\t\t\t_copy.find('.order-address').text(l[i].address);\r\n\t\t\t\t\t\t\t\t_copy.find('.order-username').text(l[i].r_name);\r\n\t\t\t\t\t\t\t\t_copy.find('.order-tel').text(l[i].r_mobile);\r\n\t\t\t\t\t\t\t\t_copy.find('.radio-label').attr('address-id', l[i].address_id);\r\n\t\t\t\t\t\t\t\tif(l[i].is_default == 1) {\r\n\t\t\t\t\t\t\t\t\t_copy.find('.radio-label').addClass('default-label');\r\n\t\t\t\t\t\t\t\t\t_copy.find('.aui-radio').attr('checked', true);\r\n\t\t\t\t\t\t\t\t\t_copy.find('.radio-label>span').text('默认地址');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t_copy.find('.edit-img').attr('data-id', l[i].address_id);\r\n\t\t\t\t\t\t\t\t_copy.find('.del-img').attr('data-id', l[i].address_id);\r\n\t\t\t\t\t\t\t\t$('.ys-address-list .aui-list').append(_copy.html());\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif($('input[name=\"address-state\"]').val() == 2) {\r\n\t\t\t\t\t\t\t\tmodule.clickItemEvt();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tmodule.changeDefaultAddress();\r\n\t\t\t\t\t\t\tmodule.editEvt();\r\n\t\t\t\t\t\t\tmodule.delEvt();\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tvar _empty = $('<img src=\"'+localStorage.localStorage_url+'img_empty.png\" />').addClass('empty-img');\r\n\t\t    \t\t\t\tvar _text = $('<div />').addClass('empty-text').text('亲，您在哪里呀，快点告诉我们，点击下方按钮去添加取餐地址吧~');\r\n\t\t    \t\t\t\t$('.ys-address-list .aui-list').append(_empty, _text);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\talert(data.errmsg);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terror: function(data) {\r\n\t\t\t\t\t$('.loading-address').remove();\r\n\t\t\t\t\talert('地址获取失败，请刷新重试');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\treturn {\r\n\t\tinit: module.init\r\n\t}\r\n}(jQuery));\r\n\r\n//add new address page\r\nvar AddAddress = (function($) {\r\n\tvar toast = new auiToast();\r\n\tvar module = {\r\n\t\tinit: function() {\r\n\t\t\tmodule.getAddressList();\r\n\t\t\tmodule.addEvt();\r\n\t\t\tclearEvt($('.ys-add-address .input-del-icon'), $('input[name=\"add-name\"]'));\r\n\t\t},\r\n\r\n\t\t// check mobile \r\n\t\tcheckMobile: function(m) {\r\n\t\t\tvar mob = m.val();\r\n\t\t\tif(mob == '') {\r\n\t\t\t\ttoast.fail({\r\n                    title:\"请输入手机号\",\r\n                    duration:2000\r\n                });\r\n                m.focus();\r\n                return false;\r\n\t\t\t} else if (!checkMobileNo(mob)) {\r\n\t\t\t\ttoast.fail({\r\n                    title:\"手机号格式不正确\",\r\n                    duration:2000\r\n                });\r\n                m.focus();\r\n                return false;\r\n            } \r\n            return true;\r\n\t\t},\r\n\r\n\t\t// 添加地址\r\n\t\taddEvt: function() {\r\n\t\t\t$('.ys-add-address .add-address-wrapper>button').click(function(){\r\n\t\t\t\tvar _that = $(this);\r\n\t\t\t\tvar data = {};\r\n\t\t\t\tvar n = $('input[name=\"add-name\"]');\r\n\t\t\t\tif(!n.val()) {\r\n\t\t\t\t\ttoast.fail({\r\n\t                    title:\"订餐人姓名不能为空\",\r\n\t                    duration:2000\r\n\t                });\r\n\t                n.focus();\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tvar state = module.checkMobile($('input[name=\"add-tel\"]'));\r\n\t\t\t\tif(!state) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tvar d = $('span.select-sc-address'),\r\n\t\t\t\t\tt = $('span.select-qc-address');\r\n\t\t\t\tif(d.attr('data-id') == undefined) {\r\n\t\t\t\t\ttoast.fail({\r\n\t                    title:\"请选择送餐学校\",\r\n\t                    duration:2000\r\n\t                });\r\n\t                return false;\r\n\t\t\t\t}\r\n\t\t\t\tdata.member_id = localStorage.member_id;\r\n\t\t\t\tdata.r_name = n.val();\r\n\t\t\t\tdata.r_mobile = $('input[name=\"add-tel\"]').val();\r\n\t\t\t\tdata.d_id = d.attr('data-id');\r\n\t\t\t\tdata.d_name = d.text();\r\n\t\t\t\tif(t.attr('data-id') == undefined || t.attr('data-id') ==  -1) {\r\n\t\t\t\t\tvar _area = $('.f-textarea>textarea');\r\n\t\t\t\t\tdata.t_id = 0;\r\n\t\t\t\t\tif(_area.val() == '') {\r\n\t\t\t\t\t\ttoast.fail({\r\n\t\t                    title:\"请输入详细送餐地址\",\r\n\t\t                    duration:2000\r\n\t\t                });\r\n\t                \treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdata.content = _area.val();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdata.t_id = t.attr('data-id');\r\n\t\t\t\t\tdata.t_name = t.text();\r\n\t\t\t\t}\r\n\t\t\t\t$('input[name=\"is-default\"]:checked').val() == undefined ? data.is_default = 2 :  data.is_default = 1;\r\n\t\t\t\tvar info = mergeInfo('add_receive_address', data);\r\n\t\t\t\t$.ajax({\r\n\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\turl: apiUrl,\r\n\t\t\t\t\tdata: JSON.stringify(info),\r\n\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\tcontentType: \"application/json; charset=utf-8\",\r\n\t\t\t\t\tbeforeSend: function() {\r\n\t\t\t\t\t\t_that.attr('disabled', true);\r\n\t\t\t\t\t\tvar mark = createDialog();\r\n\t\t\t\t\t\t$('.ys-add-address').append(mark);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: function(data) {\r\n\t\t\t\t\t\t$('.zhezhao').remove();\r\n\t\t\t\t\t\t_that.removeAttr('disabled');\r\n\t\t\t\t\t\tif(data.errcode == 1) {\r\n\t\t\t\t\t\t\tvar addUrl = '';\r\n\t\t\t\t\t\t\tvar str = '';\r\n\t\t\t\t\t\t\tif(getParams('state') == 1) {\r\n\t\t\t\t\t\t\t\taddUrl = addressUrl[0];\r\n\t\t\t\t\t\t\t}else if(getParams('state') == 2) {\r\n\t\t\t\t\t\t\t\taddUrl = addressUrl[1];\r\n\t\t\t\t\t\t\t\tstr = '&id='+getParams('orderId');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tgotoLocation(addUrl, str);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\talert(data.errmsg);\r\n\t\t\t\t\t\t}    \r\n\t\t\t\t\t},\r\n\t\t\t\t\tcomplete: function() {\r\n\t\t\t\t\t\tconsole.log('complete');\r\n\t\t\t\t\t},\r\n\t\t\t\t\terror: function(data) {\r\n\t\t\t\t\t\t$('.zhezhao').remove();\r\n\t\t\t\t\t\t_that.removeAttr('disabled');\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 获取初始送餐取餐地址\r\n\t\tgetAddressList: function() {\r\n\t\t\tvar data = {},\r\n\t\t\t\tinfo = mergeInfo('get_fd_list', data);\r\n\t\t\t$.ajax({\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\turl: apiUrl,\r\n\t\t\t\tdata: JSON.stringify(info),\r\n\t\t\t\tdataType: 'json',\r\n\t\t\t\tcontentType: \"application/json; charset=utf-8\",\r\n\t\t\t\tbeforeSend: function() {\r\n\t\t\t\t\tvar mark = createDialog();\r\n\t\t\t\t\t$('.ys-add-address').append(mark);\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function(data) {\r\n\t\t\t\t\t$('.zhezhao').remove();\r\n\t\t\t\t\tif(data.errcode == 1) {\r\n\t\t\t\t\t\tvar l = data.data.list;\r\n\t\t\t\t\t\tif(l.length) {\t\t\t\r\n\t\t\t\t\t\t\tvar _s = [];\r\n\t\t\t\t\t\t\tvar _x = {};\r\n\t\t\t\t\t\t\tfor(var i in l) {\r\n\t\t\t\t\t\t\t\tvar _a = {};\r\n\t\t\t\t\t\t\t\t_a['d_id'] = l[i].d_id;\r\n\t\t\t\t\t\t\t\t_a['d_name'] = l[i].d_name;\r\n\t\t\t\t\t\t\t\t_s.push(_a);\r\n\t\t\t\t\t\t\t\tvar _y = {};\r\n\t\t\t\t\t\t\t\t_y['-1'] = '自提点取餐';\r\n\t\t\t\t\t\t\t\tfor(var j in l[i].take_list) {\r\n\t\t\t\t\t\t\t\t\t_y[l[i].take_list[j].t_id] = l[i].take_list[j].t_name;\t\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t_x[l[i].d_id] = _y;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar first_id = _s[0]['d_id'];\r\n\t\t\t\t\t\t\twindow.localStorage.setItem('school_list', JSON.stringify(_s));\r\n\t\t\t\t\t\t\twindow.localStorage.setItem('take_meal_list', JSON.stringify(_x));\r\n\t\t\t\t\t\t\tvar select1 = new MobileSelect({\r\n\t\t\t\t\t\t        trigger: '.select-sc-address', \r\n\t\t\t\t\t\t        title: '',  \r\n\t\t\t\t\t\t        wheels: [\r\n\t\t\t\t\t\t                {data: _s}\r\n\t\t\t\t\t\t            ]\r\n\t\t\t\t\t\t     \t //初始化定位 打开时默认选中的哪个  如果不填默认为0\r\n\t\t\t\t\t\t    });\r\n\t\t\t\t\t\t    var select2 = new MobileSelect({\r\n\t\t\t\t\t\t        trigger: '.select-qc-address', \r\n\t\t\t\t\t\t        title: '',  \r\n\t\t\t\t\t\t        wheels: [\r\n\t\t\t\t\t\t                {data:  _x[first_id]}\r\n\t\t\t\t\t\t            ]\r\n\t\t\t\t\t\t    });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\talert(data.errmsg);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terror: function(data) {\r\n\t\t\t\t\t$('.zhezhao').remove();\r\n\t\t\t\t\talert('获取送餐学校失败，请刷新重试');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\treturn {\r\n\t\tinit: module.init\r\n\t}\r\n}(jQuery));\r\n\r\n//edit address list page\r\nvar EditAddress = (function($) {\r\n\tvar toast = new auiToast();\r\n\tvar id = getParams('id'); //获取address_id\r\n\tvar module = {\r\n\t\tinit: function() {\r\n\t\t\tmodule.getAddressInfo();\r\n\t\t\tmodule.editClickEvt();\r\n\t\t\tclearEvt($('.ys-edit-address .input-del-icon'), $('input[name=\"add-name\"]'));\r\n\t\t},\r\n\r\n\t\t// check mobile \r\n\t\tcheckMobile: function(m) {\r\n\t\t\tvar mob = m.val();\r\n\t\t\tif(mob == '') {\r\n\t\t\t\ttoast.fail({\r\n                    title:\"请输入手机号\",\r\n                    duration:2000\r\n                });\r\n                m.focus();\r\n                return false;\r\n\t\t\t} else if (!checkMobileNo(mob)) {\r\n\t\t\t\ttoast.fail({\r\n                    title:\"手机号格式不正确\",\r\n                    duration:2000\r\n                });\r\n                m.focus();\r\n                return false;\r\n            } \r\n            return true;\r\n\t\t},\r\n\r\n\t\t// 保存修改后的地址\r\n\t\teditClickEvt: function() {\r\n\t\t\t$('.ys-edit-address .add-address-wrapper>button').click(function(){\r\n\t\t\t\tvar _that = $(this);\r\n\t\t\t\tvar data = {};\r\n\t\t\t\tvar n = $('input[name=\"add-name\"]');\r\n\t\t\t\tif(!n.val()) {\r\n\t\t\t\t\ttoast.fail({\r\n\t                    title:\"订餐人姓名不能为空\",\r\n\t                    duration:2000\r\n\t                });\r\n\t                n.focus();\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tvar state = module.checkMobile($('input[name=\"add-tel\"]'));\r\n\t\t\t\tif(!state) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tvar d = $('span.select-sc-address'),\r\n\t\t\t\t\tt = $('span.select-qc-address');\r\n\t\t\t\tif(d.attr('data-id') == undefined) {\r\n\t\t\t\t\ttoast.fail({\r\n\t                    title:\"请选择送餐学校\",\r\n\t                    duration:2000\r\n\t                });\r\n\t                return false;\r\n\t\t\t\t}\r\n\t\t\t\tdata.member_id = localStorage.member_id;\r\n\t\t\t\tdata.r_name = n.val();\r\n\t\t\t\tdata.r_mobile = $('input[name=\"add-tel\"]').val();\r\n\t\t\t\tdata.d_id = d.attr('data-id');\r\n\t\t\t\tdata.d_name = d.text();\r\n\t\t\t\tif(t.attr('data-id') == undefined || t.attr('data-id') == -1) {\r\n\t\t\t\t\tvar _area = $('.f-textarea>textarea');\r\n\t\t\t\t\tdata.t_id = 0;\r\n\t\t\t\t\tif(_area.val() == '') {\r\n\t\t\t\t\t\ttoast.fail({\r\n\t\t                    title:\"请输入详细送餐地址\",\r\n\t\t                    duration:2000\r\n\t\t                });\r\n\t                \treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdata.content = _area.val();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdata.t_id = t.attr('data-id');\r\n\t\t\t\t\tdata.t_name = t.text();\r\n\t\t\t\t}\r\n\t\t\t\t$('input[name=\"is-default\"]:checked').val() == undefined ? data.is_default = 2 :  data.is_default = 1;\r\n\t\t\t\tdata.address_id = id;\r\n\t\t\t\tvar info = mergeInfo('edit_receive_address', data);\r\n\t\t\t\t$.ajax({\r\n\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\turl: apiUrl,\r\n\t\t\t\t\tdata: JSON.stringify(info),\r\n\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\tcontentType: \"application/json; charset=utf-8\",\r\n\t\t\t\t\tbeforeSend: function() {\r\n\t\t\t\t\t\t_that.attr('disabled', true);\r\n\t\t\t\t\t\tvar mark = createDialog();\r\n\t\t\t\t\t\t$('.ys-add-address').append(mark);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: function(data) {\r\n\t\t\t\t\t\t$('.zhezhao').remove();\r\n\t\t\t\t\t\t_that.removeAttr('disabled');\r\n\t\t\t\t\t\tif(data.errcode == 1) {\r\n\t\t\t\t\t\t\tvar addUrl = '';\r\n\t\t\t\t\t\t\tvar str = '';\r\n\t\t\t\t\t\t\tif(getParams('state') == 1) {\r\n\t\t\t\t\t\t\t\taddUrl = addressUrl[0];\r\n\t\t\t\t\t\t\t}else if(getParams('state') == 2) {\r\n\t\t\t\t\t\t\t\taddUrl = addressUrl[1];\r\n\t\t\t\t\t\t\t\tstr = '&id='+getParams('orderId');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tgotoLocation(addUrl, str);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\talert(data.errmsg);\r\n\t\t\t\t\t\t}    \r\n\t\t\t\t\t},\r\n\t\t\t\t\tcomplete: function() {\r\n\t\t\t\t\t\tconsole.log('complete');\r\n\t\t\t\t\t},\r\n\t\t\t\t\terror: function(data) {\r\n\t\t\t\t\t\t$('.zhezhao').remove();\r\n\t\t\t\t\t\t_that.removeAttr('disabled');\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t//获取指定id下的地址信息\r\n\t\tgetAddressInfo: function() {\r\n\t\t\tvar data = {'member_id': localStorage.member_id, 'address_id': id},\r\n\t\t\t\tinfo = mergeInfo('get_address', data);\r\n\t\t\t$.ajax({\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\turl: apiUrl,\r\n\t\t\t\tdata: JSON.stringify(info),\r\n\t\t\t\tdataType: 'json',\r\n\t\t\t\tcontentType: \"application/json; charset=utf-8\",\r\n\t\t\t\tbeforeSend: function() {\r\n\t\t\t\t\tvar mark = createDialog();\r\n\t\t\t\t\t$('.ys-edit-address').append(mark);\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function(data){\r\n\t\t\t\t\t$('.zhezhao').remove();\r\n\t\t\t\t\tif(data.errcode == 1) {\r\n\t\t\t\t\t\tvar d = data.data;\r\n\t\t\t\t\t\t$('input[name=\"add-name\"]').val(d.r_name);\r\n\t\t\t\t\t\t$('input[name=\"add-tel\"]').val(d.r_mobile);\r\n\t\t\t\t\t\tif(d.t_id == 0 || d.t_id == '') {\r\n\t\t\t\t\t\t\t$('.f-textarea>textarea').val(d.content);\r\n\t\t\t\t\t\t\t$('.select-qc-address').attr('data-id', '-1').text('自提点取餐');\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t$('.address-textarea').addClass('aui-hide');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(d.is_default == 1) {\r\n\t\t\t\t\t\t\t$('input[name=\"is-default\"]').attr('checked', true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tmodule.getSchoolList(d);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\talert(data.errmsg);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terror: function(data) {\r\n\t\t\t\t\t$('.zhezhao').remove();\r\n\t\t\t\t\talert('网络错误，请刷新重试');\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\t// 获取初始送餐取餐地址\r\n\t\tgetSchoolList: function(d) {\r\n\t\t\tvar data = {},\r\n\t\t\t\tinfo = mergeInfo('get_fd_list', data);\r\n\t\t\t$.ajax({\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\turl: apiUrl,\r\n\t\t\t\tdata: JSON.stringify(info),\r\n\t\t\t\tdataType: 'json',\r\n\t\t\t\tcontentType: \"application/json; charset=utf-8\",\r\n\t\t\t\tbeforeSend: function() {\r\n\t\t\t\t\t// var mark = createDialog();\r\n\t\t\t\t\t// $('.ys-add-address').append(mark);\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function(data) {\r\n\t\t\t\t\t// $('.zhezhao').remove();\r\n\t\t\t\t\tif(data.errcode == 1) {\r\n\t\t\t\t\t\tvar l = data.data.list;\r\n\t\t\t\t\t\tif(l.length) {\t\t\t\r\n\t\t\t\t\t\t\tvar _s = [];\r\n\t\t\t\t\t\t\tvar _x = {};\r\n\t\t\t\t\t\t\tvar d_index, t_index = 0;\r\n\t\t\t\t\t\t\tfor(var i in l) {\r\n\t\t\t\t\t\t\t\tvar _a = {};\r\n\t\t\t\t\t\t\t\t_a['d_id'] = l[i].d_id;\r\n\t\t\t\t\t\t\t\t_a['d_name'] = l[i].d_name;\r\n\t\t\t\t\t\t\t\t_s.push(_a); \r\n\t\t\t\t\t\t\t\tif(l[i].d_id == d.d_id) {\r\n\t\t\t\t\t\t\t\t\td_index = i;\r\n\t\t\t\t\t\t\t\t\t$('.select-sc-address').attr('data-id', d.d_id).text(l[i].d_name);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tvar _y = {};\r\n\t\t\t\t\t\t\t\t_y['-1'] = '自提点取餐';\r\n\t\t\t\t\t\t\t\tfor(var j in l[i].take_list) {\r\n\t\t\t\t\t\t\t\t\t_y[l[i].take_list[j].t_id] = l[i].take_list[j].t_name;\r\n\t\t\t\t\t\t\t\t\tif(l[i].take_list[j].t_id == d.t_id) {\r\n\t\t\t\t\t\t\t\t\t\tt_index = j;\r\n\t\t\t\t\t\t\t\t\t\t$('.select-qc-address').attr('data-id', d.t_id).text(l[i].take_list[j].t_name);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t_x[l[i].d_id] = _y;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar first_id = _s[d_index]['d_id'];\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\twindow.localStorage.setItem('school_list', JSON.stringify(_s));\r\n\t\t\t\t\t\t\twindow.localStorage.setItem('take_meal_list', JSON.stringify(_x));\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar select1 = new MobileSelect({\r\n\t\t\t\t\t\t        trigger: '.select-sc-address', \r\n\t\t\t\t\t\t        title: '',  \r\n\t\t\t\t\t\t        wheels: [\r\n\t\t\t\t\t\t                {data: _s}\r\n\t\t\t\t\t\t            ],\r\n\t\t\t\t\t\t     \t //初始化定位 打开时默认选中的哪个  如果不填默认为0\r\n\t\t\t\t\t\t     \t position: [d_index]\r\n\t\t\t\t\t\t    });\r\n\t\t\t\t\t\t    var select2 = new MobileSelect({\r\n\t\t\t\t\t\t        trigger: '.select-qc-address', \r\n\t\t\t\t\t\t        title: '',  \r\n\t\t\t\t\t\t        wheels: [\r\n\t\t\t\t\t\t                {data:  _x[first_id]}\r\n\t\t\t\t\t\t            ],\r\n\t\t\t\t\t\t         position: [t_index]\r\n\t\t\t\t\t\t    });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\talert(data.errmsg);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terror: function(data) {\r\n\t\t\t\t\t// $('.zhezhao').remove();\r\n\t\t\t\t\talert('获取送餐学校失败，请刷新重试');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\treturn {\r\n\t\tinit: module.init\r\n\t}\r\n}(jQuery));\r\n\r\n\r\n// edit user page\r\nvar User = (function($) {\r\n\tvar module = {\r\n\t\tinit: function() {\r\n\t\t\tmodule.defaultSelected();\r\n\t\t\tmodule.selectSexEvt();\r\n\t\t\tmodule.saveUser();\r\n\t\t},\r\n\r\n\t\t// 保存修改后的用户信息\r\n\t\tsaveUser: function() {\r\n\t\t\t$('.edit-user-wrapper>button').click(function(){\r\n\t\t\t\tvar _this = $(this);\r\n\t\t\t\tvar data = {'member_id': localStorage.member_id, 'sex': $('.selected').attr('data-sex')},\r\n\t\t\t\t\tinfo = mergeInfo('change_member_sex', data);\r\n\t\t\t\t$.ajax({\r\n\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\turl: apiUrl,\r\n\t\t\t\t\tdata: JSON.stringify(info),\r\n\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\tcontentType: \"application/json; charset=utf-8\",\r\n\t\t\t\t\tbeforeSend: function() {\r\n\t\t\t\t\t\tvar mark = createDialog();\r\n\t\t\t\t\t\t$('.ys-myaccount-edit').append(mark);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: function(data) {\r\n\t\t\t\t\t\t$('.zhezhao').remove();\r\n\t\t\t\t\t\tif(data.errcode == 1) {\r\n\t\t\t\t\t\t\tgotoLocation(_this.attr('data-url'), '');\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\talert(data.errmsg);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\terror: function(data) {\r\n\t\t\t\t\t\t$('.zhezhao').remove();\r\n\t\t\t\t\t\talert('用户信息保存失败，请刷新重试');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 获取初始状态\r\n\t\tdefaultSelected: function() {\r\n\t\t\tvar name = localStorage.username,\r\n\t\t\t\tsex = localStorage.sex;\r\n\t\t\t$('.username').text(name);\r\n\t\t\t$('.sex-select').each(function(){\r\n\t\t\t\tif($(this).attr('data-sex') == sex) {\r\n\t\t\t\t\t$(this).addClass('selected');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 选择性别select事件\r\n\t\tselectSexEvt: function() {\r\n\t\t\t$('.sex-select').click(function(){\r\n\t\t\t\t$('.sex-select').removeClass('selected');\r\n\t\t\t\t$(this).addClass('selected');\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\treturn {\r\n\t\tinit: module.init\r\n\t};\r\n\r\n}(jQuery))\r\n\r\n// Register Page\r\nvar Register = (function($) {\r\n\tvar toast = new auiToast();\r\n\tvar module =  {\r\n\r\n\t\tinit: function() {\r\n\t\t\tclearEvt($('.ys-register .input-del-icon'), $('.user-mobile'));\r\n\t\t\tmodule.getVerCode();\r\n\t\t\tmodule.checkRegisterInfo();\r\n\t\t},\r\n\r\n\t\t// check mobile \r\n\t\tcheckMobile: function(mob) {\r\n\t\t\t$('.ys-mob-item').removeClass('error-info');\r\n\t\t\tif(mob == '') {\r\n\t\t\t\ttoast.fail({\r\n                    title:\"请输入手机号\",\r\n                    duration:2000\r\n                });\r\n                $('.user-mobile').focus();\r\n                $('.ys-mob-item').addClass('error-info');\r\n                return false;\r\n\t\t\t} else if (!checkMobileNo(mob)) {\r\n\t\t\t\ttoast.fail({\r\n                    title:\"手机号格式不正确\",\r\n                    duration:2000\r\n                });\r\n                $('.user-mobile').focus();\r\n                $('.ys-mob-item').addClass('error-info');\r\n                return false;\r\n            } \r\n            return true;\r\n\t\t},\r\n\r\n\t\t// check code\r\n\t\tcheckCode: function(code) {\r\n\t\t\t$('.ys-code-item').removeClass('error-info');\r\n\t\t\tif(code == '') {\r\n\t\t\t\ttoast.fail({\r\n                    title:\"请输入验证码\",\r\n                    duration:2000\r\n                });\r\n                $('.verify').focus();\r\n                $('.ys-code-item').addClass('error-info');\r\n                return false;\r\n\t\t\t} else if (code.length < 6) {\r\n\t\t\t\ttoast.fail({\r\n                    title:\"验证码格式不正确\",\r\n                    duration:2000\r\n                });\r\n                $('.verify').focus();\r\n                $('.ys-code-item').addClass('error-info');\r\n                return false;\r\n            } \r\n            return true;\r\n\t\t},\r\n\r\n\t\t// 验证登录信息\r\n\t\tcheckRegisterInfo: function() {\r\n\t\t\t$('.ys-register .next-btn').bind('click', function(){\r\n\t\t\t\tvar _that = $(this);\r\n\t\t\t\tvar mob = $('.user-mobile').val();\r\n\t\t\t\tvar code = $('.verify').val();\r\n\t\t\t\tvar mobState = module.checkMobile(mob);\r\n\t\t\t\tif(mobState) { \r\n\t\t\t\t\tvar codeState = module.checkCode(code);\r\n\t\t\t\t\tif(codeState) {\r\n\t\t\t\t\t\tvar data = {'mobile': mob, 'seccode': code},\r\n\t\t\t\t\t\tinfo = mergeInfo('reg_check', data);\r\n\t\t\t\t\t\t$.ajax({\r\n\t\t\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\t\t\turl: apiUrl,\r\n\t\t\t\t\t\t\tdata: JSON.stringify(info),\r\n\t\t\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\t\t\tcontentType: \"application/json; charset=utf-8\",\r\n\t\t\t\t\t\t\tbeforeSend: function() {\r\n\t\t\t\t\t\t \t\t_that.attr('disabled', true);\r\n\t\t\t\t\t\t \t},\r\n\t\t\t\t\t\t \tsuccess: function(data) {\r\n\t\t\t\t\t\t \t\tif(data.errcode == 1) {\r\n\t\t\t\t\t\t \t\t\tvar nickName = $('.name').val();\r\n\t\t\t\t\t\t \t\t\tvar openid = $('.openid').val();\r\n\t\t\t\t\t\t \t\t\tvar avatar = $('.avatar').val();\r\n\t\t\t\t\t\t \t\t\tvar _s = {\r\n\t\t\t\t\t\t \t\t\t\t'nickName': nickName,\r\n\t\t\t\t\t\t \t\t\t\t'openid': openid,\r\n\t\t\t\t\t\t \t\t\t\t'avatar': avatar,\r\n\t\t\t\t\t\t \t\t\t\t'mob': mob\r\n\t\t\t\t\t\t \t\t\t};\r\n\t\t\t\t\t\t \t\t\twindow.localStorage.setItem('user_info', JSON.stringify(_s));\r\n\t\t\t\t\t\t \t\t\tgotoLocation($('.question-url').val(), '');\r\n\t\t\t\t\t\t \t\t}else{\r\n\t\t\t\t\t\t \t\t\talert(data.errmsg);\r\n\t\t\t\t\t\t \t\t}\r\n\t\t\t\t\t            _that.removeAttr('disabled');\r\n\t\t\t\t\t\t \t},\r\n\t\t\t\t\t\t \tcomplete: function() {\r\n\t\t\t\t\t\t \t\tconsole.log('complete');\r\n\t\t\t\t\t\t \t},\r\n\t\t\t\t\t\t \terror: function(data) {\r\n\t\t\t\t\t\t \t\t_that.removeAttr('disabled');\r\n\t\t\t\t\t\t \t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\t// 获取手机验证码\r\n\t\tgetVerCode: function() {\r\n\t\t\t$('.ys-register .get-verify-btn').bind('click', function(){\r\n\t\t\t\tvar _this = $(this);\r\n\t\t\t\tvar mob = $('.user-mobile').val();\r\n\t\t\t\tvar state = module.checkMobile(mob);\r\n\t\t\t\tif(state) {\r\n\t\t\t\t\tvar data = {'mobile': mob},\r\n\t\t\t\t\t\tinfo = mergeInfo('send_seccode', data);\r\n\t\t\t\t\t$.ajax({\r\n\t\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\t\turl: apiUrl,\r\n\t\t\t\t\t\tdata: JSON.stringify(info),\r\n\t\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\t\tcontentType: \"application/json; charset=utf-8\",\r\n\t\t\t\t\t \tbeforeSend: function() {\r\n\t\t\t\t\t \t\t_this.attr('disabled', true);\r\n\t\t\t\t\t \t},\r\n\t\t\t\t    \tsuccess: function(data) {\r\n\t\t\t\t    \t\tif(data.errcode == 1) {\r\n\t\t\t\t    \t\t\t_this.css('background-color', '#ccc');\r\n\t\t\t\t    \t\t\tvar d = new Date();\r\n\t\t\t\t\t\t\t\t\td.setSeconds(d.getSeconds() + 59);\r\n\t\t\t\t\t\t\t\t\tvar m = d.getMonth() + 1;\r\n\t\t\t\t\t\t\t\t\tvar time = d.getFullYear() + '-' + m + '-' + d.getDate() + ' ' + d.getHours() + ':' + d.getMinutes() + ':' + d.getSeconds();\r\n\t\t\t\t\t\t\t\t\tvar end_time = new Date(Date.parse(time.replace(/-/g, \"/\"))).getTime(),\r\n\t\t\t\t\t\t\t\t\t//月份是实际月份-1\r\n\t\t\t\t\t\t\t\t\tsys_second = (end_time - new Date().getTime()) / 1000;\r\n\t\t\t\t\t\t\t\t\tvar timer = setInterval(function() {\r\n\t\t\t\t\t\t\t\t\tif (sys_second > 1) {\r\n\t\t\t\t\t\t\t\t\tsys_second -= 1;\r\n\t\t\t\t\t\t\t\t\tvar day = Math.floor((sys_second / 3600) / 24);\r\n\t\t\t\t\t\t\t\t\tvar hour = Math.floor((sys_second / 3600) % 24);\r\n\t\t\t\t\t\t\t\t\tvar minute = Math.floor((sys_second / 60) % 60);\r\n\t\t\t\t\t\t\t\t\tvar second = Math.floor(sys_second % 60);\r\n\t\t\t\t\t\t\t\t\tvar time_text = '';\r\n\t\t\t\t\t\t\t\t\tif (day > 0) {\r\n\t\t\t\t\t\t\t\t\ttime_text += day + '天';\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (hour > 0) {\r\n\t\t\t\t\t\t\t\t\tif (hour < 10) {\r\n\t\t\t\t\t\t\t\t\thour = '0' + hour;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\ttime_text += hour + '小时';\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (minute > 0) {\r\n\t\t\t\t\t\t\t\t\tif (minute < 10) {\r\n\t\t\t\t\t\t\t\t\tminute = '0' + minute;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\ttime_text += minute + '分';\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (second > 0) {\r\n\t\t\t\t\t\t\t\t\tif (second < 10) {\r\n\t\t\t\t\t\t\t\t\tsecond = '0' + second;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\ttime_text += second + '秒';\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t_this.text(time_text);\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tclearInterval(timer);\r\n\t\t\t\t\t\t\t\t\t_this.attr(\"disabled\", false);\r\n\t\t\t\t\t\t\t\t\t_this.text('重新获取验证码');\r\n\t\t\t\t\t\t\t\t\t_this.css('background-color','#fa5400');\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t1000);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\ttoast.fail({\r\n\t\t\t\t                    \ttitle:\"获取验证码失败\",\r\n\t\t\t\t                    \tduration:2000\r\n\t\t\t\t                \t});\r\n\t\t\t\t                \t_this.attr(\"disabled\", false);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t    \t},\r\n\t\t\t\t    \tcomplete: function() {\r\n\t\t\t\t    \t\tconsole.log('complete');\r\n\t\t\t\t    \t},\r\n\t\t\t\t    \terror: function (data) {\r\n\t\t\t\t    \t\tconsole.log('error:' + data);\r\n\t\t\t\t    \t\t_this.attr(\"disabled\", false);\r\n\t\t\t\t    \t}\r\n\t\t\t\t    })\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t})\r\n\t\t}\r\n\t};\r\n\treturn {\r\n\t\tinit: module.init\r\n\t}\r\n}(jQuery));\r\n\r\n// register question page\r\nvar Question = (function($){\r\n\tvar module = {\r\n\t\tinit: function() {\r\n\t\t\tmodule.changeRedioEvt($('input.aui-radio[name=\"radio1\"]'));\r\n\t\t\tmodule.changeRedioEvt($('input.aui-radio[name=\"radio2\"]'));\r\n\t\t\tmodule.changeRedioEvt($('input.aui-radio[name=\"radio3\"]'));\r\n\t\t\tmodule.changeRedioEvt($('input.aui-radio[name=\"radio4\"]'));\r\n\t\t\tmodule.registerEvt();\r\n\t\t},\r\n\r\n\t\t// change radio style\r\n\t\tchangeRedioEvt: function(_radios) {\r\n\t\t\tvar _this = _radios;\r\n\t\t\t_this.change(function(){\r\n\t\t\t\t_this.parent('.radio-label').removeClass('default-label');\r\n\t\t\t\t$(this).parent('.radio-label').addClass('default-label');\r\n\t\t\t})\r\n\t\t},\r\n\r\n   \t\t// 注册\r\n   \t\tregisterEvt: function() {\r\n   \t\t\t$('.ys-register-question .question-sub-btn').bind('click', function(){\r\n   \t\t\t\tvar _this = $(this);\r\n   \t\t\t\tvar user_info = JSON.parse(localStorage.user_info);\r\n   \t\t\t\tvar q1 = $('input.aui-radio[name=\"radio1\"]:checked').val(),\r\n   \t\t\t\t\tq2 = $('input.aui-radio[name=\"radio2\"]:checked').val(),\r\n   \t\t\t\t\tq3 = $('input.aui-radio[name=\"radio3\"]:checked').val(),\r\n   \t\t\t\t\tq4 = $('input.aui-radio[name=\"radio4\"]:checked').val(),\r\n   \t\t\t\t\tmob = user_info.mob,\r\n   \t\t\t\t\tnickName = user_info.nickName,\r\n   \t\t\t\t\topenid = user_info.openid,\r\n   \t\t\t\t\tavatar = user_info.avatar;\r\n   \t\t\t\tvar data = {\r\n   \t\t\t\t\t'mobile': mob,\r\n   \t\t\t\t\t'openid': openid,\r\n   \t\t\t\t\t'avatar': avatar,\r\n   \t\t\t\t\t'nick_name': nickName,\r\n   \t\t\t\t\t'question': {\r\n   \t\t\t\t\t\t'q1': q1,\r\n   \t\t\t\t\t\t'q2': q2,\r\n   \t\t\t\t\t\t'q3': q3,\r\n   \t\t\t\t\t\t'q4': q4\r\n   \t\t\t\t\t\t}\r\n   \t\t\t\t\t},\r\n\t\t\t\t\tinfo = mergeInfo('reg_member', data);\r\n\t\t\t\t$.ajax({\r\n\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\turl: apiUrl,\r\n\t\t\t\t\tdata: JSON.stringify(info),\r\n\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\tcontentType: \"application/json; charset=utf-8\",\r\n\t\t\t\t\tbeforeSend: function() {\r\n\t\t\t\t\t \t_this.attr('disabled', true);\r\n\t\t\t\t\t \tvar url = $('.localStorage-url').val();\r\n\t\t\t\t\t \tvar d = $('<div />').addClass('zhezhao'),\r\n\t\t\t\t\t\t\tl = $('<img />').attr('src',url +'loading.gif');\r\n\t\t\t\t\t\td.append(l);\r\n\t\t\t\t\t \t$('.ys-register-question').append(d);\r\n\t\t\t\t\t },\r\n\t\t\t\t    success: function(data) {\r\n\t\t\t\t    \t$('.zhezhao').remove();\r\n\t\t\t\t    \t_this.removeAttr('disabled');\r\n\t\t\t\t    \tif(data.errcode == 1) {\r\n\t\t\t\t    \t\twindow.localStorage.setItem('member_id', data.data.member_id);\r\n\t\t\t\t    \t\tgotoLocation($('.ys-register-question .home-url').val(), '');\r\n\t\t\t\t    \t}else{\r\n\t\t\t\t    \t\tconsole.log(data.errmsg);\r\n\t\t\t\t    \t}\r\n\t\t\t\t    },\r\n\t\t\t\t    error: function(data) {\r\n\t\t\t\t    \t$('.zhezhao').remove();\r\n\t\t\t\t    \t_this.removeAttr('disabled');\r\n\t\t\t\t    }\r\n\t\t\t\t})\r\n\r\n   \t\t\t})\r\n   \t\t}\r\n\t};\r\n\treturn {\r\n\t\tinit: module.init\r\n\t}\r\n})(jQuery);\r\n\r\n// shoppingcar list page\r\nvar Shoppingcar = (function($){\r\n\tvar dialog = new auiDialog();\r\n\tvar module = {\r\n\t\tinit: function(state) { //state 1:shopping index, 2:shopping delete\r\n\t\t\tmodule.getCarList(state);\r\n\t\t\tmodule.gotoReserveEvt();\r\n\t\t\tmodule.gotoDelCar();\r\n\t\t\tmodule.delcarEvt();\r\n\t\t},\r\n\r\n\t\t// 结算事件\r\n\t\tgotoReserveEvt: function() {\r\n\t\t\t$('.go-pay-btn').click(function(){\r\n\t\t\t\tvar that = $(this);\r\n\t\t\t\tvar len = $('input[name=\"itemRadio\"]:checked').length;\r\n\t\t\t\tif(len) {\r\n\t\t\t\t\tvar sku_ids = {};\r\n\t\t\t\t\tvar state_arr = [];\r\n\t\t\t\t\tvar time_state ;\r\n\t\t\t\t\tvar url_state = true;\r\n                \t$('input[name=\"itemRadio\"]:checked').each(function(i){\r\n                \t\tsku_ids[i] = $(this).attr('data-sku');\r\n                \t\ttime_state = $(this).attr('time-state');\r\n                \t\tif(i == 0) {\r\n                \t\t\tstate_arr.push(time_state);\r\n                \t\t}else {\r\n                \t\t\tif($.inArray(time_state, state_arr) == '-1') {\r\n                \t\t\t\talert('亲，请选择相同时间段的商品');\r\n                \t\t\t\turl_state = false;\r\n                \t\t\t\treturn false;\r\n                \t\t\t}\r\n                \t\t}\r\n                \t});\r\n                \tif(url_state) {\r\n                \t\tvar d = {};\r\n                \t\td.sku_ids = sku_ids;\r\n                \t\tmodule.createGoodsOrder(d, that.attr('data-url'));\r\n                \t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\talert('亲，还没有等待结算的商品呢');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 创建订单\r\n\t\tcreateGoodsOrder: function(d, jumpUrl) {\r\n\t\t\td.member_id = localStorage.member_id;\r\n\t\t\tvar info = mergeInfo('create_goods_order', d);\r\n\t\t\t$.ajax({\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\turl: apiUrl,\r\n\t\t\t\tdata: JSON.stringify(info),\r\n\t\t\t\tdataType: 'json',\r\n\t\t\t\tcontentType: \"application/json; charset=utf-8\",\r\n\t\t\t\tbeforeSend: function() {\r\n\t\t\t\t\tvar mark = createDialog();\r\n\t\t\t\t\t$('.ys-product-detail').append(mark);\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function(data) {\r\n\t\t\t\t\t$('.zhezhao').remove();\r\n\t\t\t\t\tif(data.errcode == 1) {\r\n\t\t\t\t\t\twindow.localStorage.setItem('orderData', JSON.stringify(data.data));\r\n\t\t\t\t\t\tgotoLocation(jumpUrl, '&payState=2');\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\talert(data.errmsg);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terror: function(data) {\r\n\t\t\t\t\t$('.zhezhao').remove();\r\n\t\t\t\t\talert('网络错误，请刷新重试');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 跳转删除商品页\r\n\t\tgotoDelCar: function() {\r\n\t\t\t$('.ys-edit-text').click(function(){\r\n\t\t\t\tgotoLocation($(this).attr('data-url'), '');\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 全选与反选事件\r\n\t\tcheckAll: function() {\r\n\t\t\t$('input[name=\"checkAll\"]').click(function(){ \r\n\t    \t\tif(this.checked){   \r\n\t    \t\t\tvar len = $('.good-list input[name=\"itemRadio\"]').length,\r\n\t    \t\t\t\ttotalValue = 0;\r\n\t        \t\t$('.good-list input[name=\"itemRadio\"]').prop(\"checked\", true); \r\n\t        \t\t$('.good-list input[name=\"itemRadio\"]').each(function(){\r\n\t        \t\t\ttotalValue = accAdd(totalValue, $(this).attr('data-price'));\r\n\t        \t\t});\r\n\t        \t\t$('.total-value').text(totalValue);\r\n\t\t\t\t\t$('.pay-num').text(len);\r\n\t    \t\t}else{   \r\n\t\t\t\t\t$('input[name=\"itemRadio\"]').prop(\"checked\", false);\r\n\t\t\t\t\t$('.total-value').text('0.00');\r\n\t\t\t\t\t$('.pay-num').text('0');\r\n\t    \t\t}   \r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 删除选中购物车商品\r\n\t\tdelcarEvt: function() {\r\n\t\t\t$('.del-shop-item, .delete-spcar-btn').bind('click', function(){\r\n\t\t\t\tvar len = $('input[name=\"itemRadio\"]:checked').length;\r\n\t\t\t\tif(len) {\r\n\t\t\t\t\tdialog.alert({\r\n                    \ttitle:\"温馨提示\",\r\n                    \tmsg:'是否删除所选商品',\r\n                    \tbuttons:['取消','确定']\r\n                \t\t},function(ret){\r\n                \t\t\tif(ret.buttonIndex == 2) {\r\n                \t\t\t\tvar sku_ids = {};\r\n                \t\t\t\t$('input[name=\"itemRadio\"]:checked').each(function(i){\r\n                \t\t\t\t\tsku_ids[i] = $(this).attr('data-sku');\r\n                \t\t\t\t});\r\n\t\t                    \tvar data = {'member_id': localStorage.member_id, 'sku_ids': sku_ids},\r\n\t\t\t\t\t\t\t\t\tinfo = mergeInfo('del_cart', data);\r\n\t\t\t\t\t\t\t\t$.ajax({\r\n\t\t\t\t\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\t\t\t\t\turl: apiUrl,\r\n\t\t\t\t\t\t\t\t\tdata: JSON.stringify(info),\r\n\t\t\t\t\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\t\t\t\t\tcontentType: \"application/json; charset=utf-8\",\r\n\t\t\t\t\t\t\t\t\tbeforeSend: function() {\r\n\t\t\t\t\t\t\t\t\t\tvar mark = createDialog();\r\n\t\t\t\t\t\t\t\t\t\t$('.ys-shopping-car').append(mark);\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tsuccess: function(data) {\r\n\t\t\t\t\t\t\t\t\t\t$('.zhezhao').remove();\r\n\t\t\t\t\t\t\t\t\t\tif(data.errcode == 1) {\r\n\t\t\t\t\t\t\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\t\talert(data.errmsg);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\terror: function(data) {\r\n\t\t\t\t\t\t\t\t\t\t$('.zhezhao').remove();\r\n\t\t\t\t\t\t\t\t\t\talert('网络错误， 请刷新重试');\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t                    }\r\n                \t\t}\r\n                \t);\r\n\t\t\t\t}else{\r\n\t\t\t\t\talert('主人，还没有商品等您删除呢');\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\t// 商品选中事件\r\n\t\titemSelectEvt: function() {\r\n\t\t\t$('input[name=\"itemRadio\"]').change(function(){\r\n\t\t\t\tvar totalValue = $('.total-value').text(),\r\n\t\t\t\t\ttotalNum = $('.pay-num').text();\r\n\t\t\t\tif(this.checked) {\r\n\t\t\t\t\ttotalValue = accAdd(totalValue, $(this).attr('data-price'));\r\n\t\t\t\t\ttotalNum++;\r\n\t\t\t\t}else{\r\n\t\t\t\t\ttotalValue = accSub(totalValue, $(this).attr('data-price'));\r\n\t\t\t\t\ttotalNum--;\r\n\t\t\t\t\tif($('input[name=\"checkAll\"]')[0].checked) {\r\n\t\t\t\t\t\t$('input[name=\"checkAll\"]').prop('checked', false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t$('.total-value').text(totalValue);\r\n\t\t\t\t$('.pay-num').text(totalNum);\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 获取购物车列表\r\n\t\tgetCarList: function(state) {\r\n\t\t\tvar data = {'member_id': localStorage.member_id},\r\n\t\t\t\tinfo = mergeInfo('get_cart_list', data);\r\n\t\t\t$.ajax({\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\turl: apiUrl,\r\n\t\t\t\tdata: JSON.stringify(info),\r\n\t\t\t\tdataType: 'json',\r\n\t\t\t\tcontentType: \"application/json; charset=utf-8\",\r\n\t\t\t\tbeforeSend: function() {\r\n\t\t\t\t\tvar mark = createDialog();\r\n\t\t\t\t\t$('.ys-shopping-car').append(mark);\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function(data) {\r\n\t\t\t\t\t$('.zhezhao').remove();\r\n\t\t\t\t\tif(data.errcode == 1) {\r\n\t\t\t\t\t\tvar l = data.data.list;\r\n\t\t\t\t\t\t$('.good-list').css('background-color',' #fff');\r\n\t\t\t\t\t\tif(l.length) {\r\n\t\t\t\t\t\t\tfor(var i in l) {\r\n\t\t\t\t\t\t\t\tvar _copy = $('.copy-item').clone(true);\r\n\t\t\t\t\t\t\t\tvar delivery_time = l[i].delivery_time;\r\n\t\t\t\t\t\t\t\tvar time_text = \"\";\r\n\t\t\t\t\t\t\t\tvar time_state;\r\n\t\t\t\t\t\t\t\tif(delivery_time.length == 2) {\r\n\t\t\t\t\t\t\t\t\ttime_text = '含中、晚餐';\r\n\t\t\t\t\t\t\t\t\ttime_state = 1;\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\tvar time_num = delivery_time[0];\r\n\t\t\t\t\t\t\t\t\ttime_num == 1 ? time_text='含中餐' : time_text='含晚餐';\r\n\t\t\t\t\t\t\t\t\ttime_num == 1 ? time_state = 2 : time_state = 3;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif(state == 1 && l[i].goods_state == 2) {\r\n\t\t\t\t\t\t\t\t\t_copy.find('input[name=\"itemRadio\"]').addClass('aui-invisible').removeAttr('name');\r\n\t\t\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\t\t\t_copy.find('input[name=\"itemRadio\"]').attr({\r\n\t\t\t\t\t\t\t\t\t\t'data-price': l[i].sku_price,\r\n\t\t\t\t\t\t\t\t\t\t'data-spu': l[i].spu_id,\r\n\t\t\t\t\t\t\t\t\t\t'data-sku': l[i].sku_id,\r\n\t\t\t\t\t\t\t\t\t\t'time-state': time_state\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif(l[i].goods_state == 2) {\r\n\t\t\t\t\t\t\t\t\t_copy.children('li.aui-list-item').addClass('invalid-item');\r\n\t\t\t\t\t\t\t\t\tvar invalidMask = $('<div class=\"invalid-mask\" />'),\r\n\t\t\t\t\t\t\t\t\t\tinvalidText = $('<div class=\"invalid-text\" />').text('已失效');\r\n\t\t\t\t\t\t\t\t\t_copy.find('.good-img').after(invalidMask, invalidText);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t_copy.find('.delivery_time').text(time_text);\r\n\t\t\t\t\t\t\t\t_copy.find('.good-img').attr('src', l[i].goods_img);\r\n\t\t\t\t\t\t\t\t_copy.find('.good-name').text(l[i].goods_name);\r\n\t\t\t\t\t\t\t\t_copy.find('.good-price').text(l[i].sku_price);\r\n\t\t\t\t\t\t\t\t_copy.find('.good-price-area').text(l[i].spec);\r\n\t\t\t\t\t\t\t\t$('.good-list').append(_copy.html());\r\n\t\t\t\t\t\t\t}\r\n\t\t\r\n    \t\t\t\t\t\tmodule.checkAll();\r\n    \t\t\t\t\t\tmodule.itemSelectEvt();\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tvar _empty = $('<img src=\"'+localStorage.localStorage_url+'img_empty.png\" />').addClass('empty-img');\r\n\t\t    \t\t\t\tvar _text = $('<div />').addClass('empty-text').text('亲，购物车空瘪瘪的，赶快去添加商品吧');\r\n\t\t    \t\t\t\t$('.ys-shopping-car .good-list').append(_empty, _text).css('background-color', '#f5f5f5');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\talert(data.errmsg);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terror: function() {\r\n\t\t\t\t\t$('.zhezhao').remove();\r\n\t\t\t\t\talert('网络错误，请刷新重试');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\treturn {\r\n\t\tinit: module.init\r\n\t}\r\n}(jQuery));\r\n\r\n// 优惠券列表页\r\nvar Coupon = (function(){\r\n\tvar state = [1,2]; //1为未使用，2为已过期\r\n\tvar couponStatus = {\r\n\t\t'1': '未使用',\r\n\t\t'2': '已使用',\r\n\t\t'3': '已失效'\r\n\t};\r\n\tvar member_id;\r\n\tvar module = {\r\n\t\tinit: function() {\r\n\t\t\tmember_id = $('input[name=\"member_id\"]').val();\r\n\t\t\tmember_id ? localStorage.setItem('member_id', member_id) : member_id = localStorage.member_id;\r\n\t\t\tmodule.getCouponList(state[0]);\r\n\t\t\tmodule.tabSelectEvt();\r\n\t\t},\r\n\r\n\t\t// 优惠券tab选择事件\r\n\t\ttabSelectEvt: function() {\r\n\t\t\tvar tab = new auiTab({\r\n\t\t        element:document.getElementById(\"tab\")\r\n\t\t    },function(ret){\r\n\t\t        if(ret) {\r\n\t\t           var _index = ret.index;\r\n\t\t          module.getCouponList(_index);\r\n\t\t        }\r\n\t\t    });\r\n\t\t},\r\n\r\n\t\t// 判断对象是否为空\r\n\t\tisEmptyObject: function(e) {  \r\n\t\t    var t;  \r\n\t\t    for (t in e)  \r\n\t\t        return !1;  \r\n\t\t    return !0  \r\n\t\t},\r\n\r\n\t\t//获取优惠券列表\r\n\t\tgetCouponList: function(s) {\r\n\t\t\tvar data = {'member_id': member_id, 'state': s},\r\n\t\t\t\tinfo = mergeInfo('get_member_voucher', data);\r\n\t\t\t$.ajax({\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\turl: apiUrl,\r\n\t\t\t\tdata: JSON.stringify(info),\r\n\t\t\t\tdataType: 'json',\r\n\t\t\t\tcontentType: \"application/json; charset=utf-8\",\r\n\t\t\t\tbeforeSend: function() {\r\n\t\t\t\t\t$('.ys-coupon .aui-list').children().remove();\r\n\t\t\t\t\tvar load = createLoadDom('coupon');\r\n\t\t\t\t\t$('.ys-coupon .aui-list').append(load);\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function(data) {\r\n\t\t\t\t\t$('.loading-coupon').remove();\r\n\t\t\t\t\tvar code = data.errcode;\r\n\t\t\t\t\tif(code == 1) {\r\n\t\t\t\t\t\tvar d = data.data;\r\n\t\t\t\t\t\tif(!module.isEmptyObject(d)) {\r\n\t\t\t\t\t\t\tvar list = d.list;\r\n\t\t\t\t\t\t\tfor(var i in list) {\r\n\t\t\t\t\t\t\t\tvar _copy = $('.copy-item').clone(true);\r\n\t\t\t\t\t\t\t\tvar rangeText = '';\r\n\t\t\t\t\t\t\t\t_copy.find('.voucher_price').text(list[i].voucher_price);\r\n\t\t\t\t\t\t\t\tif(list[i].voucher_type == 1) {\r\n\t\t\t\t\t\t\t\t\trangeText = '全店配餐均可使用';\r\n\t\t\t\t\t\t\t\t}else if(list[i].voucher_type == 2) {\r\n\t\t\t\t\t\t\t\t\tvar goods_info = list[i].goods_info;\r\n\t\t\t\t\t\t\t\t\trangeText = '仅限于';\r\n\t\t\t\t\t\t\t\t\tfor(var j in goods_info) {\r\n\t\t\t\t\t\t\t\t\t\tif(j ==  (goods_info.length-1)) {\r\n\t\t\t\t\t\t\t\t\t\t\trangeText += goods_info[j].goods_name;\r\n\t\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\t\trangeText += goods_info[j].goods_name + '、';\r\n\t\t\t\t\t\t\t\t\t\t}\t\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t_copy.find('.coupon-range').text(list[i].voucher_name);\r\n\t\t\t\t\t\t\t\t_copy.find('.coupon-limit-info').text(rangeText);\r\n\t\t\t\t\t\t\t\t_copy.find('.coupon-start-date').text(list[i].start_time);\r\n\t\t\t\t\t\t\t\t_copy.find('.coupon-end-date').text(list[i].end_time);\r\n\t\t\t\t\t\t\t\tif(s == 2) {\r\n\t\t\t\t\t\t\t\t\tvar coupon_state = $('<p class=\"coupon-state\" />').text(couponStatus[list[i].state]);\r\n\t\t\t\t\t\t\t\t\t_copy.find('.coupon-limit').after(coupon_state);\r\n\t\t\t\t\t\t\t\t\t_copy.find('.coupon-demonation,.coupon-limit, .coupon-range, .coupon-limit-info, .coupon-limit-date-title, .coupon-limit-date').addClass('disabled');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t$('.ys-coupon .aui-list').append(_copy.html());\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tvar _empty = $('<img src=\"'+localStorage.localStorage_url+'img_empty.png\" />').addClass('empty-img');\r\n\t\t    \t\t\t\tvar _text = $('<div />').addClass('empty-text').text('亲，你还未拥有优惠券哦');\r\n\t\t    \t\t\t\t$('.ys-coupon .aui-list').append(_empty, _text);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\talert(data.errmsg);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terror: function(data) {\r\n\t\t\t\t\t$('.loading-coupon').remove();\r\n\t\t\t\t\talert('网络错误，请刷新重试');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\treturn {\r\n\t\tinit: module.init\r\n\t}\r\n}(jQuery));\r\n\r\n// 退款\r\nvar Refund = (function($){\r\n\tvar module = {\r\n\t\tinit: function() {\r\n\t\t\tmodule.jumpToApply();\r\n\t\t},\r\n\r\n\t\t// 跳转申请退款页面\r\n\t\tjumpToApply: function() {\r\n\t\t\t$('.apply-refund-btn').click(function(){\r\n\t\t\t\tgotoLocation($(this).attr('data-url'), '');\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\ttabSelectEvt: function(){\r\n\t\t\t$('#footer>.aui-bar-tab-item').bind('click', function(i){\r\n            \tif($(this).hasClass('aui-active')) {\r\n            \t\treturn;\r\n            \t}else{\r\n            \t\tvar _index = $(this).index();\r\n            \t\tgotoLocation(urlArr[_index], '');\r\n            \t}\r\n        \t})\r\n\t\t}\r\n\t};\r\n\treturn {\r\n\t\tinit: module.init\r\n\t}\r\n}(jQuery));\r\n\r\n// 预订成功页\r\nvar OrderSuccess = (function($){\r\n\tvar module = {\r\n\t\tinit: function() {\r\n\t\t\t$('.order-no').text(getParams('order_sn'));\r\n\t\t\t$('.see-order-btn').click(function(){\r\n\t\t\t\tgotoLocation($(this).attr('data-url'), '');\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\treturn {\r\n\t\tinit: module.init\r\n\t}\r\n}(jQuery));\r\n\r\n// 微信支付\r\nvar WXpay = (function($){\r\n\tvar module = {\r\n\t\tinit: function() {\r\n\t\t\tmodule.changeOrderState();\r\n\t\t},\r\n\r\n\t\t// 更改支付状态\r\n\t\tchangeOrderState: function() {\r\n\t\t\tvar order_sn = getParams('order_sn');\r\n\t\t\tvar data = {'order_sn': order_sn},\r\n\t\t\t\tinfo = mergeInfo('change_temp_order_state', data);\r\n\t\t\t$.ajax({\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\turl: apiUrl,\r\n\t\t\t\tdata: JSON.stringify(info),\r\n\t\t\t\tdataType: 'json',\r\n\t\t\t\tcontentType: \"application/json; charset=utf-8\",\r\n\t\t\t\tbeforeSend: function() {},\r\n\t\t\t\tsuccess: function(data) {},\r\n\t\t\t\terror: function(data) {}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\treturn {\r\n\t\tinit: module.init\r\n\t}\r\n}(jQuery));\r\n\r\n// footer部分\r\nvar Footer = (function($){\r\n\tvar module = {\r\n\t\tinit: function() {\r\n\t\t\tmodule.tabSelectEvt();\r\n\t\t},\r\n\r\n\t\ttabSelectEvt: function(){\r\n\t\t\t$('#footer>.aui-bar-tab-item').bind('click', function(i){\r\n            \tif($(this).hasClass('aui-active')) {\r\n            \t\treturn;\r\n            \t}else{\r\n            \t\tvar _index = $(this).index();\r\n            \t\tgotoLocation(urlArr[_index], '');\r\n            \t}\r\n        \t})\r\n\t\t}\r\n\t};\r\n\treturn {\r\n\t\tinit: module.init\r\n\t}\r\n}(jQuery));\r\n"]}