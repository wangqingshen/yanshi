{"version":3,"sources":["mobileSelect.js"],"names":["window","MobileSelect","getClass","dom","string","getElementsByClassName","config","this","mobileSelect","wheelsData","wheels","jsonType","jsonData","checkDataType","renderWheels","displayJson","cascade","startY","moveEndY","moveY","oldMoveY","offset","offsetSum","oversizeBorder","curDistance","clickStatus","init","prototype","constructor","_this","trigger","document","querySelector","wheel","slider","liHeight","offsetHeight","ensureBtn","closeBtn","grayLayer","popUp","callback","transitionEnd","initPosition","position","titleText","title","className","style","cursor","setTitle","checkCascade","initCascade","length","i","push","setCurDistance","addListenerAll","addEventListener","classList","remove","tempValue","data_id","getValue","getDataId","innerHTML","id","$","attr","setAttribute","hasClass","text","removeAttr","removeClass","_wheels","_list","JSON","parse","localStorage","take_meal_list","_tempHTML","find","append","addClass","val","data_price","getDataPrice","totalAmount","yhAmount","addAmount","accAdd","accAmount","accSub","getIndexArr","getJson","add","event","stopPropagation","fixRowStyle","createElement","body","appendChild","tempHTML","j","data","undefined","d_price","d_id","d_name","addListenerWheel","addListenerLi","theWheel","index","touch","firstChild","dragClick","sliderIndex","curWheelLi","getElementsByTagName","singleClick","node","childs","generateArrData","checkArrDeep","updateWheels","targetArr","tempArr","value","parent","checkRange","posIndexArr","deleteNum","pop","resultNode","resetPostion","tempCount","tempPosArr","count","removeChild","tempWheel","updateWheel","width","toFixed","getIndex","distance","Math","round","temp","positionArr","calcDistance","indexArr","movePosition","fixPosition","theSlider","webkitTransform","transform","locatePostion","posIndex","updateCurDistance","parseInt","split","getDistance","getAttribute","type","touches","clientY","changedTouches","setTimeout","preventDefault","theLi","parentNode"],"mappings":"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","file":"mobileSelect.js","sourcesContent":["/*!\r\n * mobileSelect.js\r\n * (c) 2017-present onlyhom\r\n * Released under the MIT License.\r\n */\r\n\r\nwindow.MobileSelect = (function() {\r\n\r\n\tfunction getClass(dom,string) {\r\n\t\treturn dom.getElementsByClassName(string);\r\n\t}\r\n\r\n\t//构造器\r\n\tfunction MobileSelect(config) {\r\n\t\tthis.mobileSelect;\r\n\t\tthis.wheelsData = config.wheels;\r\n\t\tthis.jsonType =  false;\r\n\t\tthis.jsonData = [];\r\n\t\tthis.checkDataType();\r\n\t\tthis.renderWheels(this.wheelsData);\r\n\t\tthis.displayJson = []; \r\n\t\tthis.cascade = false;\r\n\t\tthis.startY;\r\n\t\tthis.moveEndY;\r\n\t\tthis.moveY;\r\n\t\tthis.oldMoveY;\r\n\t\tthis.offset = 0;\r\n\t\tthis.offsetSum = 0;\r\n\t\tthis.oversizeBorder;\r\n\t\tthis.curDistance = [];\r\n\t\tthis.clickStatus = false;\r\n\r\n\t\tthis.init(config);\r\n\t}\r\n\t\r\n\tMobileSelect.prototype = {\r\n\t\tconstructor: MobileSelect,\r\n\t\tinit: function(config){\r\n\t\t\tvar _this = this; \r\n\t\t\t_this.trigger = document.querySelector(config.trigger);\r\n\t\t\t_this.wheel = getClass(_this.mobileSelect,'wheel');   //wheel 数组\r\n\t\t\t_this.slider = getClass(_this.mobileSelect,'selectContainer'); // slider 数组\r\n\t\t\t_this.wheels = _this.mobileSelect.querySelector('.wheels');   //wheels\r\n\t\t\t_this.liHeight = _this.mobileSelect.querySelector('li').offsetHeight;\r\n\t\t\t_this.ensureBtn = _this.mobileSelect.querySelector('.ensure');\r\n\t\t\t_this.closeBtn = _this.mobileSelect.querySelector('.cancel');\r\n\t\t\t_this.grayLayer = _this.mobileSelect.querySelector('.grayLayer');\r\n\t\t\t_this.popUp = _this.mobileSelect.querySelector('.content');\r\n\t\t\t_this.callback = config.callback ? config.callback : function(){};\r\n\t\t\t_this.transitionEnd = config.transitionEnd ? config.transitionEnd : function(){};\r\n\t\t\t_this.initPosition = config.position ? config.position : [];\r\n\t\t\t_this.titleText = config.title ? config.title : '';\r\n\r\n\t\t\t_this.wheels.className += \" \" + _this.trigger.className;\r\n\t\t\t_this.trigger.style.cursor='pointer';\r\n\t\t\t_this.setTitle(_this.titleText);\r\n\t\t\t_this.checkCascade();\r\n\r\n\t\t\tif (_this.cascade) {\r\n\t\t\t\t_this.initCascade();\r\n\t\t\t}\r\n\r\n\t\t\t//定位 初始位置\r\n\t\t\tif(_this.initPosition.length == 0){\r\n\t\t\t\tfor(var i=0; i<_this.slider.length; i++){\r\n\t\t\t\t\t_this.initPosition.push(0);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t_this.setCurDistance(_this.initPosition);\r\n\t\t\t_this.addListenerAll();\r\n\r\n\t\t\t//按钮监听\r\n\t\t\t_this.closeBtn.addEventListener('click',function(){\r\n\t\t\t_this.mobileSelect.classList.remove('mobileSelect-show');\r\n\t\t    });\r\n\r\n\t\t    _this.ensureBtn.addEventListener('click',function(){\r\n\t\t\t_this.mobileSelect.classList.remove('mobileSelect-show');\r\n\t\t\tvar tempValue ='';\r\n\t\t\tvar data_id='';\r\n\t\t    \tfor(var i=0; i<_this.wheel.length; i++){\r\n\t\t    \t\ti==_this.wheel.length-1 ? tempValue += _this.getValue(i) : tempValue += _this.getValue(i)+' ';\r\n\t\t    \t\ti==_this.wheel.length-1 ? data_id += _this.getDataId(i) : data_id += _this.getDataId(i)+' ';\r\n\t\t    \t}\r\n\t\t    \t_this.trigger.innerHTML = tempValue;\r\n\t\t    \tvar id = $(_this.trigger).attr('data-id');\r\n\t\t    \t_this.trigger.setAttribute('data-id', data_id);\r\n\t\t    \tif($(_this.trigger).hasClass('select-sc-address')) {\r\n\t\t    \t\tif(id != data_id) {\r\n\t\t    \t\t\t$('span.select-qc-address').text('请选择').removeAttr('data-id');\r\n\t\t    \t\t\t$('.address-textarea').removeClass('aui-hide');\r\n\t\t    \t\t\tvar _wheels = $('.wheels.select-qc-address');\r\n\t\t\t   \t\t\tvar _list = JSON.parse(localStorage.take_meal_list)[data_id];\r\n\t\t\t   \t\t\tvar _tempHTML = '';\r\n\t\t\t   \t\t\t_wheels.find('ul>li').remove();\r\n\t\t\t   \t\t\tfor(var i in _list) {\r\n\t\t\t\t\t\t\t_tempHTML += '<li data-id=\"'+i+'\">'+_list[i]+'</li>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t_wheels.find('ul').append(_tempHTML);\r\n\t\t    \t\t}\r\n\t\t    \t} else if($(_this.trigger).hasClass('select-qc-address')) {\r\n\t\t    \t\tif(data_id == '-1') {\r\n\t\t    \t\t\t$('.address-textarea').removeClass('aui-hide');\r\n\t\t    \t\t}else{\r\n\t\t    \t\t\t$('.address-textarea').addClass('aui-hide');\r\n\t\t    \t\t\t$('.f-textarea>textarea').val('');\r\n\t\t    \t\t\t\r\n\t\t    \t\t}\t\r\n\t\t    \t}else if ($(_this.trigger).hasClass('coupon-list')) {\r\n\t\t    \t\tvar data_price = '';\r\n\t\t    \t\tfor(var i=0; i<_this.wheel.length; i++){\r\n\t\t\t    \t\ti==_this.wheel.length-1 ? data_price += _this.getDataPrice(i) : data_price += _this.getDataPrice(i)+' ';\r\n\t\t\t    \t}\r\n\t\t\t    \tvar totalAmount = $('.pay-total').text();\r\n\t\t\t    \tvar yhAmount = $('.yh-money').text();\r\n\t\t\t    \tvar addAmount = accAdd(totalAmount, yhAmount);\r\n\t\t\t    \tvar accAmount = accSub(addAmount, data_price);\r\n\t\t\t    \t$('.pay-total').text(accAmount);\r\n\t\t\t    \t$('.yh-money').text(data_price);\r\n\t\t\t    \t_this.trigger.setAttribute('data-price', data_price);\r\n\t\t    \t}\r\n\t\t    \t_this.callback(_this.getIndexArr(),_this.getJson());\r\n\t\t    });\r\n\r\n\t\t    _this.trigger.addEventListener('click',function(){\r\n\t\t    \t_this.mobileSelect.classList.add('mobileSelect-show');\r\n\t\t    });\r\n\t\t    _this.grayLayer.addEventListener('click',function(){\r\n\t\t    \t_this.mobileSelect.classList.remove('mobileSelect-show');\r\n\t\t    });\r\n\t\t    _this.popUp.addEventListener('click',function(){\r\n\t\t    \tevent.stopPropagation(); \r\n\t\t    });\r\n\r\n\t\t\t_this.fixRowStyle(); //修正列数\r\n\t\t},\r\n\r\n\t\tsetTitle: function(string){\r\n\t\t\tvar _this = this;\r\n\t\t\t_this.titleText = string;\r\n\t\t\t_this.mobileSelect.querySelector('.title').innerHTML = _this.titleText;\r\n\t\t},\r\n\r\n\t\trenderWheels: function(wheelsData){\r\n\t\t\tvar _this = this;\r\n\t\t\t_this.mobileSelect = document.createElement(\"div\");\r\n\t\t\t_this.mobileSelect.className = \"mobileSelect\";\r\n\t\t\t_this.mobileSelect.innerHTML = \r\n\t\t    \t'<div class=\"grayLayer\"></div>'+\r\n\t\t        '<div class=\"content\">'+\r\n\t\t            '<div class=\"btnBar\">'+\r\n\t\t                '<div class=\"fixWidth\">'+\r\n\t\t                    '<div class=\"cancel\">取消</div>'+\r\n\t\t                    '<div class=\"title\"></div>'+\r\n\t\t                    '<div class=\"ensure\">选择</div>'+\r\n\t\t                '</div>'+\r\n\t\t            '</div>'+\r\n\t\t            '<div class=\"panel\">'+\r\n\t\t                '<div class=\"fixWidth\">'+\r\n\t\t                \t'<div class=\"wheels\">'+\r\n\t\t\t                '</div>'+\r\n\t\t                    '<div class=\"selectLine\"></div>'+\r\n\t\t                    '<div class=\"shadowMask\"></div>'+\r\n\t\t                '</div>'+\r\n\t\t            '</div>'+\r\n\t\t        '</div>';\r\n\t\t    document.body.appendChild(_this.mobileSelect);\r\n\t\t\t//根据数据长度来渲染\r\n\r\n\t\t\tvar tempHTML='';\r\n\t\t\tfor(var i in wheelsData){ //列\r\n\t\t\t\ttempHTML += '<div class=\"wheel\"><ul class=\"selectContainer\">';\r\n\t\t\t\tif(_this.jsonType){\r\n\t\t\t\t\tfor(var j in wheelsData[i].data) { \r\n\t\t\t\t\t\tif(wheelsData[i].data[j].d_price != undefined) {\r\n\t\t\t\t\t\t\tif(wheelsData[i].data[j].d_id == '-1') {\r\n\t\t\t\t\t\t\t\ttempHTML += '<li data-id=\"'+wheelsData[i].data[j].d_id+'\" data-price=\"'+wheelsData[i].data[j].d_price+'\">'+wheelsData[i].data[j].d_name+'</li>';\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\ttempHTML += '<li data-id=\"'+wheelsData[i].data[j].d_id+'\" data-price=\"'+wheelsData[i].data[j].d_price+'\">'+wheelsData[i].data[j].d_name+'  ￥-'+wheelsData[i].data[j].d_price+'</li>';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\ttempHTML += '<li data-id=\"'+wheelsData[i].data[j].d_id+'\">'+wheelsData[i].data[j].d_name+'</li>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tfor(var j in wheelsData[i].data) {\r\n\t\t\t\t\t\ttempHTML += '<li data-id=\"'+j+'\">'+wheelsData[i].data[j]+'</li>';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ttempHTML += '</ul></div>';\r\n\t\t\t}\r\n\t\t\t_this.mobileSelect.querySelector('.wheels').innerHTML = tempHTML;\r\n\t\t},\r\n\r\n\t\taddListenerAll: function(){\r\n\t\t\tvar _this = this;\r\n\t\t\tfor(var i=0; i<_this.slider.length; i++){\r\n\t\t\t\t//手势监听\r\n\t\t\t\t(function (i) {\r\n\t\t\t\t\t_this.addListenerWheel(_this.wheel[i], i);\r\n\t\t\t\t\t_this.addListenerLi(i);\r\n\t\t\t\t})(i);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\taddListenerWheel: function(theWheel, index){\r\n\t\t\tvar _this = this;\r\n\t\t\ttheWheel.addEventListener('touchstart', function () {\r\n\t\t\t\t_this.touch(event, this.firstChild, index);\r\n\t\t\t},false);\r\n\t\t\ttheWheel.addEventListener('touchend', function () {\r\n\t\t\t\t_this.touch(event, this.firstChild, index);\r\n\t\t\t},false);\r\n\t\t\ttheWheel.addEventListener('touchmove', function () {\r\n\t\t\t\t_this.touch(event, this.firstChild, index);\r\n\t\t\t},false);\r\n\r\n\t\t\t//PC拖拽监听\r\n\t\t\ttheWheel.addEventListener('mousedown', function () {\r\n\t\t\t\t_this.dragClick(event, this.firstChild, index);\r\n\t\t\t},false);\r\n\t\t\ttheWheel.addEventListener('mousemove', function () {\r\n\t\t\t\t_this.dragClick(event, this.firstChild, index);\r\n\t\t\t},false);\r\n\t\t\ttheWheel.addEventListener('mouseup', function () {\r\n\t\t\t\t_this.dragClick(event, this.firstChild, index);\r\n\t\t\t},true); \r\n\t\t},\r\n\r\n\t\taddListenerLi:function(sliderIndex){\r\n\t\t\tvar _this = this;\r\n\t\t\tvar curWheelLi = _this.slider[sliderIndex].getElementsByTagName('li');\r\n\t\t\tfor(var j=0; j<curWheelLi.length;j++){\r\n\t\t\t\t(function (j) {\r\n\t\t\t\t\tcurWheelLi[j].addEventListener('click',function(){\r\n\t\t\t\t\t\t_this.singleClick(this, j, sliderIndex);\r\n\t\t\t\t\t},false);\r\n\t\t\t\t})(j);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tcheckDataType: function(){ \r\n\t\t\tvar _this = this;\r\n\t\t\tif(typeof(_this.wheelsData[0].data[0])=='object'){\r\n\t\t\t\t_this.jsonType = true;\r\n\t\t\t\t_this.jsonData = _this.wheelsData[0].data;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tcheckCascade: function(){\r\n\t\t\tvar _this = this;\r\n\t\t\tif(_this.jsonType){ \r\n\t\t\t\tvar node = _this.wheelsData[0].data;\r\n\t\t\t\tfor(var i=0; i<node.length; i++){\r\n\t\t\t\t\tif('childs' in node[i] && node[i].childs.length > 0){\r\n\t\t\t\t\t\t_this.cascade = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\t_this.cascade = false;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tinitCascade: function(){\r\n\t\t\tvar _this = this;\r\n\t\t\t_this.displayJson.push(_this.generateArrData(_this.jsonData));\r\n\t\t\t_this.checkArrDeep(_this.jsonData[0]);\r\n\t\t\t//console.log('将要显示的json:'); \r\n\t\t\t//console.log(_this.displayJson);\r\n\t\t\t_this.updateWheels();\r\n\t\t},\r\n\r\n\t\tgenerateArrData: function (targetArr) {\r\n\t\t\tvar tempArr = [];\r\n\t\t\tfor(var i=0; i<targetArr.length; i++){\r\n\t\t\t\ttempArr.push({\r\n\t\t\t\t\t\"id\": targetArr[i].id,\r\n\t\t\t\t\t\"value\": targetArr[i].value\r\n\t\t\t\t});\t\r\n\t\t\t}\r\n\t\t\treturn tempArr;\r\n\t\t},\r\n\r\n\t\tcheckArrDeep: function (parent) { //检测子节点深度  修改 displayJson\r\n\t\t\tvar _this = this;\r\n\t\t\tif ('childs' in parent && parent.childs.length > 0) {\r\n\t\t\t\t_this.displayJson.push(_this.generateArrData(parent.childs)) ; //生成子节点数组\r\n\t\t\t\t_this.checkArrDeep(parent.childs[0]);//检测下一个子节点\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tcheckRange: function(index, posIndexArr){\r\n\t\t\tvar _this = this;\r\n\t\t\tvar deleteNum = _this.displayJson.length-1-index;\r\n\t\t\tfor(var i=0; i<deleteNum; i++){\r\n\t\t\t\t_this.displayJson.pop(); //修改 displayJson\r\n\t\t\t}\r\n\t\t\tvar resultNode;\r\n\t\t\tfor (var i = 0; i <= index; i++){\r\n\t\t\t\tif (i == 0)\r\n\t\t\t\t\tresultNode = _this.jsonData[posIndexArr[0]];\r\n\t\t\t\telse {\r\n\t\t\t\t\tresultNode = resultNode.childs[posIndexArr[i]];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t_this.checkArrDeep(resultNode);\r\n\t\t\t//console.log(_this.displayJson);\r\n\t\t\t_this.updateWheels();\r\n\t\t\t_this.fixRowStyle();\r\n\t\t\t_this.setCurDistance(_this.resetPostion(index, posIndexArr));\r\n\t\t},\r\n\r\n\t\tresetPostion: function(index, posIndexArr){\r\n\t\t\tvar _this = this;\r\n\t\t\tvar tempPosArr = posIndexArr;\r\n\t\t\tvar tempCount;\r\n\t\t\tif(_this.slider.length > posIndexArr.length){ \r\n\t\t\t\ttempCount = _this.slider.length - posIndexArr.length;\r\n\t\t\t\tfor(var i=0; i<tempCount; i++){  \r\n\t\t\t\t\ttempPosArr.push(0);\r\n\t\t\t\t}\r\n\t\t\t}else if(_this.slider.length < posIndexArr.length){\r\n\t\t\t\ttempCount = posIndexArr.length - _this.slider.length;\r\n\t\t\t\tfor(var i=0; i<tempCount; i++){\r\n\t\t\t\t\ttempPosArr.pop();\r\n\t\t\t\t}\t\r\n\t\t\t}\r\n\t\t\tfor(var i=index+1; i< tempPosArr.length; i++){\r\n\t\t\t\ttempPosArr[i] = 0;\r\n\t\t\t} \r\n\t\t\treturn tempPosArr;\r\n\t\t},\r\n\r\n\t\tupdateWheels: function(){\r\n\t\t\tvar _this = this;\r\n\t\t\t//删除多余的wheel\r\n\t\t\tif(_this.wheel.length > _this.displayJson.length){\r\n\t\t\t\tvar count = _this.wheel.length - _this.displayJson.length;\r\n\t\t\t\tfor(var i=0; i<count; i++){\r\n\t\t\t\t\t_this.wheels.removeChild(_this.wheel[_this.wheel.length-1]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor(var i=0; i<_this.displayJson.length; i++){ //列\r\n\t\t\t\t(function (i) {\r\n\t\t\t\t\tvar tempHTML='';\r\n\t\t\t\t\tif(_this.wheel[i]){\r\n\t\t\t\t\t\t//console.log('插入Li');\r\n\t\t\t\t\t\tfor(var j=0; j<_this.displayJson[i].length; j++){ //行\r\n\t\t\t\t\t\t\ttempHTML += '<li data-id=\"'+_this.displayJson[i][j].id+'\">'+_this.displayJson[i][j].value+'</li>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t_this.slider[i].innerHTML = tempHTML;\r\n\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvar tempWheel = document.createElement(\"div\");\r\n\t\t\t\t\t\ttempWheel.className = \"wheel\";\r\n\t\t\t\t\t\ttempHTML = '<ul class=\"selectContainer\">';\r\n\t\t\t\t\t\tfor(var j=0; j<_this.displayJson[i].length; j++){ //行\r\n\t\t\t\t\t\t\ttempHTML += '<li data-id=\"'+_this.displayJson[i][j].id+'\">'+_this.displayJson[i][j].value+'</li>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttempHTML += '</ul>';\r\n\t\t\t\t\t\ttempWheel.innerHTML = tempHTML;\r\n\r\n\t\t\t\t\t\t_this.addListenerWheel(tempWheel, i);\r\n\t\t\t\t    \t_this.wheels.appendChild(tempWheel); \r\n\t\t\t\t\t}\r\n\t\t\t\t\t_this.addListenerLi(i);\r\n\t\t\t\t})(i);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tupdateWheel: function(sliderIndex, data){\r\n\t\t\tvar _this = this;\r\n\t\t\tvar tempHTML='';\r\n\t\t\tfor(var j=0; j<data.length; j++){\r\n\t\t\t\ttempHTML += '<li>'+data[j]+'</li>'\r\n\t\t\t}\r\n\t\t\t_this.slider[sliderIndex].innerHTML = tempHTML;\r\n\t\t\t_this.addListenerLi(sliderIndex);\r\n\t\t},\r\n\r\n\t\tfixRowStyle: function(){\r\n\t\t\tvar _this = this;\r\n\t\t\tvar width = (100/_this.wheel.length).toFixed(2);\r\n\t\t\tfor(var i=0; i<_this.wheel.length; i++){\r\n\t\t\t\t_this.wheel[i].style.width = width+'%';\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t    getIndex: function(distance){\r\n\t        return Math.round((2*this.liHeight-distance)/this.liHeight);\r\n\t    },\r\n\r\n\t    getIndexArr: function(){\r\n\t    \tvar _this = this;\r\n\t    \tvar temp = [];\r\n\t    \tfor(var i=0; i<_this.curDistance.length; i++){\r\n\t    \t\ttemp.push(_this.getIndex(_this.curDistance[i]));\r\n\t    \t}\r\n\t    \treturn temp;\r\n\t    },\r\n\r\n\t    getJson: function(){\r\n\t    \tvar _this = this;\r\n\t    \tvar temp = [];\r\n\t    \tvar positionArr = _this.getIndexArr();\r\n\t    \tif(_this.cascade){\r\n\t\t    \tfor(var i=0; i<_this.wheel.length; i++){\r\n\t\t    \t\ttemp.push(_this.displayJson[i][positionArr[i]]);\r\n\t\t    \t}\r\n\t    \t}\r\n\t    \telse if(_this.jsonType){\r\n\t\t    \tfor(var i=0; i<_this.curDistance.length; i++){\r\n\t\t    \t\ttemp.push(_this.wheelsData[i].data[_this.getIndex(_this.curDistance[i])]);\r\n\t\t    \t}\r\n\t    \t}else{\r\n\t\t    \tfor(var i=0; i<_this.curDistance.length; i++){\r\n\t\t    \t\ttemp.push(_this.getValue(i));\r\n\t\t    \t}\r\n\t    \t}\r\n\t    \treturn temp;\r\n\t    },\r\n\r\n\t    calcDistance: function(index){\r\n\t\t\treturn 2*this.liHeight-index*this.liHeight;\r\n\t    },\r\n\r\n\t    setCurDistance: function(indexArr){\r\n\t    \tvar _this = this;\r\n\t    \tvar temp = [];\r\n\t    \tfor(var i=0; i<_this.slider.length; i++){\r\n\t    \t\ttemp.push(_this.calcDistance(indexArr[i]));\r\n\t    \t\t_this.movePosition(_this.slider[i],temp[i]);\r\n\t    \t}\r\n\t    \t_this.curDistance = temp;\r\n\t    },\r\n\r\n\t    fixPosition: function(distance){\r\n\t        return -(this.getIndex(distance)-2)*this.liHeight;\r\n\t    },\r\n\r\n\t    movePosition: function(theSlider, distance){\r\n\t        theSlider.style.webkitTransform = 'translate3d(0,' + distance + 'px, 0)';\r\n\t        theSlider.style.transform = 'translate3d(0,' + distance + 'px, 0)';\r\n\t    },\r\n\r\n\t    locatePostion: function(index, posIndex){\r\n\t    \tthis.curDistance[index] = this.calcDistance(posIndex);\r\n\t    \tthis.movePosition(this.slider[index],this.curDistance[index]);\r\n\t    },\r\n\r\n\t    updateCurDistance: function(theSlider, index){\r\n\t        this.curDistance[index] = parseInt(theSlider.style.transform.split(',')[1]);\r\n\t    },\r\n\r\n\t    getDistance:function(theSlider){\r\n\t    \treturn parseInt(theSlider.style.transform.split(',')[1]);\r\n\t    },\r\n\r\n\t    getValue: function(sliderIndex){\r\n\t    \tvar _this = this;\r\n\t    \tvar index = _this.getIndex(_this.curDistance[sliderIndex]);\r\n\t    \treturn _this.slider[sliderIndex].getElementsByTagName('li')[index].innerHTML;\r\n\t    },\r\n\r\n\t    getDataId: function(sliderIndex) {\r\n\t    \tvar _this = this;\r\n\t    \tvar index = _this.getIndex(_this.curDistance[sliderIndex]);\r\n\t    \treturn _this.slider[sliderIndex].getElementsByTagName('li')[index].getAttribute('data-id');\r\n\t    },\r\n\r\n\t    getDataPrice: function(sliderIndex) {\r\n\t    \tvar _this = this;\r\n\t    \tvar index = _this.getIndex(_this.curDistance[sliderIndex]);\r\n\t    \treturn _this.slider[sliderIndex].getElementsByTagName('li')[index].getAttribute('data-price');\r\n\t    },\r\n\r\n\t    touch: function(event, theSlider, index){\r\n\t    \tvar _this = this;\r\n\t    \tevent = event || window.event;\r\n\t    \tswitch(event.type){\r\n\t    \t\tcase \"touchstart\":\r\n\t\t\t        _this.startY = event.touches[0].clientY;\r\n\t\t\t        _this.oldMoveY = _this.startY;\r\n\t    \t\t\tbreak;\r\n\r\n\t    \t\tcase \"touchend\":\r\n\r\n\t\t\t        _this.moveEndY = event.changedTouches[0].clientY;\r\n\t\t\t        _this.offsetSum = _this.moveEndY - _this.startY;\r\n\r\n\t\t\t\t\t//修正位置\r\n\t\t\t        _this.updateCurDistance(theSlider, index);\r\n\t\t\t        _this.curDistance[index] = _this.fixPosition(_this.curDistance[index]);\r\n\t\t\t        _this.movePosition(theSlider, _this.curDistance[index]);\r\n\t\t\t        _this.oversizeBorder = -(theSlider.getElementsByTagName('li').length-3)*_this.liHeight; \r\n\r\n\r\n\t\t\t        //反弹\r\n\t\t\t        if(_this.curDistance[index] + _this.offsetSum > 2*_this.liHeight){\r\n\t\t\t            _this.curDistance[index] = 2*_this.liHeight;\r\n\t\t\t            setTimeout(function(){\r\n\t\t\t                _this.movePosition(theSlider, _this.curDistance[index]);\r\n\t\t\t            }, 100);\r\n\r\n\t\t\t        }else if(_this.curDistance[index] + _this.offsetSum < _this.oversizeBorder){\r\n\t\t\t            _this.curDistance[index] = _this.oversizeBorder;\r\n\t\t\t            setTimeout(function(){\r\n\t\t\t                _this.movePosition(theSlider, _this.curDistance[index]);\r\n\t\t\t            }, 100);\r\n\t\t\t        }\r\n\r\n\r\n\t\t\t        _this.transitionEnd(_this.getIndexArr(),_this.getJson());\r\n\r\n\t\t\t        if(_this.cascade){\r\n\t\t\t\t        var tempPosArr = _this.getIndexArr();\r\n\t\t\t\t        tempPosArr[index] = _this.getIndex(_this.curDistance[index]);\r\n\t\t\t        \t_this.checkRange(index, tempPosArr);\r\n\t\t\t        }\r\n\r\n\t    \t\t\tbreak;\r\n\r\n\t    \t\tcase \"touchmove\":\r\n\t\t\t        event.preventDefault();\r\n\t\t\t        _this.moveY = event.touches[0].clientY;\r\n\t\t\t        _this.offset = _this.moveY - _this.oldMoveY;\r\n\r\n\t\t\t        _this.updateCurDistance(theSlider, index);\r\n\t\t\t        _this.curDistance[index] = _this.curDistance[index] + _this.offset;\r\n\t\t\t        _this.movePosition(theSlider, _this.curDistance[index]);\r\n\t\t\t        _this.oldMoveY = _this.moveY;\r\n\t    \t\t\tbreak;\r\n\t    \t}\r\n\t    },\r\n\r\n\t    dragClick: function(event, theSlider, index){\r\n\t    \tvar _this = this;\r\n\t    \tevent = event || window.event;\r\n\t    \tswitch(event.type){\r\n\t    \t\tcase \"mousedown\":\r\n\t\t\t        _this.startY = event.clientY;\r\n\t\t\t        _this.oldMoveY = _this.startY;\r\n\t\t\t        _this.clickStatus = true;\r\n\t    \t\t\tbreak;\r\n\r\n\t    \t\tcase \"mouseup\":\r\n\r\n\t\t\t        _this.moveEndY = event.clientY;\r\n\t\t\t        _this.offsetSum = _this.moveEndY - _this.startY;\r\n\r\n\t\t\t\t\t//修正位置\r\n\t\t\t        _this.updateCurDistance(theSlider, index);\r\n\t\t\t        _this.curDistance[index] = _this.fixPosition(_this.curDistance[index]);\r\n\t\t\t        _this.movePosition(theSlider, _this.curDistance[index]);\r\n\t\t\t        _this.oversizeBorder = -(theSlider.getElementsByTagName('li').length-3)*_this.liHeight; \r\n\r\n\r\n\t\t\t        //反弹\r\n\t\t\t        if(_this.curDistance[index] + _this.offsetSum > 2*_this.liHeight){\r\n\t\t\t            _this.curDistance[index] = 2*_this.liHeight;\r\n\t\t\t            setTimeout(function(){\r\n\t\t\t                _this.movePosition(theSlider, _this.curDistance[index]);\r\n\t\t\t            }, 100);\r\n\r\n\t\t\t        }else if(_this.curDistance[index] + _this.offsetSum < _this.oversizeBorder){\r\n\t\t\t            _this.curDistance[index] = _this.oversizeBorder;\r\n\t\t\t            setTimeout(function(){\r\n\t\t\t                _this.movePosition(theSlider, _this.curDistance[index]);\r\n\t\t\t            }, 100);\r\n\t\t\t        }\r\n\r\n\t\t\t        _this.clickStatus = false;\r\n\t\t\t        _this.transitionEnd(_this.getIndexArr(),_this.getJson());\r\n\t\t\t        if(_this.cascade){\r\n\t\t\t\t        var tempPosArr = _this.getIndexArr();\r\n\t\t\t\t        tempPosArr[index] = _this.getIndex(_this.curDistance[index]);\r\n\t\t\t        \t_this.checkRange(index, tempPosArr);\r\n\t\t\t        }\r\n\t    \t\t\tbreak;\r\n\r\n\t    \t\tcase \"mousemove\":\r\n\t\t\t        event.preventDefault();\r\n\t\t\t        if(_this.clickStatus){\r\n\t\t\t\t        _this.moveY = event.clientY;\r\n\t\t\t\t        _this.offset = _this.moveY - _this.oldMoveY;\r\n\r\n\t\t\t\t        _this.updateCurDistance(theSlider, index);\r\n\t\t\t\t        _this.curDistance[index] = _this.curDistance[index] + _this.offset;\r\n\t\t\t\t        _this.movePosition(theSlider, _this.curDistance[index]);\r\n\t\t\t\t        _this.oldMoveY = _this.moveY;\r\n\t\t\t        }\r\n\t    \t\t\tbreak;\r\n\t    \t}\r\n\t    },\r\n\r\n\t    singleClick: function(theLi, index, sliderIndex){\r\n\t    \tvar _this = this;\r\n\t        if(_this.cascade){\r\n\t\t        var tempPosArr = _this.getIndexArr();\r\n\t\t        tempPosArr[sliderIndex] = index;\r\n\t        \t_this.checkRange(sliderIndex, tempPosArr);\r\n\r\n\t        }else{\r\n\t\t        _this.curDistance[sliderIndex] = (2-index)*_this.liHeight;\r\n\t\t        _this.movePosition(theLi.parentNode, _this.curDistance[sliderIndex]);\r\n\t        }\r\n\t    }\r\n\r\n\t};\r\n\r\n\treturn MobileSelect;\r\n})();\r\n"]}