{"version":3,"sources":["aui/aui-slide.js"],"names":["window","extend","a","b","key","hasOwnProperty","auiSlide","options","this","_init","firstTouchX","firstTouchY","touchXDelta","handleTranslateVal","touchStartTime","offsetX","offsetY","isScrolling","CLASS_SLIDER_NODE","CLASS_SLIDE_PAGE_WRAP","CLASS_SLIDE_PAGE","CLASS_SLIDE_PAGE_ACTIVE","CLASS_SLIDE_PAGE_DOT","CLASS_SLIDE_PAGE_LINE","__SLIDER_NODE","__SLIDE_PAGE_WRAP","__SLIDE_PAGE","__SLIDE_PAGE_ACTIVE","prototype","container","width","height","speed","autoPlay","pageShow","pageStyle","dotPosition","friction","loop","currentPage","PageCount","index","continuous","style","position","element","children","slideWrap","slideNodeList","querySelectorAll","slideWrapWidth","offsetWidth","slideNodeListLength","length","appendChild","cloneNode","i","webkitTransform","transform","createPagination","setPageDotPosition","addEventListener","touchStart","bind","touchMove","touchEnd","self","pageDotPosition","querySelector","textAlign","setInterval","slideTo","getCircle","setPaginationActive","pageList","classList","remove","add","pageWrap","innerHTML","pageShowHtml","pageCount","event","Date","parseInt","changedTouches","pageX","pageY","undefined","touchMoveObj","touchX","direction","getDirection","Math","abs","preventDefault","setTranslate","touchEndObj","touchEndX","touchEndY","moveDirection","x","y","boundary","duration","isValid","Number","dist","webkitTransitionDuration","transitionDuration"],"mappings":"CAQA,SAAUA,GACT,YAuTA,SAASC,GAAQC,EAAGC,GACnB,IAAK,GAAIC,KAAOD,GACTA,EAAEE,eAAeD,KACpBF,EAAEE,GAAOD,EAAEC,GAGb,OAAOF,GAEV,QAASI,GAAUC,GAClBC,KAAKC,MAAMF,GA9TZ,GACCG,GACAC,EACAC,EACAC,EACGC,EACAC,EACHC,EACAC,EAEGC,EAAoB,iBACvBC,EAAwB,sBACxBC,EAAmB,iBACnBC,EAA0B,wBAC1BC,EAAuB,qBACvBC,EAAwB,sBAErBC,EAAgB,IAAIN,EACvBO,EAAoB,IAAIN,EACxBO,EAAe,IAAIN,EACnBO,EAAsB,IAAIN,CAE3Bf,GAASsB,UAAUrB,SAClBsB,UAAU,GACVC,MAAM,OACNC,OAAO,OACPC,MAAO,IACPC,SAAU,EACVC,UAAU,EACVC,UAAW,MACXC,YAAa,SACbC,SAAS,EACTC,MAAK,EACLC,aAAY,EACZC,WAAU,GAEXlC,EAASsB,UAAUnB,MAAQ,SAASF,GAEnC,GADAN,EAAOO,KAAKD,QAASA,GACjBC,KAAKD,QAAQsB,UAAjB,CAGArB,KAAKiC,MAAQ,EACbjC,KAAKkC,YAAa,EAClBlC,KAAKqB,UAAYrB,KAAKD,QAAQsB,UAE9BrB,KAAK8B,KAAO9B,KAAKD,QAAQ+B,KACzB9B,KAAKwB,MAAQxB,KAAKD,QAAQyB,MAC1BxB,KAAKqB,UAAUc,MAAMC,SAAW,WAChCpC,KAAKqB,UAAUc,MAAMb,MAAQtB,KAAKD,QAAQuB,MAAM,KAChDtB,KAAKqB,UAAUc,MAAMZ,OAASvB,KAAKD,QAAQwB,OAAO,IAElD,IAAIc,GAAUrC,KAAKqB,UAAUiB,SAAS,EAGtC,IAFAtC,KAAKuC,UAAYF,EACjBrC,KAAKwC,cAAgBxC,KAAKuC,UAAUE,iBAAiBzB,GACjDqB,GAAYrC,KAAKwC,cAArB,CAIAxC,KAAK0C,eAAiB1C,KAAKuC,UAAUI,YACrC3C,KAAK4C,oBAAsB5C,KAAKwC,cAAcK,OAEd,GAA5B7C,KAAK4C,sBACRP,EAAQS,YAAY9C,KAAKuC,UAAUD,SAAS,GAAGS,WAAU,IACzDV,EAAQS,YAAY9C,KAAKuC,UAAUD,SAAS,GAAGS,WAAU,IACzD/C,KAAKuC,UAAYF,EACjBrC,KAAKwC,cAAgBxC,KAAKuC,UAAUE,iBAAiBzB,GAClDhB,KAAK4C,oBAAsB5C,KAAKwC,cAAcK,OAC9C7C,KAAKkC,YAAa,EAEtB,KAAK,GAAIc,GAAI,EAAGA,EAAIhD,KAAK4C,oBAAqBI,IAC7ChD,KAAKwC,cAAcQ,KAAOhD,KAAKwC,cAAcQ,GAAGb,MAAMc,gBAAkBjD,KAAKwC,cAAcQ,GAAGb,MAAMe,UAAY,eAAgBlD,KAAK0C,eAAeM,EAAG,UAGrJhD,MAAK4C,oBAAsB,IAC1B5C,KAAKD,QAAQ2B,WACf1B,KAAKmD,iBAAiB,GACtBnD,KAAKoD,sBAEHpD,KAAKD,QAAQ0B,SAAW,KAAOzB,KAAK8B,MACtC9B,KAAKyB,SAAS,GAEfzB,KAAKuC,UAAUc,iBAAiB,aAAcrD,KAAKsD,WAAWC,KAAKvD,OAAO,GAC1EA,KAAKuC,UAAUc,iBAAiB,YAAarD,KAAKwD,UAAUD,KAAKvD,OAAO,GACxEA,KAAKuC,UAAUc,iBAAiB,WAAYrD,KAAKyD,SAASF,KAAKvD,OAAO,OAIxEF,EAASsB,UAAUgC,mBAAqB,WACvC,GAAIM,GAAO1D,KACP2D,EAAkBD,EAAK3D,QAAQ6B,WACnC5B,MAAKqB,UAAUuC,cAAc3C,GAAmBkB,MAAM0B,UAAYF,GAGnE7D,EAASsB,UAAUK,SAAW,SAAUQ,GACvC,GAAIyB,GAAO1D,IACX8D,aAAY,WACXJ,EAAKK,QAAQL,EAAKM,UAAUN,EAAKzB,MAAM,IAAKyB,EAAKhB,eAAgB,GAC3DgB,EAAKK,QAAQL,EAAKM,UAAUN,EAAKzB,MAAM,GAAIyB,EAAKhB,eAAgB,GAChEgB,EAAKK,QAAQL,EAAKzB,OAAQyB,EAAKhB,eAAgBgB,EAAK3D,QAAQyB,OAC5DkC,EAAKK,QAAQL,EAAKM,UAAUN,EAAKzB,MAAM,GAAI,EAAGyB,EAAK3D,QAAQyB,OAC3DkC,EAAKzB,MAAQyB,EAAKM,UAAUN,EAAKzB,MAAM,GACvCyB,EAAKO,oBAAoBP,EAAKzB,QAClCyB,EAAK3D,QAAQ0B,WAGjB3B,EAASsB,UAAU6C,oBAAsB,SAAShC,GACjD,GAAIyB,GAAO1D,IAIX,IAHG0D,EAAK3D,QAAQgC,aACf2B,EAAK3D,QAAQgC,YAAYE,GAEtBjC,KAAKqB,UAAUuC,cAAc3C,GAAjC,CAGA,GAAIiD,GAAWlE,KAAKqB,UAAUoB,iBAAiBvB,EAC5ClB,MAAKqB,UAAUuC,cAAc1C,EAAaC,IAC5CnB,KAAKqB,UAAUuC,cAAc1C,EAAaC,GAAqBgD,UAAUC,OAAOvD,GAE7Eb,KAAKkC,WASRgC,EAASlE,KAAKiC,OAAOkC,UAAUE,IAAIxD,GARlB,GAAdb,KAAKiC,MACPiC,EAAS,GAAGC,UAAUE,IAAIxD,GACN,GAAZb,KAAKiC,MACbiC,EAAS,GAAGC,UAAUE,IAAIxD,GAE1BqD,EAASlE,KAAKiC,OAAOkC,UAAUE,IAAIxD,KAQtCf,EAASsB,UAAU+B,iBAAmB,SAASlB,GAC9C,GAAIyB,GAAO1D,KACPsE,EAAWtE,KAAKqB,UAAUuC,cAAc3C,EAC5C,IAAIqD,EAAJ,CAGAA,EAASC,UAAY,EACrB,IAAIC,GAAe,EACnB,QAAQd,EAAK3D,QAAQ4B,WACpB,IAAK,MACF,GAAK3B,KAAKkC,WAKT,IAAK,GAAIc,GAAI,EAAGA,EAAIhD,KAAK4C,oBAAqBI,IAC7CwB,GAAgB,gBAAgB5D,EAAiB,IAAIE,EAAqB,gBAL3E,KAAK,GAAIkC,GAAI,EAAGA,EAAI,EAAGA,IACtBwB,GAAgB,gBAAgB5D,EAAiB,IAAIE,EAAqB,WAO5EwD,GAASC,UAAYC,EACrBd,EAAKO,oBAAoB,EAC3B,MACD,KAAK,OACF,GAAKjE,KAAKkC,WAKT,IAAK,GAAIc,GAAI,EAAGA,EAAIhD,KAAK4C,oBAAqBI,IAC7CwB,GAAgB,gBAAgB5D,EAAiB,IAAIG,EAAsB,kBAAmB,IAAIf,KAAK4C,oBAAqB,iBAL7H,KAAK,GAAII,GAAI,EAAGA,EAAI,EAAGA,IACtBwB,GAAgB,gBAAgB5D,EAAiB,IAAIG,EAAsB,6BAO7EuD,GAASC,UAAYC,EACrBd,EAAKO,oBAAoB,MAK9BnE,EAASsB,UAAUqD,UAAY,WAC9B,GAAIf,GAAO1D,IACX,OAAO0D,GAAKlB,cAAcK,QAE3B/C,EAASsB,UAAUkC,WAAa,SAASoB,GACxCpE,EAA8B,EAAb,GAAIqE,MACrBzE,EAAc0E,SAASF,EAAMG,eAAe,GAAGC,OAC/C3E,EAAcyE,SAASF,EAAMG,eAAe,GAAGE,OAC/CtE,EAAcuE,QAEflF,EAASsB,UAAUoC,UAAY,SAASkB,GACvC,GAAIO,GAAeP,EAAMG,eAAe,GACtCK,EAASN,SAASK,EAAaH,MAChC1E,GAAc8E,EAAShF,EACvBG,EAAqBD,EAAYJ,KAAKD,QAAQ8B,SAE/CtB,EAAUqE,SAASK,EAAaH,OAAS5E,EACnCM,EAAUoE,SAASK,EAAaF,OAAS5E,CACzC,IAAIgF,GAAYnF,KAAKoF,aAAa7E,EAAQC,EAIhD,IAHiC,mBAAfC,KACjBA,KAAkBA,GAAe4E,KAAKC,IAAI/E,GAAW8E,KAAKC,IAAI9E,MAE3DC,EAAY,CAEf,GADAiE,EAAMa,kBACFvF,KAAK8B,KAAK,CACb,IAAI9B,KAAKkC,YAA0B,GAAZlC,KAAKiC,OAAuB,QAAXkD,EACvC,MAED,KAAInF,KAAKkC,YAA0B,GAAZlC,KAAKiC,OAAuB,SAAXkD,EACvC,MAED,IAAGnF,KAAKiC,OAASjC,KAAKwC,cAAcK,OAAO,EAAE,CAC5C,GAAGxC,GAAsB,EACxB,MAEDL,MAAKwF,aAAaxF,KAAKgE,UAAUhE,KAAKiC,MAAM,GAAI5B,EAAqBL,KAAK0C,eAAgB,OACrF,IAAiB,GAAd1C,KAAKiC,MAAW,CACxB,GAAG5B,GAAsB,EACxB,MAEDL,MAAKwF,aAAaxF,KAAKgE,UAAUhE,KAAKiC,MAAM,GAAIjC,KAAK0C,eAAgB,IAIvE1C,KAAKwF,aAAaxF,KAAKgE,UAAUhE,KAAKiC,MAAM,GAAI5B,EAAqBL,KAAK0C,eAAgB,GAC1F1C,KAAKwF,aAAaxF,KAAKiC,MAAO5B,EAAqB,GACnDL,KAAKwF,aAAaxF,KAAKgE,UAAUhE,KAAKiC,MAAM,GAAI5B,EAAqBL,KAAK0C,eAAgB,KAI5F5C,EAASsB,UAAUqC,SAAW,SAASiB,GACtC,GAAIe,GAAcf,EAAMG,eAAe,GACnCa,EAAYd,SAASa,EAAYX,OAAS5E,EACpCyF,EAAYf,SAASa,EAAYV,OAAS5E,EAKhDyF,IAHFC,EAAGJ,EAAYX,OAAS,EACxBgB,EAAGL,EAAYV,OAAS,GAEN/E,KAAKoF,aAAaM,EAAUC,IAC5CI,EAAW/F,KAAK0C,eAAe,EAC/BsD,EAAyB,EAAb,GAAIrB,MAAcrE,EAC9B2F,EAAUC,OAAOF,GAAY,KAAOX,KAAKC,IAAI/E,GAAW,IAAM8E,KAAKC,IAAI/E,GAAWwF,CACtF,KAAItF,EAAJ,CAGM,GAAGwF,GACR,GAAG1F,EAAU,EAAE,CACd,IAAIP,KAAK8B,MAAQ9B,KAAKiC,OAASjC,KAAKwC,cAAcK,OAAO,EACxD,MAGD,KAAI7C,KAAK8B,OAAS9B,KAAKkC,YAA0B,GAAZlC,KAAKiC,MACzC,MAGQ1B,IAAWwF,GAA6B,QAAjBH,GAE/B5F,KAAK+D,QAAQ/D,KAAKgE,UAAUhE,KAAKiC,MAAM,IAAKjC,KAAK0C,eAAgB,GACxD1C,KAAK+D,QAAQ/D,KAAKgE,UAAUhE,KAAKiC,MAAM,GAAIjC,KAAK0C,eAAgB,GAChE1C,KAAK+D,QAAQ/D,KAAKiC,OAAQjC,KAAK0C,eAAgB1C,KAAKwB,OACpDxB,KAAK+D,QAAQ/D,KAAKgE,UAAUhE,KAAKiC,MAAM,GAAI,EAAGjC,KAAKwB,OACnDxB,KAAKiC,MAAQjC,KAAKgE,UAAUhE,KAAKiC,MAAM,KAGvCjC,KAAK+D,QAAQ/D,KAAKiC,MAAO,EAAGjC,KAAKwB,OACjCxB,KAAK+D,QAAQ/D,KAAKgE,UAAUhE,KAAKiC,MAAM,GAAIjC,KAAK0C,eAAgB1C,KAAKwB,YAEpE,IAAGjB,EAAU,EAAE,CACpB,IAAIP,KAAK8B,MAAsB,GAAd9B,KAAKiC,MAC3B,MAED,KAAIjC,KAAK8B,OAAS9B,KAAKkC,YAA0B,GAAZlC,KAAKiC,MACzC,MAEQ1B,GAAUwF,GAA6B,SAAjBH,GAExB5F,KAAK+D,QAAQ/D,KAAKgE,UAAUhE,KAAKiC,MAAM,GAAIjC,KAAK0C,eAAgB,GAC7D1C,KAAK+D,QAAQ/D,KAAKgE,UAAUhE,KAAKiC,MAAM,IAAKjC,KAAK0C,eAAgB,GACjE1C,KAAK+D,QAAQ/D,KAAKiC,MAAOjC,KAAK0C,eAAgB1C,KAAKwB,OACnDxB,KAAK+D,QAAQ/D,KAAKgE,UAAUhE,KAAKiC,MAAM,GAAI,EAAGjC,KAAKwB,OACnDxB,KAAKiC,MAAQjC,KAAKgE,UAAUhE,KAAKiC,MAAM,KAGvCjC,KAAK+D,QAAQ/D,KAAKiC,MAAO,EAAGjC,KAAKwB,OACjCxB,KAAK+D,QAAQ/D,KAAKgE,UAAUhE,KAAKiC,MAAM,GAAIjC,KAAK0C,eAAgB1C,KAAKwB,aAIvEjB,KACFP,KAAK+D,QAAQ/D,KAAKgE,UAAUhE,KAAKiC,MAAM,IAAKjC,KAAK0C,eAAgB1C,KAAKwB,OACnExB,KAAK+D,QAAQ/D,KAAKiC,MAAO,EAAGjC,KAAKwB,OACjCxB,KAAK+D,QAAQ/D,KAAKgE,UAAUhE,KAAKiC,MAAM,GAAIjC,KAAK0C,eAAgB1C,KAAKwB,OAI1ExB,MAAKiE,oBAAoBjE,KAAKiC,SAErCnC,EAASsB,UAAUoE,aAAe,SAAUvD,EAAMkE,EAAK3E,GACnDxB,KAAKwC,cAAcP,KACrBjC,KAAKwC,cAAcP,GAAOE,MAAMiE,yBAC7BpG,KAAKwC,cAAcP,GAAOE,MAAMkE,mBAAqB7E,EAAQ,KAC7DxB,KAAKwC,cAAcP,GAAOE,MAAMc,gBAChCjD,KAAKwC,cAAcP,GAAOE,MAAMe,UAAY,eAAeiD,EAAK,YAGrErG,EAASsB,UAAU2C,QAAU,SAAU9B,EAAOkE,EAAM3E,GACnDxB,KAAKwF,aAAavD,EAAOkE,EAAM3E,IAGhC1B,EAASsB,UAAU4C,UAAY,SAAU/B,GACrC,OAAQjC,KAAK4C,oBAAuBX,EAAQjC,KAAK4C,qBAAwB5C,KAAK4C,qBAElF9C,EAASsB,UAAUgE,aAAe,SAASS,EAAGC,GAC7C,MAAID,KAAMC,EAAY,GAClBT,KAAKC,IAAIO,IAAMR,KAAKC,IAAIQ,GACXD,EAAI,EAAI,QAAU,OAElBC,EAAI,EAAI,OAAS,MAcnCtG,EAAOM,SAAWA,GAChBN","file":"aui-slide.js","sourcesContent":["/**\r\n * aui-slide.js 轮播组件\r\n * @author 流浪男\r\n * http://www.auicss.com\r\n * @todo more things to abstract, e.g. Loading css etc.\r\n * Licensed under the MIT license.\r\n * http://www.opensource.org/licenses/mit-license.php\r\n */\r\n(function(window) {\r\n\t\"use strict\";\r\n\r\n\tvar translateVal,\r\n\t\tfirstTouchX,\r\n\t\tfirstTouchY,\r\n\t\ttouchXDelta,\r\n\t\thandleTranslateVal;\r\n\tvar touchStartTime; //开始触摸事件\r\n\tvar offsetX,\r\n\t\toffsetY,\r\n\t\tisScrolling;\r\n\t// CLASS 组装\r\n\tvar\tCLASS_SLIDER_NODE = \"aui-slide-node\",\r\n\t\tCLASS_SLIDE_PAGE_WRAP = \"aui-slide-page-wrap\",\r\n\t\tCLASS_SLIDE_PAGE = \"aui-slide-page\",\r\n\t\tCLASS_SLIDE_PAGE_ACTIVE = \"aui-slide-page-active\",\r\n\t\tCLASS_SLIDE_PAGE_DOT = \"aui-slide-page-dot\",\r\n\t\tCLASS_SLIDE_PAGE_LINE = \"aui-slide-page-line\";\r\n\r\n\tvar __SLIDER_NODE = \".\"+CLASS_SLIDER_NODE,\r\n\t\t__SLIDE_PAGE_WRAP = \".\"+CLASS_SLIDE_PAGE_WRAP,\r\n\t\t__SLIDE_PAGE = \".\"+CLASS_SLIDE_PAGE,\r\n\t\t__SLIDE_PAGE_ACTIVE = \".\"+CLASS_SLIDE_PAGE_ACTIVE;\r\n\r\n\tauiSlide.prototype.options = {\r\n\t\tcontainer:'',\r\n\t\twidth:'auto',\r\n\t\theight:'auto',\r\n\t\tspeed: 300, //滑动速速\r\n\t\tautoPlay: 0, //自动播放\r\n\t\tpageShow: true, //是否显示分页器\r\n\t\tpageStyle: 'dot',\r\n\t\tdotPosition: 'center',\r\n\t\tfriction:1, //阻力\r\n\t\tloop:true,\r\n\t\tcurrentPage:false,\r\n\t\tPageCount:false\r\n\t};\r\n\tauiSlide.prototype._init = function(options) {\r\n\t\textend(this.options, options);\r\n\t\tif(!this.options.container){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.index = 0; //索引值\r\n\t\tthis.continuous = true;//用于判断长度为2时的特殊处理\r\n\t\tthis.container = this.options.container;\r\n\t\t// console.log(this.options.loop);\r\n\t\tthis.loop = this.options.loop;\r\n\t\tthis.speed = this.options.speed;\r\n\t\tthis.container.style.position = \"relative\";\r\n\t\tthis.container.style.width = this.options.width+\"px\";\r\n\t\tthis.container.style.height = this.options.height+\"px\";\r\n\r\n\t\tvar element = this.container.children[0];\r\n\t\tthis.slideWrap = element;\r\n\t\tthis.slideNodeList = this.slideWrap.querySelectorAll(__SLIDER_NODE);\r\n\t\tif(!element || !this.slideNodeList){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// this.options.pageCount(this.slideNodeList.length);\r\n\t\tthis.slideWrapWidth = this.slideWrap.offsetWidth;\r\n\t\tthis.slideNodeListLength = this.slideNodeList.length;\r\n\r\n\t\tif (this.slideNodeListLength == 2) { //当长度为2时作特殊处理\r\n\t\t\telement.appendChild(this.slideWrap.children[0].cloneNode(true));\r\n\t\t\telement.appendChild(this.slideWrap.children[1].cloneNode(true));\r\n\t\t\tthis.slideWrap = element;\r\n\t\t\tthis.slideNodeList = this.slideWrap.querySelectorAll(__SLIDER_NODE);\r\n\t    \tthis.slideNodeListLength = this.slideNodeList.length;\r\n\t    \tthis.continuous = false;\r\n\t    }\r\n\t\tfor (var i = 0; i < this.slideNodeListLength; i++) {\r\n\t\t\tthis.slideNodeList[i] && (this.slideNodeList[i].style.webkitTransform = this.slideNodeList[i].style.transform = \"translate3d(\"+(this.slideWrapWidth*i)+\"px,0,0)\");\r\n\t\t}\r\n\r\n\t\tif(this.slideNodeListLength > 1) {\r\n\t\t\tif(this.options.pageShow){\r\n\t\t\t\tthis.createPagination(0);\r\n\t\t\t\tthis.setPageDotPosition();\r\n\t\t\t}\r\n\t\t\tif(this.options.autoPlay > 500 && this.loop){\r\n\t\t\t\tthis.autoPlay(0);\r\n\t\t\t}\r\n\t\t\tthis.slideWrap.addEventListener('touchstart', this.touchStart.bind(this), false);\r\n\t\t\tthis.slideWrap.addEventListener('touchmove', this.touchMove.bind(this), false);\r\n\t\t\tthis.slideWrap.addEventListener('touchend', this.touchEnd.bind(this), false);\r\n\t\t}\r\n\t};\r\n\t// 当分页器为圆点时位置设置\r\n\tauiSlide.prototype.setPageDotPosition = function(){\r\n\t\tvar self = this;\r\n\t\tvar pageDotPosition = self.options.dotPosition;\r\n\t\tthis.container.querySelector(__SLIDE_PAGE_WRAP).style.textAlign = pageDotPosition;\r\n\t};\r\n\t// 自动播放\r\n\tauiSlide.prototype.autoPlay = function (index) {\r\n\t\tvar self = this;\r\n\t\tsetInterval(function(){\r\n\t\t\tself.slideTo(self.getCircle(self.index-1), -self.slideWrapWidth, 0);\r\n\t        self.slideTo(self.getCircle(self.index+2), self.slideWrapWidth, 0);\r\n\t        self.slideTo(self.index, -self.slideWrapWidth, self.options.speed);\r\n\t        self.slideTo(self.getCircle(self.index+1), 0, self.options.speed);\r\n\t        self.index = self.getCircle(self.index+1);\r\n\t        self.setPaginationActive(self.index);\r\n\t\t}, self.options.autoPlay)\r\n\t};\r\n\t// 设置当前分页\r\n\tauiSlide.prototype.setPaginationActive = function(index){\r\n\t\tvar self = this;\r\n\t\tif(self.options.currentPage){\r\n\t\t\tself.options.currentPage(index);\r\n\t\t}\r\n\t\tif(!this.container.querySelector(__SLIDE_PAGE_WRAP)){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar pageList = this.container.querySelectorAll(__SLIDE_PAGE);\r\n\t\tif(this.container.querySelector(__SLIDE_PAGE+__SLIDE_PAGE_ACTIVE)){\r\n\t\t\tthis.container.querySelector(__SLIDE_PAGE+__SLIDE_PAGE_ACTIVE).classList.remove(CLASS_SLIDE_PAGE_ACTIVE);\r\n\t\t}\r\n\t\tif(!this.continuous){\r\n\t\t\tif(this.index == 3){\r\n\t\t\t\tpageList[1].classList.add(CLASS_SLIDE_PAGE_ACTIVE);\r\n\t\t\t}else if(this.index==2){\r\n\t\t\t\tpageList[0].classList.add(CLASS_SLIDE_PAGE_ACTIVE);\r\n\t\t\t}else{\r\n\t\t\t\tpageList[this.index].classList.add(CLASS_SLIDE_PAGE_ACTIVE);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tpageList[this.index].classList.add(CLASS_SLIDE_PAGE_ACTIVE);\r\n\t\t}\r\n\r\n\t};\r\n\t// 创建分页器\r\n\tauiSlide.prototype.createPagination = function(index){\r\n\t\tvar self = this;\r\n\t\tvar pageWrap = this.container.querySelector(__SLIDE_PAGE_WRAP);\r\n\t\tif(!pageWrap){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tpageWrap.innerHTML = '';\r\n\t\tvar pageShowHtml = '';\r\n\t\tswitch (self.options.pageStyle) {\r\n\t\t\tcase \"dot\":// 原点\r\n\t\t\t\t\t\tif (!this.continuous) {\r\n\t\t\t\t\t\t\tfor (var i = 0; i < 2; i++) {\r\n\t\t\t\t\t\t\t\tpageShowHtml += '<span class=\"'+CLASS_SLIDE_PAGE+' '+CLASS_SLIDE_PAGE_DOT+'\"></span>';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tfor (var i = 0; i < this.slideNodeListLength; i++) {\r\n\t\t\t\t\t\t\t\tpageShowHtml += '<span class=\"'+CLASS_SLIDE_PAGE+' '+CLASS_SLIDE_PAGE_DOT+'\"></span>';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tpageWrap.innerHTML = pageShowHtml;\r\n\t\t\t\t\t\tself.setPaginationActive(0);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"line\":// 线条\r\n\t\t\t\t\t\tif (!this.continuous) {\r\n\t\t\t\t\t\t\tfor (var i = 0; i < 2; i++) {\r\n\t\t\t\t\t\t\t\tpageShowHtml += '<span class=\"'+CLASS_SLIDE_PAGE+' '+CLASS_SLIDE_PAGE_LINE+'\" style=\"width:50%\"></span>';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tfor (var i = 0; i < this.slideNodeListLength; i++) {\r\n\t\t\t\t\t\t\t\tpageShowHtml += '<span class=\"'+CLASS_SLIDE_PAGE+' '+CLASS_SLIDE_PAGE_LINE+'\" style=\"width:'+(100/this.slideNodeListLength)+'%\"></span>';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tpageWrap.innerHTML = pageShowHtml;\r\n\t\t\t\t\t\tself.setPaginationActive(0);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\t// 总页数\r\n\tauiSlide.prototype.pageCount = function() {\r\n\t\tvar self = this;\r\n\t\treturn self.slideNodeList.length;\r\n\t};\r\n\tauiSlide.prototype.touchStart = function(event) {\r\n\t\ttouchStartTime = new Date() * 1;\r\n\t\tfirstTouchX = parseInt(event.changedTouches[0].pageX);\r\n\t\tfirstTouchY = parseInt(event.changedTouches[0].pageY);\r\n\t\tisScrolling = undefined;\r\n\t};\r\n\tauiSlide.prototype.touchMove = function(event) {\r\n\t\tvar touchMoveObj = event.changedTouches[0],\r\n\t\t\t\ttouchX = parseInt(touchMoveObj.pageX);\r\n\t\t\ttouchXDelta = touchX - firstTouchX;\r\n\t\t\thandleTranslateVal = touchXDelta/this.options.friction;\r\n\t\t//  滑动位移\r\n\t\toffsetX = parseInt(touchMoveObj.pageX) - firstTouchX;\r\n        offsetY = parseInt(touchMoveObj.pageY) - firstTouchY;\r\n        var direction = this.getDirection(offsetX,offsetY);\r\n        if ( typeof isScrolling == 'undefined') {\r\n\t\t\tisScrolling = !!( isScrolling || Math.abs(offsetX) < Math.abs(offsetY) );\r\n\t\t}\r\n\t\tif(!isScrolling){\r\n\t\t\tevent.preventDefault();\r\n\t\t\tif(!this.loop){ //不循环\r\n\t\t\t\tif(!this.continuous && this.index==1 && direction=='left'){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif(!this.continuous && this.index==0 && direction=='right'){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif(this.index == this.slideNodeList.length-1){\r\n\t\t\t\t\tif(handleTranslateVal <= 0){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.setTranslate(this.getCircle(this.index-1), handleTranslateVal - this.slideWrapWidth, 0);\r\n\t\t\t\t}else if(this.index == 0){\r\n\t\t\t\t\tif(handleTranslateVal >= 0){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.setTranslate(this.getCircle(this.index+1), this.slideWrapWidth, 0);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.setTranslate(this.getCircle(this.index-1), handleTranslateVal - this.slideWrapWidth, 0);\r\n\t\t\tthis.setTranslate(this.index, handleTranslateVal , 0);\r\n\t\t\tthis.setTranslate(this.getCircle(this.index+1), handleTranslateVal + this.slideWrapWidth, 0);\r\n\r\n\t\t}\r\n\t};\r\n\tauiSlide.prototype.touchEnd = function(event) {\r\n\t\tvar touchEndObj = event.changedTouches[0];\r\n\t\tvar touchEndX = parseInt(touchEndObj.pageX) - firstTouchX;\r\n        var touchEndY = parseInt(touchEndObj.pageY) - firstTouchY;\r\n\t\tvar touchEndxy = {\r\n\t\t\t\tx: touchEndObj.pageX || 0,\r\n\t\t\t\ty: touchEndObj.pageY || 0\r\n\t\t\t};\r\n\t\tvar moveDirection = this.getDirection(touchEndX,touchEndY); //滑动方向\r\n\t\tvar boundary = this.slideWrapWidth/4;\r\n\t\tvar duration = (new Date() * 1) - touchStartTime;\r\n\t\tvar isValid = Number(duration) < 250 && Math.abs(offsetX) > 20 || Math.abs(offsetX) > boundary;\r\n\t\tif (isScrolling) {\r\n\t\t\treturn;\r\n\t\t}\r\n        if(isValid){\r\n\t\t\tif(offsetX < 0){\r\n\t\t\t\tif(!this.loop && this.index == this.slideNodeList.length-1){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(!this.loop && !this.continuous && this.index==1){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t        \tif(offsetX < -boundary && moveDirection == 'left'){\r\n\t        \t\t// left\r\n\t\t\t\t\tthis.slideTo(this.getCircle(this.index-1), -this.slideWrapWidth, 0);\r\n\t\t            this.slideTo(this.getCircle(this.index+2), this.slideWrapWidth, 0);\r\n\t\t            this.slideTo(this.index, -this.slideWrapWidth, this.speed);\r\n\t\t            this.slideTo(this.getCircle(this.index+1), 0, this.speed);\r\n\t\t            this.index = this.getCircle(this.index+1);\r\n\t\t\t\t}else{\r\n\t\t\t\t\t// this.slideTo(this.getCircle(this.index-1), -this.slideWrapWidth, this.speed);\r\n\t\t            this.slideTo(this.index, 0, this.speed);\r\n\t\t            this.slideTo(this.getCircle(this.index+1), this.slideWrapWidth, this.speed);\r\n\t\t\t\t}\r\n\t        }else if(offsetX > 0){\r\n\t        \tif(!this.loop && this.index == 0){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif(!this.loop && !this.continuous && this.index==0){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t        \tif(offsetX > boundary && moveDirection == 'right'){\r\n\t        \t\t// right\r\n\t\t        \tthis.slideTo(this.getCircle(this.index+1), this.slideWrapWidth, 0);\r\n\t\t            this.slideTo(this.getCircle(this.index-2), -this.slideWrapWidth, 0);\r\n\t\t            this.slideTo(this.index, this.slideWrapWidth, this.speed);\r\n\t\t            this.slideTo(this.getCircle(this.index-1), 0, this.speed);\r\n\t\t            this.index = this.getCircle(this.index-1);\r\n\t        \t}else{\r\n\t        \t\t// this.slideTo(this.getCircle(this.index-1), -this.slideWrapWidth, this.speed);\r\n\t\t            this.slideTo(this.index, 0, this.speed);\r\n\t\t            this.slideTo(this.getCircle(this.index+1), this.slideWrapWidth, this.speed);\r\n\t        \t}\r\n\t        }\r\n        }else{\r\n        \tif(offsetX){\r\n        \t\tthis.slideTo(this.getCircle(this.index-1), -this.slideWrapWidth, this.speed);\r\n\t            this.slideTo(this.index, 0, this.speed);\r\n\t            this.slideTo(this.getCircle(this.index+1), this.slideWrapWidth, this.speed);\r\n        \t}\r\n\r\n        }\r\n        this.setPaginationActive(this.index);\r\n\t};\r\n\tauiSlide.prototype.setTranslate = function (index,dist,speed){\r\n\t\tif(this.slideNodeList[index]){\r\n\t\t\tthis.slideNodeList[index].style.webkitTransitionDuration =\r\n\t    \tthis.slideNodeList[index].style.transitionDuration = speed + 'ms';\r\n\t    \tthis.slideNodeList[index].style.webkitTransform =\r\n\t    \tthis.slideNodeList[index].style.transform = \"translate3d(\"+dist+\"px,0,0)\";\r\n\t\t}\r\n\t};\r\n\tauiSlide.prototype.slideTo = function (index, dist, speed) {\r\n\t\tthis.setTranslate(index, dist, speed);\r\n\t\t// index = dist;\r\n\t};\r\n\tauiSlide.prototype.getCircle = function (index) {\r\n\t    return (this.slideNodeListLength + (index % this.slideNodeListLength)) % this.slideNodeListLength;\r\n\t};\r\n\tauiSlide.prototype.getDirection = function(x, y) {\r\n\t\tif (x === y) { return '';}\r\n\t\tif (Math.abs(x) >= Math.abs(y)) {\r\n            return x > 0 ? 'right' : 'left';\r\n        } else {\r\n           \treturn y > 0 ? 'down' : 'up';\r\n        }\r\n\t}\r\n\tfunction extend (a, b) {\r\n\t\tfor (var key in b) {\r\n\t\t  \tif (b.hasOwnProperty(key)) {\r\n\t\t  \t\ta[key] = b[key];\r\n\t\t  \t}\r\n\t  \t}\r\n\t  \treturn a;\r\n\t}\r\n\tfunction auiSlide (options) {\r\n\t\tthis._init(options);\r\n\t}\r\n\twindow.auiSlide = auiSlide;\r\n})(window);"]}