{"version":3,"sources":["aui/aui-popup-new.js"],"names":["window","undefined","auiPopup","prototype","init","params","callback","this","frameBounces","location","buttons","maskDiv","popupDiv","self","open","buttonsHtml","locationClass","close","document","createElement","className","body","appendChild","innerHTML","length","i","image","text","querySelector","insertAdjacentHTML","offsetHeight","classList","add","addEventListener","event","preventDefault","api","setFrameAttr","bounces","popupButtons","querySelectorAll","setTimeout","onclick","ii","e","value","_value","buttonIndex","buttonTitle","textContent","buttonValue","style","opacity","parentNode","removeChild"],"mappings":"CAMA,SAAWA,EAAQC,GACf,YACA,IAAIC,GAAW,YAGfA,GAASC,WACLC,KAAM,SAASC,EAAOC,GAClBC,KAAKC,aAAeH,EAAOG,aAC3BD,KAAKE,SAAWJ,EAAOI,SACvBF,KAAKG,QAAUL,EAAOK,QACtBH,KAAKI,QACLJ,KAAKK,QACL,IAAIC,GAAON,IACXM,GAAKC,KAAKT,EAAOC,IAErBQ,KAAM,SAAST,EAAOC,GAClB,GAAIS,GAAY,GAAGC,EAAgB,gBAClCH,EAAON,IACR,IAAGM,EAAKD,SAEJ,WADAC,GAAKI,OAQT,QALIJ,EAAKF,UACLE,EAAKF,QAAUO,SAASC,cAAc,OACtCN,EAAKF,QAAQS,UAAY,WACzBF,SAASG,KAAKC,YAAYT,EAAKF,UAE3BE,EAAKJ,UACT,IAAK,MACDO,EAAgB,eAChB,MACJ,KAAK,WACDA,EAAgB,oBAChB,MACJ,KAAK,YACDA,EAAgB,qBAChB,MACJ,KAAK,SACDA,EAAgB,kBAChB,MACJ,KAAK,cACDA,EAAgB,uBAChB,MACJ,KAAK,eACDA,EAAgB,wBAChB,MACJ,SACIA,EAAgB,gBAOxB,GAJAH,EAAKD,SAAWM,SAASC,cAAc,OACvCN,EAAKD,SAASQ,UAAY,aAAaJ,EACvCH,EAAKD,SAASW,UAAY,2EAC1BL,SAASG,KAAKC,YAAYT,EAAKD,UAC5BC,EAAKH,SAAWG,EAAKH,QAAQc,OAAO,CACnCT,GAAe,yCACf,KAAI,GAAIU,GAAI,EAAGA,EAAIZ,EAAKH,QAAQc,OAAOC,IACnCV,GAAe,kDACfA,GAAe,mDAAmDF,EAAKH,QAAQe,GAAGC,MAAM,WACxFX,GAAe,oCAAoCF,EAAKH,QAAQe,GAAGE,KAAK,SACxEZ,GAAe,OAEnBA,IAAe,QAEnBG,SAASU,cAAc,iCAAiCC,mBAAmB,YAAad,EAChEG,UAASU,cAAc,cAAcE,YAC7DjB,GAAKF,QAAQoB,UAAUC,IAAI,eAC3BnB,EAAKD,SAASmB,UAAUC,IAAI,gBAC5BnB,EAAKD,SAASqB,iBAAiB,YAAa,SAASC,GACjDA,EAAMC,mBAEVtB,EAAKF,QAAQsB,iBAAiB,YAAa,SAASC,GAChDA,EAAMC,mBAEQ,mBAAT,MAAuC,gBAAT,MAAqBtB,EAAKL,cAC7D4B,IAAIC,cACAC,SAAQ,GAGhB,IAAIC,GAAerB,SAASsB,iBAAiB,4BAC1CD,IAAgBA,EAAaf,OAAS,GACrCiB,WAAW,WACP5B,EAAKF,QAAQ+B,QAAU,WAAW7B,EAAKI,QACvC,KAAI,GAAI0B,GAAK,EAAGA,EAAKJ,EAAaf,OAAQmB,KACtC,SAAUC,GACNL,EAAaK,GAAGF,QAAU,WACtB,GAAG7B,EAAKH,QAAQkC,GAAGC,MACf,GAAIC,GAASjC,EAAKH,QAAQkC,GAAGC,UAE7B,IAAIC,GAAS,IAEdxC,IACCA,GACIyC,YAAaH,EAAE,EACfI,YAAazC,KAAK0C,YAClBC,YAAaJ,IAGrBjC,EAAKI,UAGV0B,IAER,MAGX1B,MAAO,WACH,GAAIJ,GAAON,IAMX,IALkB,mBAAT,MAAuC,gBAAT,MAAqBM,EAAKL,cAC7D4B,IAAIC,cACAC,SAAQ,IAGbzB,EAAKD,SAAS,CACWC,EAAKD,SAASkB,YACtCjB,GAAKD,SAASmB,UAAUC,IAAI,iBAC5BnB,EAAKF,QAAQwC,MAAMC,QAAU,EAC7BX,WAAW,WACJ5B,EAAKF,SACJE,EAAKF,QAAQ0C,WAAWC,YAAYzC,EAAKF,SAE7CE,EAAKD,SAASyC,WAAWC,YAAYzC,EAAKD,UAC1CC,EAAKF,QAAUE,EAAKD,UAAW,GAChC,QAIlBZ,EAAOE,SAAWA,GAChBF","file":"aui-popup-new.js","sourcesContent":["/**\r\n * aui-popup.js\r\n * @author 流浪男\r\n * Licensed under the MIT license.\r\n * http://www.opensource.org/licenses/mit-license.php\r\n */\r\n(function( window, undefined ) {\r\n    \"use strict\";\r\n    var auiPopup = function() {\r\n    };\r\n    var isShow = false;\r\n    auiPopup.prototype = {\r\n        init: function(params,callback){\r\n            this.frameBounces = params.frameBounces;\r\n            this.location = params.location;\r\n            this.buttons = params.buttons;\r\n            this.maskDiv;\r\n            this.popupDiv;\r\n            var self = this;\r\n            self.open(params,callback);\r\n        },\r\n        open: function(params,callback) {\r\n            var buttonsHtml='',locationClass = 'aui-popup-top';\r\n        \tvar self = this;\r\n            if(self.popupDiv){\r\n                self.close();\r\n                return;\r\n            }\r\n            if(!self.maskDiv){\r\n                self.maskDiv = document.createElement(\"div\");\r\n                self.maskDiv.className = \"aui-mask\";\r\n                document.body.appendChild(self.maskDiv);\r\n            }\r\n            switch (self.location) {\r\n                case \"top\":\r\n                    locationClass = 'aui-popup-top';\r\n                    break;\r\n                case \"top-left\":\r\n                    locationClass = 'aui-popup-top-left';\r\n                    break;\r\n                case \"top-right\":\r\n                    locationClass = 'aui-popup-top-right';\r\n                    break;\r\n                case \"bottom\":\r\n                    locationClass = 'aui-popup-bottom';\r\n                    break;\r\n                case \"bottom-left\":\r\n                    locationClass = 'aui-popup-bottom-left';\r\n                    break;\r\n                case \"bottom-right\":\r\n                    locationClass = 'aui-popup-bottom-right';\r\n                    break;\r\n                default:\r\n                    locationClass = 'aui-popup-top';\r\n                    break;\r\n            }\r\n            self.popupDiv = document.createElement(\"div\");\r\n            self.popupDiv.className = \"aui-popup \"+locationClass;\r\n            self.popupDiv.innerHTML = '<div class=\"aui-popup-arrow\"></div><div class=\"aui-popup-content\"></div>';\r\n            document.body.appendChild(self.popupDiv);\r\n            if(self.buttons && self.buttons.length){\r\n                buttonsHtml += '<ul class=\"aui-list aui-list-noborder\">';\r\n                for(var i = 0; i < self.buttons.length;i++){\r\n                    buttonsHtml += '<li class=\"aui-list-item aui-list-item-middle\">';\r\n                    buttonsHtml += '<div class=\"aui-list-item-label-icon\"><img src=\"'+self.buttons[i].image+'\"></div>';\r\n                    buttonsHtml += '<div class=\"aui-list-item-inner\">'+self.buttons[i].text+'</div>';\r\n                    buttonsHtml += '</li>';\r\n                }\r\n                buttonsHtml += '</ul>';\r\n            }\r\n            document.querySelector(\".aui-popup .aui-popup-content\").insertAdjacentHTML('beforeend', buttonsHtml);\r\n            var actionsheetHeight = document.querySelector(\".aui-popup\").offsetHeight;\r\n            self.maskDiv.classList.add(\"aui-mask-in\");\r\n            self.popupDiv.classList.add(\"aui-popup-in\");\r\n            self.popupDiv.addEventListener(\"touchmove\", function(event){\r\n                event.preventDefault();\r\n            })\r\n            self.maskDiv.addEventListener(\"touchmove\", function(event){\r\n                event.preventDefault();\r\n            })\r\n            if(typeof(api) != 'undefined' && typeof(api) == 'object' && self.frameBounces){\r\n                api.setFrameAttr({\r\n                    bounces:false\r\n                });\r\n            }\r\n            var popupButtons = document.querySelectorAll(\".aui-popup .aui-list-item\");\r\n            if(popupButtons && popupButtons.length > 0){\r\n                setTimeout(function(){\r\n                    self.maskDiv.onclick = function(){self.close();return;};\r\n                    for(var ii = 0; ii < popupButtons.length; ii++){\r\n                        (function(e){\r\n                            popupButtons[e].onclick = function(){\r\n                                if(self.buttons[e].value){\r\n                                    var _value = self.buttons[e].value;\r\n                                }else{\r\n                                    var _value = null;\r\n                                }\r\n                                if(callback){\r\n                                    callback({\r\n                                        buttonIndex: e+1,\r\n                                        buttonTitle: this.textContent,\r\n                                        buttonValue: _value\r\n                                    });\r\n                                };\r\n                                self.close();\r\n                                return;\r\n                            }\r\n                        })(ii)\r\n                    }\r\n                }, 350)\r\n            }\r\n        },\r\n        close: function(){\r\n            var self = this;\r\n            if(typeof(api) != 'undefined' && typeof(api) == 'object' && self.frameBounces){\r\n                api.setFrameAttr({\r\n                    bounces:true\r\n                });\r\n            }\r\n            if(self.popupDiv){\r\n                var actionsheetHeight = self.popupDiv.offsetHeight;\r\n                self.popupDiv.classList.add(\"aui-popup-out\");\r\n                self.maskDiv.style.opacity = 0;\r\n                setTimeout(function(){\r\n                    if(self.maskDiv){\r\n                        self.maskDiv.parentNode.removeChild(self.maskDiv);\r\n                    }\r\n                    self.popupDiv.parentNode.removeChild(self.popupDiv);\r\n                    self.maskDiv = self.popupDiv = false;\r\n                }, 300)\r\n            }\r\n        }\r\n    };\r\n\twindow.auiPopup = auiPopup;\r\n})(window);"]}