{"version":3,"sources":["aui/aui-scroll.js"],"names":["window","isToBottom","auiScroll","params","callback","this","extend","_init","prototype","listren","distance","self","listen","document","body","addEventListener","e","scroll","onscroll","scrollTop","documentElement","clientHeight","scrollHeight","innerHeight","a","b","key","hasOwnProperty"],"mappings":"CAOA,SAAUA,GACT,YACA,IAAIC,IAAa,EACbC,EAAY,SAAUC,EAAOC,GAChCC,KAAKC,OAAOD,KAAKF,OAAQA,GACzBE,KAAKE,MAAMJ,EAAOC,GAEnBF,GAAUM,WACTL,QACCM,SAAQ,EACCC,SAAU,KAEpBH,MAAQ,SAASJ,EAAOC,GACvB,GAAIO,GAAON,IACRM,GAAKR,OAAOS,SACdC,SAASC,KAAKC,iBAAiB,YAAa,SAASC,GACpDL,EAAKM,OAAOb,KAEbS,SAASC,KAAKC,iBAAiB,WAAY,SAASC,GACnDL,EAAKM,OAAOb,MAGdJ,EAAOkB,SAAW,WACjBP,EAAKM,OAAOb,KAGda,OAAS,SAAUb,GAClB,GAAIO,GAAON,KAEPc,GADsD,IAAvCN,SAASO,gBAAgBD,UAAkBN,SAASC,KAAKO,aAAeR,SAASO,gBAAgBC,aAC7D,IAAvCR,SAASO,gBAAgBD,UAAkBN,SAASC,KAAKK,UAAYN,SAASO,gBAAgBD,WAC1GG,EAAsD,IAAvCT,SAASO,gBAAgBD,UAAkBN,SAASC,KAAKQ,aAAeT,SAASO,gBAAgBE,YAEhHA,GAAaH,EAAUR,EAAKR,OAAOO,UAAYV,EAAOuB,aACnDtB,GAAa,EACVA,GACFG,GACCe,UAAYA,EACZlB,YAAa,MAIfA,GAAa,EACbG,GACCe,UAAYA,EACZlB,YAAa,MAIhBK,OAAQ,SAASkB,EAAGC,GACzB,IAAK,GAAIC,KAAOD,GACTA,EAAEE,eAAeD,KACpBF,EAAEE,GAAOD,EAAEC,GAGb,OAAOF,KAGXxB,EAAOE,UAAYA,GACjBF","file":"aui-scroll.js","sourcesContent":["/**\r\n * aui-scroll.js\r\n * @author  流浪男\r\n * @todo more things to abstract, e.g. Loading css etc.\r\n * Licensed under the MIT license.\r\n * http://www.opensource.org/licenses/mit-license.php\r\n */\r\n(function(window) {\r\n\t'use strict';\r\n\tvar isToBottom = false,isMoved = false;\r\n\tvar auiScroll = function (params,callback) {\r\n\t\tthis.extend(this.params, params);\r\n\t\tthis._init(params,callback);\r\n\t}\r\n\tauiScroll.prototype = {\r\n\t\tparams: {\r\n\t\t\tlistren:false,\r\n            distance: 100\r\n        },\r\n\t\t_init : function(params,callback) {\r\n\t\t\tvar self = this;\r\n\t\t\tif(self.params.listen){\r\n\t\t\t\tdocument.body.addEventListener(\"touchmove\", function(e){\r\n\t\t\t\t\tself.scroll(callback);\r\n\t\t\t\t});\r\n\t\t\t\tdocument.body.addEventListener(\"touchend\", function(e){\r\n\t\t\t\t\tself.scroll(callback);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\twindow.onscroll = function(){\r\n\t\t\t\tself.scroll(callback);\r\n\t\t\t}\r\n\t\t},\r\n\t\tscroll : function (callback) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar clientHeight = document.documentElement.scrollTop === 0 ? document.body.clientHeight : document.documentElement.clientHeight;\r\n\t\t\tvar scrollTop = document.documentElement.scrollTop === 0 ? document.body.scrollTop : document.documentElement.scrollTop;\r\n\t\t\tvar scrollHeight = document.documentElement.scrollTop === 0 ? document.body.scrollHeight : document.documentElement.scrollHeight;\r\n\r\n\t\t\tif (scrollHeight-scrollTop-self.params.distance <= window.innerHeight) {\r\n\t        \tisToBottom = true;\r\n\t        \tif(isToBottom){\r\n\t        \t\tcallback({\r\n\t        \t\t\t\"scrollTop\":scrollTop,\r\n\t        \t\t\t\"isToBottom\":true\r\n\t        \t\t})\r\n\t        \t}\r\n\t        }else{\r\n\t        \tisToBottom = false;\r\n\t        \tcallback({\r\n        \t\t\t\"scrollTop\":scrollTop,\r\n        \t\t\t\"isToBottom\":false\r\n        \t\t})\r\n\t        }\r\n\t\t},\r\n        extend: function(a, b) {\r\n\t\t\tfor (var key in b) {\r\n\t\t\t  \tif (b.hasOwnProperty(key)) {\r\n\t\t\t  \t\ta[key] = b[key];\r\n\t\t\t  \t}\r\n\t\t  \t}\r\n\t\t  \treturn a;\r\n\t\t}\r\n\t}\r\n\twindow.auiScroll = auiScroll;\r\n})(window);"]}