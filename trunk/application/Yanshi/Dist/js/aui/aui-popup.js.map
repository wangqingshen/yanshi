{"version":3,"sources":["aui/aui-popup.js"],"names":["window","undefined","auiPopup","this","_init","CLASS_MASK","CLASS_MASK_IN","CLASS_MASK_OUT","CLASS_POPUP_IN","CLASS_POPUP_OUT","CLASS_POPUP_FOR","__MASK","__POPUP_IN","__POPUP_OUT","popupStatus","prototype","self","_btn","document","querySelectorAll","i","length","setAttribute","onclick","e","popupId","getAttribute","popupDom","getElementById","className","indexOf","querySelector","hide","show","el","maskHtml","body","insertAdjacentHTML","style","display","setTimeout","classList","add","addEventListener","event","preventDefault","remove","parentNode","removeChild"],"mappings":"CAOA,SAAWA,EAAQC,GACf,YACA,IAAIC,GAAW,WACXC,KAAKC,SAELC,EAAa,WAChBC,EAAgB,cAChBC,EAAiB,eAEjBC,EAAiB,eACjBC,EAAkB,gBAClBC,EAAkB,gBACfC,EAAS,IAAIN,EAIhBO,EAAa,IAAIJ,EACjBK,EAAc,IAAIJ,EACfK,GAAc,CAClBZ,GAASa,WACLX,MAAO,WACN,GAAIY,GAAOb,KACPc,EAAOC,SAASC,iBAAiB,IAAIT,EAAgB,IACzD,IAAGO,EACF,IAAI,GAAIG,GAAE,EAAEA,EAAEH,EAAKI,OAAOD,IACzBH,EAAKG,GAAGE,aAAa,UAAW,IAChCL,EAAKG,GAAGG,QAAU,SAASC,GAC1B,GAAIC,GAAUtB,KAAKuB,aAAahB,GAC5BiB,EAAWT,SAASU,eAAeH,EACpCE,KACLA,EAASE,UAAUC,QAAQtB,OAAwBU,SAASa,cAAcnB,GACnEI,EAAKgB,KAAKL,GAEbX,EAAKiB,KAAKN,MAShBM,KAAM,SAASC,GACd,GAAIlB,GAAOb,IACX,IAAG+B,EAAGL,UAAUC,QAAQtB,OAAwBU,SAASa,cAAcnB,GAEnE,WADAI,GAAKgB,KAAKE,EAGX,KAAGpB,EAAH,CACH,IAAII,SAASa,cAAcpB,GAAQ,CACxC,GAAIwB,GAAW,8BACfjB,UAASkB,KAAKC,mBAAmB,YAAaF,GAEzCD,EAAGI,MAAMC,QAAU,QACnBC,WAAW,WACVtB,SAASa,cAAcpB,GAAQ8B,UAAUC,IAAIpC,GAC1C4B,EAAGO,UAAUC,IAAIlC,GACdM,GAAc,GAClB,IACHI,SAASa,cAAcpB,GAAQgC,iBAAiB,aAAc,SAASC,GACtEA,EAAMC,iBACN7B,EAAKgB,KAAKE,KAERA,EAAGS,iBAAiB,YAAa,SAASC,GACtCA,EAAMC,mBACR,KAENb,KAAM,SAASE,GACPpB,IACPI,SAASa,cAAcpB,GAAQ8B,UAAUK,OAAOxC,GAChDY,SAASa,cAAcpB,GAAQ8B,UAAUC,IAAInC,GACzCW,SAASa,cAAcnB,KACxBM,SAASa,cAAcnB,GAAY6B,UAAUC,IAAIjC,GACjDS,SAASa,cAAcnB,GAAY6B,UAAUK,OAAOtC,GACvDgC,WAAW,WACAtB,SAASa,cAAclB,KACjCK,SAASa,cAAclB,GAAayB,MAAMC,QAAU,OACjDrB,SAASa,cAAclB,GAAa4B,UAAUK,OAAOrC,GAClDS,SAASa,cAAcpB,IAClCO,SAASa,cAAcpB,GAAQoC,WAAWC,YAAY9B,SAASa,cAAcpB,IAElEG,GAAc,IAClB,SAGXd,EAAOE,SAAWA,GAChBF","file":"aui-popup.js","sourcesContent":["/**\r\n * aui-popup.js\r\n * @author 流浪男\r\n * @todo more things to abstract, e.g. Loading css etc.\r\n * Licensed under the MIT license.\r\n * http://www.opensource.org/licenses/mit-license.php\r\n */\r\n(function( window, undefined ) {\r\n    \"use strict\";\r\n    var auiPopup = function() {\r\n        this._init();\r\n    };\r\n    var\tCLASS_MASK = \"aui-mask\",\r\n    \tCLASS_MASK_IN = 'aui-mask-in',\r\n    \tCLASS_MASK_OUT = 'aui-mask-out',\r\n        CLASS_POPUP = 'aui-popup',\r\n    \tCLASS_POPUP_IN = 'aui-popup-in',\r\n    \tCLASS_POPUP_OUT = 'aui-popup-out',\r\n    \tCLASS_POPUP_FOR = 'aui-popup-for';\r\n    var\t__MASK = '.'+CLASS_MASK,\r\n    \t__MASK_IN = '.'+CLASS_MASK_IN,\r\n    \t__MASK_OUT = '.'+CLASS_MASK_OUT,\r\n        __POPUP = '.'+CLASS_POPUP,\r\n    \t__POPUP_IN = '.'+CLASS_POPUP_IN,\r\n    \t__POPUP_OUT = '.'+CLASS_POPUP_OUT;\r\n    var popupStatus = false;\r\n    auiPopup.prototype = {\r\n        _init: function() {\r\n        \tvar self = this;\r\n        \tvar _btn = document.querySelectorAll(\"[\"+CLASS_POPUP_FOR+\"]\");\r\n        \tif(_btn){\r\n        \t\tfor(var i=0;i<_btn.length;i++){\r\n        \t\t\t_btn[i].setAttribute(\"tapmode\", \"\");\r\n        \t\t\t_btn[i].onclick = function(e){\r\n        \t\t\t\tvar popupId = this.getAttribute(CLASS_POPUP_FOR);\r\n        \t\t\t\tvar popupDom = document.getElementById(popupId);\r\n        \t\t\t\tif(popupDom){\r\n\t\t\t\t\t\t\tif(popupDom.className.indexOf(CLASS_POPUP_IN) > -1 || document.querySelector(__POPUP_IN)){\r\n\t\t\t\t\t            self.hide(popupDom);\r\n\t\t\t\t\t        }else{\r\n\t\t\t\t\t        \tself.show(popupDom);\r\n\t\t\t\t\t        }\r\n        \t\t\t\t}else{\r\n        \t\t\t\t\treturn;\r\n        \t\t\t\t}\r\n\t\t\t\t\t}\r\n        \t\t}\r\n        \t}\r\n        },\r\n        show: function(el){\r\n        \tvar self = this;\r\n        \tif(el.className.indexOf(CLASS_POPUP_IN) > -1 || document.querySelector(__POPUP_IN)){\r\n\t            self.hide(el);\r\n\t            return;\r\n\t        }\r\n            if(popupStatus) return;\r\n        \tif(!document.querySelector(__MASK)){\r\n\t\t\t\tvar maskHtml = '<div class=\"aui-mask\"></div>';\r\n\t\t\t\tdocument.body.insertAdjacentHTML('beforeend', maskHtml);\r\n\t\t\t}\r\n        \tel.style.display = \"block\";\r\n        \tsetTimeout(function(){\r\n        \t\tdocument.querySelector(__MASK).classList.add(CLASS_MASK_IN);\r\n\t            el.classList.add(CLASS_POPUP_IN);\r\n                popupStatus = true;\r\n\t        }, 10)\r\n\t        document.querySelector(__MASK).addEventListener(\"touchstart\", function(event){\r\n\t        \tevent.preventDefault();\r\n\t        \tself.hide(el);\r\n\t        })\r\n            el.addEventListener(\"touchmove\", function(event){\r\n                event.preventDefault();\r\n            },false)\r\n        },\r\n        hide: function(el){\r\n            if(!popupStatus) return;\r\n        \tdocument.querySelector(__MASK).classList.remove(CLASS_MASK_IN);\r\n        \tdocument.querySelector(__MASK).classList.add(CLASS_MASK_OUT);\r\n        \tif(!document.querySelector(__POPUP_IN))return;\r\n            document.querySelector(__POPUP_IN).classList.add(CLASS_POPUP_OUT);\r\n            document.querySelector(__POPUP_IN).classList.remove(CLASS_POPUP_IN);\r\n\t        setTimeout(function(){\r\n                if(!document.querySelector(__POPUP_OUT))return;\r\n\t        \tdocument.querySelector(__POPUP_OUT).style.display = \"none\";\r\n\t            document.querySelector(__POPUP_OUT).classList.remove(CLASS_POPUP_OUT);\r\n\t            if(document.querySelector(__MASK)){\r\n\t\t\t\t\tdocument.querySelector(__MASK).parentNode.removeChild(document.querySelector(__MASK));\r\n\t\t\t\t}\r\n                popupStatus = false;\r\n\t        }, 300)\r\n        }\r\n    };\r\n\twindow.auiPopup = auiPopup;\r\n})(window);"]}