{"version":3,"sources":["aui/aui-actionsheet.js"],"names":["window","undefined","auiActionsheet","prototype","init","params","callback","this","frameBounces","title","buttons","cancelTitle","destructiveTitle","maskDiv","actionsheetDiv","self","open","titleHtml","buttonsHtml","destructiveHtml","cancelHtml","btnHtml","document","createElement","className","body","appendChild","length","i","insertAdjacentHTML","querySelector","offsetHeight","classList","add","style","webkitTransform","transform","opacity","addEventListener","event","preventDefault","api","setFrameAttr","bounces","actionsheetButtons","querySelectorAll","setTimeout","onclick","close","ii","e","buttonIndex","buttonTitle","textContent","actionsheetHeight","parentNode","removeChild"],"mappings":"CAMA,SAAWA,EAAQC,GACf,YACA,IAAIC,GAAiB,YAGrBA,GAAeC,WACXC,KAAM,SAASC,EAAOC,GAClBC,KAAKC,aAAeH,EAAOG,aAC3BD,KAAKE,MAAQJ,EAAOI,MACpBF,KAAKG,QAAUL,EAAOK,QACtBH,KAAKI,YAAcN,EAAOM,YAC1BJ,KAAKK,iBAAmBP,EAAOO,iBAC/BL,KAAKM,QACLN,KAAKO,cACL,IAAIC,GAAOR,IACXQ,GAAKC,KAAKX,EAAOC,IAErBU,KAAM,SAASX,EAAOC,GAClB,GAAIW,GAAU,GAAGC,EAAY,GAAGC,EAAgB,GAAGC,EAAW,GAAGC,EAAQ,GACxEN,EAAOR,IACR,KAAGQ,EAAKD,iBAAoBC,EAAKN,OAAUM,EAAKL,SAAYK,EAAKJ,aAAgBI,EAAKH,kBAAtF,CAYA,GAXIG,EAAKF,UACLE,EAAKF,QAAUS,SAASC,cAAc,OACtCR,EAAKF,QAAQW,UAAY,WACzBF,SAASG,KAAKC,YAAYX,EAAKF,UAEnCE,EAAKD,eAAiBQ,SAASC,cAAc,OAC7CR,EAAKD,eAAeU,UAAY,kBAChCF,SAASG,KAAKC,YAAYX,EAAKD,gBAC5BC,EAAKN,QACJQ,EAAY,oEAAoEF,EAAKN,MAAM,UAE5FM,EAAKL,SAAWK,EAAKL,QAAQiB,OAC5B,IAAI,GAAIC,GAAI,EAAGA,EAAIb,EAAKL,QAAQiB,OAAOC,IAE/BV,GADDU,GAAKb,EAAKL,QAAQiB,OAAO,EACT,yCAAyCZ,EAAKL,QAAQkB,GAAG,SAEzD,sDAAsDb,EAAKL,QAAQkB,GAAG,QAIjG,IAAGb,EAAKH,iBACJO,EAAkB,sEAAsEJ,EAAKH,iBAAiB,aAE9G,IAAIO,GAAkB,IAEvBJ,EAAKN,OAAUM,EAAKL,SAAWK,EAAKL,QAAQiB,UAC3CN,EAAU,oCAAoCJ,EAAaC,EAAeC,EAAgB,UAE3FJ,EAAKJ,cACJS,EAAa,0EAA0EL,EAAKJ,YAAY,gBAE5GI,EAAKD,eAAee,mBAAmB,YAAaR,EAAQD,EACpCE,UAASQ,cAAc,oBAAoBC,YACnEhB,GAAKF,QAAQmB,UAAUC,IAAI,eAC3BlB,EAAKD,eAAeoB,MAAMC,gBAAkBpB,EAAKD,eAAeoB,MAAME,UAAY,qBAClFrB,EAAKD,eAAeoB,MAAMG,QAAU,EACpCtB,EAAKD,eAAewB,iBAAiB,YAAa,SAASC,GACvDA,EAAMC,mBAEVzB,EAAKF,QAAQyB,iBAAiB,YAAa,SAASC,GAChDA,EAAMC,mBAEQ,mBAAT,MAAuC,gBAAT,MAAqBzB,EAAKP,cAC7DiC,IAAIC,cACAC,SAAQ,GAGhB,IAAIC,GAAqBtB,SAASuB,iBAAiB,4BAChDD,IAAsBA,EAAmBjB,OAAS,GACjDmB,WAAW,WACP/B,EAAKF,QAAQkC,QAAU,WAAWhC,EAAKiC,QACvC,KAAI,GAAIC,GAAK,EAAGA,EAAKL,EAAmBjB,OAAQsB,KAC5C,SAAUC,GACNN,EAAmBM,GAAGH,QAAU,WACzBzC,GACCA,GACI6C,YAAaD,EAAE,EACfE,YAAa7C,KAAK8C,cAG1BtC,EAAKiC,UAGVC,IAER,OAGXD,MAAO,WACH,GAAIjC,GAAOR,IAMX,IALkB,mBAAT,MAAuC,gBAAT,MAAqBQ,EAAKP,cAC7DiC,IAAIC,cACAC,SAAQ,IAGb5B,EAAKD,eAAe,CACnB,GAAIwC,GAAoBvC,EAAKD,eAAeiB,YAC5ChB,GAAKD,eAAeoB,MAAMC,gBAAkBpB,EAAKD,eAAeoB,MAAME,UAAY,iBAAiBkB,EAAkB,QACrHvC,EAAKF,QAAQqB,MAAMG,QAAU,EAC7BS,WAAW,WACJ/B,EAAKF,SACJE,EAAKF,QAAQ0C,WAAWC,YAAYzC,EAAKF,SAE7CE,EAAKD,eAAeyC,WAAWC,YAAYzC,EAAKD,gBAChDC,EAAKD,eAAiBC,EAAKF,SAAU,GACtC,QAIlBb,EAAOE,eAAiBA,GACtBF","file":"aui-actionsheet.js","sourcesContent":["/**\r\n * aui-actionsheet.js\r\n * @author 流浪男\r\n * Licensed under the MIT license.\r\n * http://www.opensource.org/licenses/mit-license.php\r\n */\r\n(function( window, undefined ) {\r\n    \"use strict\";\r\n    var auiActionsheet = function() {\r\n    };\r\n    var isShow = false;\r\n    auiActionsheet.prototype = {\r\n        init: function(params,callback){\r\n            this.frameBounces = params.frameBounces;\r\n            this.title = params.title;\r\n            this.buttons = params.buttons;\r\n            this.cancelTitle = params.cancelTitle;\r\n            this.destructiveTitle = params.destructiveTitle;\r\n            this.maskDiv;\r\n            this.actionsheetDiv;\r\n            var self = this;\r\n            self.open(params,callback);\r\n        },\r\n        open: function(params,callback) {\r\n            var titleHtml='',buttonsHtml='',destructiveHtml='',cancelHtml='',btnHtml='';\r\n        \tvar self = this;\r\n            if(self.actionsheetDiv || (!self.title && !self.buttons && !self.cancelTitle && !self.destructiveTitle))return;\r\n            if(!self.maskDiv){\r\n                self.maskDiv = document.createElement(\"div\");\r\n                self.maskDiv.className = \"aui-mask\";\r\n                document.body.appendChild(self.maskDiv);\r\n            }\r\n            self.actionsheetDiv = document.createElement(\"div\");\r\n            self.actionsheetDiv.className = \"aui-actionsheet\";\r\n            document.body.appendChild(self.actionsheetDiv);\r\n            if(self.title){\r\n                titleHtml = '<div class=\"aui-actionsheet-title aui-border-b aui-font-size-12\">'+self.title+'</div>';\r\n            }\r\n            if(self.buttons && self.buttons.length){\r\n                for(var i = 0; i < self.buttons.length;i++){\r\n                    if(i == self.buttons.length-1){\r\n                        buttonsHtml += '<div class=\"aui-actionsheet-btn-item\">'+self.buttons[i]+'</div>';\r\n                    }else{\r\n                        buttonsHtml += '<div class=\"aui-actionsheet-btn-item aui-border-b\">'+self.buttons[i]+'</div>';\r\n                    }\r\n                }\r\n            }\r\n            if(self.destructiveTitle){\r\n                destructiveHtml = '<div class=\"aui-actionsheet-btn-item aui-border-t aui-text-danger\">'+self.destructiveTitle+'</div>';\r\n            }else{\r\n                var destructiveHtml = '';\r\n            }\r\n            if(self.title || (self.buttons && self.buttons.length)){\r\n                btnHtml = '<div class=\"aui-actionsheet-btn\">'+titleHtml+''+buttonsHtml+''+destructiveHtml+'</div>';\r\n            }\r\n            if(self.cancelTitle){\r\n                cancelHtml = '<div class=\"aui-actionsheet-btn\"><div class=\"aui-actionsheet-btn-item\">'+self.cancelTitle+'</div></div>';\r\n            }\r\n            self.actionsheetDiv.insertAdjacentHTML('beforeend', btnHtml+cancelHtml);\r\n            var actionsheetHeight = document.querySelector(\".aui-actionsheet\").offsetHeight;\r\n            self.maskDiv.classList.add(\"aui-mask-in\");\r\n            self.actionsheetDiv.style.webkitTransform = self.actionsheetDiv.style.transform = \"translate3d(0,0,0)\";\r\n            self.actionsheetDiv.style.opacity = 1;\r\n            self.actionsheetDiv.addEventListener(\"touchmove\", function(event){\r\n                event.preventDefault();\r\n            })\r\n            self.maskDiv.addEventListener(\"touchmove\", function(event){\r\n                event.preventDefault();\r\n            })\r\n            if(typeof(api) != 'undefined' && typeof(api) == 'object' && self.frameBounces){\r\n                api.setFrameAttr({\r\n                    bounces:false\r\n                });\r\n            }\r\n            var actionsheetButtons = document.querySelectorAll(\".aui-actionsheet-btn-item\");\r\n            if(actionsheetButtons && actionsheetButtons.length > 0){\r\n                setTimeout(function(){\r\n                    self.maskDiv.onclick = function(){self.close();return;};\r\n                    for(var ii = 0; ii < actionsheetButtons.length; ii++){\r\n                        (function(e){\r\n                            actionsheetButtons[e].onclick = function(){\r\n                                if(callback){\r\n                                    callback({\r\n                                        buttonIndex: e+1,\r\n                                        buttonTitle: this.textContent\r\n                                    });\r\n                                };\r\n                                self.close();\r\n                                return;\r\n                            }\r\n                        })(ii)\r\n                    }\r\n                }, 350)\r\n            }\r\n        },\r\n        close: function(){\r\n            var self = this;\r\n            if(typeof(api) != 'undefined' && typeof(api) == 'object' && self.frameBounces){\r\n                api.setFrameAttr({\r\n                    bounces:true\r\n                });\r\n            }\r\n            if(self.actionsheetDiv){\r\n                var actionsheetHeight = self.actionsheetDiv.offsetHeight;\r\n                self.actionsheetDiv.style.webkitTransform = self.actionsheetDiv.style.transform = \"translate3d(0,\"+actionsheetHeight+\"px,0)\";\r\n                self.maskDiv.style.opacity = 0;\r\n                setTimeout(function(){\r\n                    if(self.maskDiv){\r\n                        self.maskDiv.parentNode.removeChild(self.maskDiv);\r\n                    }\r\n                    self.actionsheetDiv.parentNode.removeChild(self.actionsheetDiv);\r\n                    self.actionsheetDiv = self.maskDiv = false;\r\n                }, 300)\r\n            }\r\n        }\r\n    };\r\n\twindow.auiActionsheet = auiActionsheet;\r\n})(window);"]}